<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Maven下载安装详细图文教程</title>
      <link href="2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/Maven%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/"/>
      <url>2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/Maven%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Maven下载安装详细图文教程"><a href="#Maven下载安装详细图文教程" class="headerlink" title="Maven下载安装详细图文教程"></a>Maven下载安装详细图文教程</h1><h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 官网地址</span></span></span><br><span class="line">https://maven.apache.org/download.cgi</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/29/MUD7v4hfxpWco9Q.png" alt="image-20210129033643785"></p><p>下载后直接解压</p><h2 id="2-配置环境变量"><a href="#2-配置环境变量" class="headerlink" title="2.配置环境变量"></a>2.配置环境变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.MAVEN_HOME</span></span></span><br><span class="line">D:\Program\programTool\apache-maven-3.6.3-bin\apache-maven-3.6.3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.Path</span></span></span><br><span class="line"><span class="meta">%</span><span class="bash">MAVEN_HOME%\bin</span></span><br></pre></td></tr></table></figure><h2 id="3-验证是否配置成功"><a href="#3-验证是否配置成功" class="headerlink" title="3.验证是否配置成功"></a>3.验证是否配置成功</h2><p>打开cmd</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 输入</span></span></span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/29/oAptIlELyTdjfuF.png" alt="image-20210129034039416"></p><h2 id="4-maven设置"><a href="#4-maven设置" class="headerlink" title="4.maven设置"></a>4.maven设置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.配置maven仓库</span></span></span><br><span class="line">&lt;localRepository&gt;D:\Program\programTool\apache-maven-3.6.3-bin\apache-maven-3.6.3\MavenRepository&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.配置阿里云镜像</span></span></span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">        &lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">        &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">        &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">        &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 打开cmd输入</span></span></span><br><span class="line">mvn help:system</span><br></pre></td></tr></table></figure><p>运行成功后：</p><p><img src="https://i.loli.net/2021/01/29/4mgdqx8rvJek5w3.png" alt="image-20210129034933175"></p><p>maven仓库会多很多文件夹：</p><p><img src="https://i.loli.net/2021/01/29/mE9TBdbQRsDAkOq.png" alt="image-20210129034957861"></p><p>至此，安装配置完成！</p>]]></content>
      
      
      <categories>
          
          <category> 编程工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git下载安装详细图文教程</title>
      <link href="2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/Git%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/"/>
      <url>2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/Git%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Git下载安装详细图文教程"><a href="#Git下载安装详细图文教程" class="headerlink" title="Git下载安装详细图文教程"></a>Git下载安装详细图文教程</h1><h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 官网</span></span></span><br><span class="line">https://git-scm.com/download/win</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/29/Kq4WxTtGzpsrDfB.png" alt="image-20210129024239325"></p><h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h2><p>开始安装</p><p>选择安装路径—选择安装组件—选择开始菜单</p><p><img src="https://i.loli.net/2021/01/29/JBWS3YnTd6Ojmk8.png" alt="image-20210129025211687"></p><p>选择Git文件默认的编辑器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个页面是在选择Git文件默认的编辑器，很少用到，所以默认Vim即可</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/29/LCTN5su3OtU2ePR.png" alt="image-20210129025535880"></p><p> <strong>选择PATH环境</strong>–选择第二种就行</p><p><img src="https://i.loli.net/2021/01/29/Lj8pFbedUAyvzQX.png" alt="image-20210129025728873"></p><p><strong>选择HTTPS后端传输</strong></p><p><img src="https://i.loli.net/2021/01/29/mfLIrlnBY5sdWpD.png" alt="image-20210129025802730"></p><p>next</p><p>next</p><p>一直默认到安装进度条</p><p><img src="https://i.loli.net/2021/01/29/rZfKJbIpwcDqxG5.png" alt="image-20210129030037292"></p><p>安装完成！</p><h2 id="3-git账号设置"><a href="#3-git账号设置" class="headerlink" title="3.git账号设置"></a>3.git账号设置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.设置用户名</span></span></span><br><span class="line">git config --global user.name &quot;Lemon-pp&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.设置邮箱</span></span></span><br><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br></pre></td></tr></table></figure><p>设置完成！</p>]]></content>
      
      
      <categories>
          
          <category> 编程工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA2020.3详细破解教程</title>
      <link href="2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/IDEA2020.3%E8%AF%A6%E7%BB%86%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/"/>
      <url>2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/IDEA2020.3%E8%AF%A6%E7%BB%86%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="IDEA2020-3详细破解教程"><a href="#IDEA2020-3详细破解教程" class="headerlink" title="IDEA2020.3详细破解教程"></a>IDEA2020.3详细破解教程</h1><p>以下为自己破解教程记录</p><p>教程参考博主：（包含补丁下载）</p><p><a href="https://www.exception.site/essay/idea-reset-eval">https://www.exception.site/essay/idea-reset-eval</a></p><h2 id="1-安装IDEA"><a href="#1-安装IDEA" class="headerlink" title="1.安装IDEA"></a>1.安装IDEA</h2><p>选择试用期运行IDEA</p><p>新建一个普通项目</p><p>然后将ide-eval-resetter-2.1.6.zip拖到IDEA中</p><p><img src="https://i.loli.net/2021/01/29/f1GwD24nquZNlmW.png" alt="image-20210129031933122"></p><p>插件安装成功后，会提示如下：</p><p><img src="https://i.loli.net/2021/01/29/NsBTFChxd23f6aK.png" alt="image-20210129032105056"></p><h2 id="2-关于使用"><a href="#2-关于使用" class="headerlink" title="2.关于使用"></a>2.关于使用</h2><ul><li><p>一般来说，在IDE窗口切出去或切回来时（窗口失去/得到焦点）会触发事件，检测是否长达<code>25</code>天都没有重置，会给出通知让你选择。（初次安装因为无法获取上次重置时间，会直接给予提示）</p></li><li><p>也可以手动唤出插件的主界面：</p><ul><li><p>如果IDE没有打开项目，在<code>Welcome</code>界面点击菜单：<code>Get Help</code> -&gt; <code>Eval Reset</code></p></li><li><p>如果IDE打开了项目，点击菜单：<code>Help</code> -&gt; <code>Eval Reset</code></p><p><img src="https://i.loli.net/2021/01/29/CuKg5QbqRm2EyNl.png" alt="image-20210129032301873"></p></li></ul></li></ul><p><img src="https://i.loli.net/2021/01/29/QuOKPIUhNJYaLjm.png" alt="image-20210129032323091"></p><p>唤出的插件主界面中包含了一些显示信息，<code>2</code>个按钮，<code>1</code>个勾选项：</p><ul><li>按钮：<code>Reload</code> 用来刷新界面上的显示信息。</li><li>按钮：<code>Reset</code> 点击会询问是否重置试用30天并<strong>重启IDE</strong>。选择<code>Yes</code>则执行重置操作并<strong>重启IDE生效</strong>，选择<code>No</code>则什么也不做。（此为手动重置方式）</li></ul><p><img src="https://i.loli.net/2021/01/29/YR3hyQv4xMDTznU.png" alt="image-20210129032355914"></p><p>勾选项：<code>Auto reset before per restart</code> 如果勾选了，则自勾选后<strong>每次重启/退出IDE时会自动重置试用信息</strong>，你无需做额外的事情。（此为自动重置方式）</p><h2 id="3-查看试用期"><a href="#3-查看试用期" class="headerlink" title="3.查看试用期"></a>3.查看试用期</h2><p>进入 IDEA 界面后，点击 <code>Help</code> -&gt; <code>Register</code> 查看：</p><p><img src="https://i.loli.net/2021/01/29/AyrGwtNah2luQH5.png" alt="image-20210129032429196"></p><p>可以看到，试用期还剩余30天：</p><p><img src="https://i.loli.net/2021/01/29/O8w5SifarPkcHLG.png" alt="image-20210129032510182"></p><h2 id="4-说明"><a href="#4-说明" class="headerlink" title="4.说明"></a>4.说明</h2><ul><li>重置30天试用期需要<strong>重启IDE生效</strong>！</li><li>本插件默认不会显示其主界面，如果你需要，参考本文：<code>如何使用</code>小节。</li><li>市场付费插件的试用信息也会<strong>一并重置</strong>。</li><li>如果长达<code>25</code>天不曾有任何重置动作，IDE会有<strong>通知询问</strong>你是否进行重置。</li><li>如果勾选：<code>Auto reset before per restart</code> ，重置是静默无感知的。</li><li>简单来说：勾选了<code>Auto reset before per restart</code>则无需再管，一劳永逸。d</li></ul>]]></content>
      
      
      <categories>
          
          <category> 编程工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK 1.8 下载安装教程</title>
      <link href="2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/JDK%201.8%20%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/JDK%201.8%20%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="JDK-1-8-下载安装教程"><a href="#JDK-1-8-下载安装教程" class="headerlink" title="JDK 1.8 下载安装教程"></a>JDK 1.8 下载安装教程</h1><h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><p>官网即可</p><figure class="highlight https"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">https://www.oracle.com/cn/java/technologies/javase-downloads.html</span></span><br></pre></td></tr></table></figure><h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h2><h2 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3.配置环境变量"></a>3.配置环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## JAVA_HOME  jdk安装目录</span><br><span class="line">C:\Program Files\Java\jdk1.8.0_271</span><br><span class="line"></span><br><span class="line">## path  bin目录</span><br><span class="line">%JAVA_HOME%\bin\</span><br></pre></td></tr></table></figure><h2 id="4-查看是否配置完成"><a href="#4-查看是否配置完成" class="headerlink" title="4.查看是否配置完成"></a>4.查看是否配置完成</h2><p><strong>注意：</strong>记得先重启cmd</p><p>三个命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br><span class="line">java</span><br><span class="line">javac</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql下载安装详细图文教程</title>
      <link href="2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/Mysql%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/"/>
      <url>2021/01/29/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/Mysql%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Mysql下载安装详细图文教程"><a href="#Mysql下载安装详细图文教程" class="headerlink" title="Mysql下载安装详细图文教程"></a>Mysql下载安装详细图文教程</h1><h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">https://dev.mysql.com/downloads/mysql/</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/29/HL2fp1koDAnU9iO.png" alt="image-20210129015734120"></p><h2 id="2-安装过程"><a href="#2-安装过程" class="headerlink" title="2.安装过程"></a>2.安装过程</h2><p>1.将mysql-8.0.16-winx64文件解压至某盘（不要装在c盘，其路径为E:\mysql-8.0.16-winx64），路径文件夹名称不能包含中文，涉及到字节码问题。图例：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 解压安装目录</span></span></span><br><span class="line">D:\Program\programTool\mysql8.0\mysql-8.0.23-winx64\mysql-8.0.23-winx64</span><br></pre></td></tr></table></figure><p>2.设置环境变量</p><p>path：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># mysql安装目录下的bin目录</span></span></span><br><span class="line">D:\Program\programTool\mysql8.0\mysql-8.0.23-winx64\mysql-8.0.23-winx64\bin</span><br></pre></td></tr></table></figure><p>3.安装</p><p>管理员身份打开cmd，切换到bin目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 执行命令，开始安装</span></span></span><br><span class="line">mysqld --initialize-insecure --user=mysql</span><br><span class="line">注：若提示缺少msvcp120.dll等文件，去网上下载后，重启cmd重复以上安装步骤即可。</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/01/29/AyiKYBbxh1tmWfR.png" alt="image-20210129021530988"></p><p>执行完，在mysql-8.0.23-winx64下会出现data文件夹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装mysql服务</span></span></span><br><span class="line">mysqld --install</span><br></pre></td></tr></table></figure><p>成功后会提示Service successfully installed</p><p><img src="https://i.loli.net/2021/01/29/W1eULqJIcaBgfAk.png" alt="image-20210129021646672"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 启动MySQL服务</span></span></span><br><span class="line">net start mysql</span><br></pre></td></tr></table></figure><p>完成以上步骤已完成mysql安装</p><h2 id="3-验证是否安装成功"><a href="#3-验证是否安装成功" class="headerlink" title="3.验证是否安装成功"></a>3.验证是否安装成功</h2><p>cmd启动mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p>安装初始密码为空，执行此代码后按两次回车。</p><p><img src="https://i.loli.net/2021/01/29/ZsHMU8CTVf4axi9.png" alt="image-20210129022037131"></p><p>初次设置密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;yourpass&#39;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="2020/12/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
      <url>2020/12/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><h2 id="1-什么是数据结构"><a href="#1-什么是数据结构" class="headerlink" title="1.什么是数据结构"></a>1.什么是数据结构</h2><ul><li>数据结构在计算机中的组织方式<ul><li>逻辑结构 ———–比如线性结构、树结构</li><li>物理存储结构———-比如线性结构中的数组、链表的存储方式</li></ul></li><li>数据对象必定与一系列加在其上的操作相关联。</li><li>完成这些操作所用的方法叫做<strong>算法</strong>。</li></ul><h2 id="2-算法"><a href="#2-算法" class="headerlink" title="2.算法"></a>2.算法</h2><h3 id="1-算法概念"><a href="#1-算法概念" class="headerlink" title="1.算法概念"></a>1.算法概念</h3><ul><li><p>一个有限指令集</p></li><li><p>接受一些输入（可以不输入）</p></li><li><p>产生输出</p></li><li><p>一定在有限步骤之后终止</p></li><li><p>每一条指令必须</p><ul><li><p>有充分明确的目标，不可以有歧义</p></li><li><p>计算机能处理的范围之内</p></li><li><p>描述不依赖任何一种计算机语言以及具体的实现手段</p></li></ul></li></ul><h3 id="2-什么是好的算法"><a href="#2-什么是好的算法" class="headerlink" title="2.什么是好的算法"></a>2.什么是好的算法</h3><p>两个标准：</p><ul><li>空间复杂度S(n)</li><li>时间复杂度T(n)<ul><li>1–&gt;n–&gt;nlogn–&gt;n^2^–&gt;n^3^–&gt;2^n^–&gt;n!  </li><li>当我们的时间复杂度较高时，我们就需要下意思思考，能不能降低这个算法的时间复杂度。做出改进。</li></ul></li></ul><p>一般分析最坏复杂度</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="2020/12/17/SpringBoot/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E7%9A%84%E9%80%89%E6%8B%A9%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>2020/12/17/SpringBoot/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E7%9A%84%E9%80%89%E6%8B%A9%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="日志框架的选择与使用"><a href="#日志框架的选择与使用" class="headerlink" title="日志框架的选择与使用"></a>日志框架的选择与使用</h2><h3 id="日志框架–实现层"><a href="#日志框架–实现层" class="headerlink" title="日志框架–实现层"></a>日志框架–实现层</h3><ul><li><strong>JUL–java.util.logging</strong><ul><li>能满足基本的日志需要，但是功能没有 Log4j 强大，而且使用范围也没有 Log4j 广泛</li></ul></li><li><strong>Log4j</strong><ul><li>是 apache 的一个开源项目，是高度可配置的，并可通过在运行时的外部文件配置。它根据记录的优先级别，并提供机制，以指示记录信息到许多的目的地，诸如：数据库，文件，控制台，UNIX 系统日志等。Log4j 中有三个主要组成部分：<ul><li><strong>loggers</strong> - 负责捕获记录信息。</li><li><strong>appenders</strong> - 负责发布日志信息，以不同的首选目的地。</li><li><strong>layouts</strong> - 负责格式化不同风格的日志信息。</li></ul></li></ul></li><li><strong>Logback</strong><ul><li>Logback 是由 log4j 创始人 Ceki Gulcu 设计的又一个开源日记组件，目标是替代 log4j。</li><li>logback 当前分成三个模块：<code>logback-core</code>、<code>logback-classic</code> 和 <code>logback-access</code>。</li></ul></li><li><strong>Log4j2</strong><ul><li>Log4j2 是 Log4j 和 Logback 的替代。但是功能过于强大，导致不是很适配，配置比较麻烦。</li></ul></li></ul><h3 id="日志门面–抽象层"><a href="#日志门面–抽象层" class="headerlink" title="日志门面–抽象层"></a>日志门面–抽象层</h3><ul><li><strong>common-logging</strong><ul><li>common-logging 是 apache 的一个开源项目。也称<strong>Jakarta Commons Logging，缩写 JCL</strong>。是提供日志功能的 API 接口，本身并不提供日志的具体实现（当然，common-logging 内部有一个 Simple logger 的简单实现，但是功能很弱，直接忽略），而是在<strong>运行时</strong>动态的绑定日志实现组件来工作（如 log4j、java.util.logging）。</li></ul></li><li><strong>SLF4j</strong><ul><li>全称为 Simple Logging Facade for Java，即 java 简单日志门面。</li><li>作者又是 Ceki Gulcu！这位大神写了 Log4j、Logback 和 slf4j</li><li>slf4j 是对不同日志框架提供的一个 API 封装，可以在部署的时候不修改任何配置即可接入一种日志实现方案。但是，slf4j 在<strong>编译时</strong>静态绑定真正的 Log 库。使用 SLF4J 时，如果你需要使用某一种日志实现，那么你必须选择正确的 SLF4J 的 jar 包的集合（各种桥接包）</li></ul></li></ul><p><strong>总结</strong></p><p>根据综合对比，最理想的选择是<strong>slf4j+logback</strong>。</p><p>在spring boot中使用的是 也是SLF4j和logback。</p><h3 id="实施日志解决方案"><a href="#实施日志解决方案" class="headerlink" title="实施日志解决方案"></a>实施日志解决方案</h3><p>使用日志解决方案基本可分为三步：</p><ol><li><p>引入 jar 包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ogback-classic-1.0.13.jar 会自动将 slf4j-api-1.7.21.jar  和  logback-core-1.0.13.jar 也添加到你的项目中。</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>配置</p><p>给类路径下放上日志框架自己的配置文件即可；SpringBoot就不使用默认配置了.</p><table><thead><tr><th align="center">Logging                                 System</th><th align="center"><strong>Customization</strong></th></tr></thead><tbody><tr><td align="center">Logback</td><td align="center"><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td></tr><tr><td align="center">Log4j2</td><td align="center"><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td></tr><tr><td align="center">Java Util Logging</td><td align="center">logging.properties</td></tr></tbody></table><p>logback.xml：直接就被日志框架识别了；logback-spring.xml：如果使用logback-spring.xml，日志框架就不直接加载日志的配置项，需要加上springProfile标签由SpringBoot解析日志配置，即可以使用SpringBoot的高级Profile功能。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;staging&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- configuration to be enabled when the &quot;staging&quot; profile is active --&gt;</span></span><br><span class="line">   可以指定某段配置只在某个环境下生效</span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>完整的配置文件：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- logback中一共有5种有效级别，分别是TRACE、DEBUG、INFO、WARN、ERROR，优先级依次从低到高 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;60 seconds&quot;</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;DIR_NAME&quot;</span> <span class="attr">value</span>=<span class="string">&quot;spring-helloworld&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 将记录日志打印到控制台 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- RollingFileAppender begin --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ALL&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/all.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>30MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ERROR&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/error.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/warn.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">level</span>&gt;</span>WARN<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/info.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/debug.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;TRACE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/trace.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">level</span>&gt;</span>TRACE<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;SPRING&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;user.dir&#125;/logs/$&#123;DIR_NAME&#125;/springframework.%d&#123;yyyy-MM-dd&#125;.log</span><br><span class="line">      <span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] [%-5p] %c&#123;36&#125;.%M - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- RollingFileAppender end --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- logger begin --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 本项目的日志记录，分级打印 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.zp.notes.spring&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;TRACE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- SPRING框架日志 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;WARN&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;SPRING&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ALL&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- logger end --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li>使用 API</li></ol><p>常见的各种日志解决方案的第 2 步和第 3 步基本一样，实施上的差别主要在第 1 步，也就是使用不同的库。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="2020/12/17/SpringBoot/static%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%20@autowired%E6%A0%87%E7%AD%BE%E7%9A%84%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
      <url>2020/12/17/SpringBoot/static%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%20@autowired%E6%A0%87%E7%AD%BE%E7%9A%84%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="static静态变量不能直接使用-autowired标签的问题的解决方法-md"><a href="#static静态变量不能直接使用-autowired标签的问题的解决方法-md" class="headerlink" title="static静态变量不能直接使用 @autowired标签的问题的解决方法.md"></a>static静态变量不能直接使用 @autowired标签的问题的解决方法.md</h1><h2 id="1-原因："><a href="#1-原因：" class="headerlink" title="1.原因："></a>1.原因：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">被static修饰变量，是部署于任何实例化的对象拥有，spring的依赖注入只能在对象层级上进行依赖注入，所以不能直接使用@autowired标签进行注入。</span><br></pre></td></tr></table></figure><h2 id="2-解决方法"><a href="#2-解决方法" class="headerlink" title="2.解决方法"></a>2.解决方法</h2><p>方法一：使用set方法注入（这个没成功，注入获得的为空）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Confsing confsing;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setConfsing</span><span class="params">()</span></span>&#123;</span><br><span class="line">       MainHelper.confsing = confsing;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>方法二：把static类和需要加载的类对调 （OK）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">需要在当前类上面加入注解<span class="meta">@Component</span> 使当前类成为一个bean对象。</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> Confsing confsing;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> Confsing confsings;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@PostConstruct</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       confsings = confsing;</span><br><span class="line">       <span class="comment">//这里需要把static类 和需要加载的类对调，就可以使用static加载readApplicationUntil对应的类方法了</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>方法三：新建一个类，通过私有静态类获取普通类的对象（🆗）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Conf</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Conf conf;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Confsing confsing;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Conf <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        conf = <span class="keyword">this</span>;</span><br><span class="line">        conf.confsing = <span class="keyword">this</span>.confsing;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="2020/12/17/SpringBoot/Spring%20Boot%E9%A1%B9%E7%9B%AEjar%E5%8C%85%E6%89%93%E5%8C%85%E6%AD%A5%E9%AA%A4/"/>
      <url>2020/12/17/SpringBoot/Spring%20Boot%E9%A1%B9%E7%9B%AEjar%E5%8C%85%E6%89%93%E5%8C%85%E6%AD%A5%E9%AA%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Boot项目jar包打包步骤"><a href="#Spring-Boot项目jar包打包步骤" class="headerlink" title="Spring Boot项目jar包打包步骤"></a>Spring Boot项目jar包打包步骤</h1><p>1.修改pom.xm文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;groupId&gt;org.montnets&lt;&#x2F;groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;zhonglujj&lt;&#x2F;artifactId&gt;</span><br><span class="line">   &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">   &lt;packaging&gt;jar&lt;&#x2F;packaging&gt;</span><br></pre></td></tr></table></figure><p>2.在build标签内添加内容如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.montnets.chatbot.ChatbotApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>定义spring boot 的入口类的方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Spring Boot 应用的标识</span></span><br><span class="line"><span class="comment">//主要就是继承SpringBootServletInitializer 和重写 configure方法</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 程序启动入口</span></span><br><span class="line">        <span class="comment">// 启动嵌入式的 Tomcat 并初始化 Spring 环境及其各 Spring 组件</span></span><br><span class="line">        SpringApplication.run(Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//为了打包springboot项目</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            SpringApplicationBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> builder.sources(<span class="keyword">this</span>.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>打包</p></li></ol><ul><li>（第一种方式）点击IDEA中的maven窗口的package按钮打包：</li></ul><p><img src="https://i.loli.net/2020/09/24/Tjs56DHvUuEoV1n.png" alt="image-20200924180451311"></p><ul><li><p>（第二种方式）在IDEA中的终端中：</p><p>到项目的pom平级的目录下面</p><p>使用mvn clean package 命令打包成jar</p><p>然后再到 target的目录下面执行</p><p>java -jar xxx.jar</p><p>即可执行 项目了</p><p><img src="https://i.loli.net/2020/09/27/fVxqT1au8P6p9mW.png" alt="image-20200927095300495"></p></li></ul><p>5.Linux下执行jar包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.复制jar包到Linux中</span><br><span class="line">2.jar包只包含src下的main，需要自己复制resources下的文件、以及其他文件到同级目录，可以修改配置文件。</span><br><span class="line">3.使用命令：nohup java -jar xxx.jar &amp; 可以后台执行项目了。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="2020/12/17/Redis/Redis/"/>
      <url>2020/12/17/Redis/Redis/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Redis入门"><a href="#Redis入门" class="headerlink" title="Redis入门"></a>Redis入门</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 <a href="http://www.redis.cn/topics/data-types-intro.html#strings">字符串（strings）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hashes">散列（hashes）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#lists">列表（lists）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sets">集合（sets）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sorted-sets">有序集合（sorted sets）</a> 与范围查询， <a href="http://www.redis.cn/topics/data-types-intro.html#bitmaps">bitmaps</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hyperloglogs">hyperloglogs</a> 和 <a href="http://www.redis.cn/commands/geoadd.html">地理空间（geospatial）</a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html">复制（replication）</a>，<a href="http://www.redis.cn/commands/eval.html">LUA脚本（Lua scripting）</a>， <a href="http://www.redis.cn/topics/lru-cache.html">LRU驱动事件（LRU eviction）</a>，<a href="http://www.redis.cn/topics/transactions.html">事务（transactions）</a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html">磁盘持久化（persistence）</a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html">Redis哨兵（Sentinel）</a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html">分区（Cluster）</a>提供高可用性（high availability）。</p><p><strong>学习：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">官网：&lt;https:&#x2F;&#x2F;redis.io&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">中文官网：&lt;http:&#x2F;&#x2F;www.redis.cn&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">视频：B站狂神说</span><br></pre></td></tr></table></figure><h3 id="Windows下载"><a href="#Windows下载" class="headerlink" title="Windows下载"></a>Windows下载</h3><p>下载地址：<a href="https://github.com/redis/redis/releases">https://github.com/redis/redis/releases</a></p><p>解压</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启动服务：</span><br><span class="line">双击redis-server</span><br><span class="line"></span><br><span class="line">打开客户端：</span><br><span class="line">双击redis-cli</span><br></pre></td></tr></table></figure><h3 id="Linux下载"><a href="#Linux下载" class="headerlink" title="Linux下载"></a>Linux下载</h3><p>下载地址：<a href="http://www.redis.cn/">http://www.redis.cn/</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">解压到--&gt;usr/local</span><br><span class="line"></span><br><span class="line">生成程序：</span><br><span class="line">yum install gcc-c++</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">程序路径--&gt;usr/local/bin</span><br><span class="line"></span><br><span class="line">启动服务：</span><br><span class="line">在usr/local/bin下输入：redis-server</span><br><span class="line"></span><br><span class="line">启动客户端：</span><br><span class="line">在usr/local/bin下输入：redis-cli</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>后台启动：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">修改redis.conf:</span><br><span class="line">找到：daemonize:no改为yes</span><br><span class="line"></span><br><span class="line">启动服务：带上redis.conf一起启动</span><br><span class="line">在usr/local/bin下输入：redis-server /路劲/redis.conf</span><br><span class="line"></span><br><span class="line">启动客户端：</span><br><span class="line">在usr/local/bin下输入：redis-cli</span><br></pre></td></tr></table></figure><p><strong>性能测试：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-benchmark -h localhost -p <span class="number">6379</span> -c <span class="number">100</span> -n <span class="number">100000</span></span><br></pre></td></tr></table></figure><p>测试100个线程写入10万数据的时间</p><h3 id="redis常用命令"><a href="#redis常用命令" class="headerlink" title="redis常用命令"></a>redis常用命令</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">生成key:</span><br><span class="line">set name zhangsan</span><br><span class="line"></span><br><span class="line">拿到value：</span><br><span class="line">get name</span><br><span class="line"></span><br><span class="line">切换数据库：</span><br><span class="line">select 数据库号码（默认<span class="number">16</span>个数据库）</span><br><span class="line"></span><br><span class="line">查看所有key:</span><br><span class="line">keys *</span><br><span class="line"></span><br><span class="line">清除当前数据库：</span><br><span class="line">flushdb</span><br><span class="line"></span><br><span class="line">清除全部数据库：</span><br><span class="line">flushall</span><br><span class="line"></span><br><span class="line">查看key是否存在：</span><br><span class="line">exists key名字</span><br><span class="line"></span><br><span class="line">移除key：</span><br><span class="line">move key <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">设置value过期时间：</span><br><span class="line">expire name 时间</span><br><span class="line"></span><br><span class="line">查看剩余过期时间：</span><br><span class="line">ttl name</span><br><span class="line"></span><br><span class="line">查看key类型：</span><br><span class="line">type key</span><br><span class="line">    </span><br><span class="line">value后追加字符串：</span><br><span class="line">    append key value</span><br><span class="line">        </span><br></pre></td></tr></table></figure><h3 id="redis基础知识"><a href="#redis基础知识" class="headerlink" title="redis基础知识"></a>redis基础知识</h3><blockquote><p>Redis是单线程的！</p></blockquote><p>Redis是基于内存操作的，CPU不是Redis的瓶颈。</p><p><strong>速度快的原因：</strong></p><p>官方数据：100000+的QPS。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>核心：redis将所有数据放在内存种，所以单线程去操作效率最高，多线程会引起上下文操作。对于内存系统，没有上下文操作效率是最高的。</span><br></pre></td></tr></table></figure><h2 id="五大数据类型"><a href="#五大数据类型" class="headerlink" title="五大数据类型"></a>五大数据类型</h2><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>最常用的最基本的数据类型，就是常用的K-V键值对。</p><p>Redis的操作都是原子性的，就是一个事务是不可分割的最小单元，事务中的所有操作要么都完成，要么都失败。不用考虑并发问题。适用于自增自减等。</p><p><strong>命令：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">set key value</span><br><span class="line"></span><br><span class="line">get value</span><br><span class="line"></span><br><span class="line">append key value #如果key不存在，相当于set key value</span><br><span class="line"></span><br><span class="line">keys * #查看所有key</span><br><span class="line">        </span><br><span class="line">Strlen    key #获取字符串长度</span><br><span class="line">    </span><br><span class="line">##i++##</span><br><span class="line">    set num <span class="number">0</span>  </span><br><span class="line">    incr num   #num++</span><br><span class="line">    decr num   #num--</span><br><span class="line">    incrby num 10   #num+10</span><br><span class="line">    decrby num 10   #num-10</span><br><span class="line">    </span><br><span class="line">##字符串范围##</span><br><span class="line">    set key <span class="string">&quot;lemon,hello&quot;</span></span><br><span class="line">    </span><br><span class="line">    getrange key 0 3 #截取字符串[0,3]</span><br><span class="line">    </span><br><span class="line">    getrange key 0 -1 #和get key 一样</span><br><span class="line">    </span><br><span class="line">##替换##</span><br><span class="line">    set key <span class="string">&quot;lemon,hello&quot;</span></span><br><span class="line">    </span><br><span class="line">    setrange key 1 xx  #替换指定位置开始的字符串</span><br><span class="line">    </span><br><span class="line">####</span><br><span class="line">    setex  #(set with expire) 设置过期时间</span><br><span class="line">    </span><br><span class="line">    setnx  #(set if not exist)  不存在则设置（在分布式锁中经常使用）</span><br><span class="line">    </span><br><span class="line">##批量操作##</span><br><span class="line">    mset k1 v1 k2 v2</span><br><span class="line">    mget k1 v1 k2 v2</span><br><span class="line">    msetnx k1 v1 k3 v3 #msetnx是一个原子操作，要么全部成功，要么全部失败。</span><br><span class="line">    </span><br><span class="line">##对象##</span><br><span class="line">    set user: 1 &#123;name:zhangsan,age:18&#125; #设置一个user:1对象，值为json字符</span><br><span class="line">        </span><br><span class="line">####</span><br><span class="line">    getset key value #如果不存在，则返回nil</span><br><span class="line">        #如果存在，获取原来的值，并设置新的值</span><br><span class="line">        </span><br></pre></td></tr></table></figure><p><strong>String的使用场景：</strong></p><ul><li>计数器</li><li>统计多单位的数量</li><li>粉丝数</li><li>对象缓存存储</li></ul><h3 id="List（列表）"><a href="#List（列表）" class="headerlink" title="List（列表）"></a>List（列表）</h3><p>列表，按照Sting元素插入顺序排序。可以实现栈、队列功能，可以实现最新消息排行榜功能。</p><p><strong>命令：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#####</span><br><span class="line">lpush key value # 将一个值或者多个值，插入列表头部（左）</span><br><span class="line">    </span><br><span class="line">    lrange key 0 -1   #查看key下所有的value</span><br><span class="line">    </span><br><span class="line">    lrange key 0 1   # 查看0-1区间的value</span><br><span class="line">    </span><br><span class="line">    rpush key value  # 将一个值或者多个值，插入列表尾部（右）</span><br><span class="line">    </span><br><span class="line">    lpop key #移除 key的第一个元素</span><br><span class="line">    rpop key #移除 key的最后一个元素</span><br><span class="line">    </span><br><span class="line">    lindex key 0 #通过下标获得list中的某一个值</span><br><span class="line">    </span><br><span class="line">    llen key #返回列表的长度</span><br><span class="line">    </span><br><span class="line">    ltrim key 1 2 #截取[1,2]区间的值留下</span><br><span class="line">    </span><br><span class="line">    rpoplpush key otherkey #移除列表的最后一个元素，移动到新的列表中</span><br><span class="line">    </span><br><span class="line">    lset list 0 item #如果存在，更新当前下标的值，不存在就报错</span><br><span class="line">    </span><br><span class="line">    linsert list before/after value value #将一个值插入到列表中已存在的某个值前后</span><br><span class="line">   </span><br></pre></td></tr></table></figure><p><strong>总结：</strong></p><ul><li>list实际上是一个链表，左右都可以插入。</li><li>如果key不存在，创建新的链表。</li><li>如果key存在，新增内容。</li><li>如果移除了所有值，空链表，也代表不存在！</li><li>在两边插入或者改动值，效率最高。</li></ul><p><strong>使用场景：</strong></p><ul><li>消息队列</li><li>栈</li></ul><h3 id="set（集合）"><a href="#set（集合）" class="headerlink" title="set（集合）"></a>set（集合）</h3><p>String类型组成的无序集合，通过hash表实现，不允许重复。可以实现数据去重、求并集交集等。</p><p><strong>命令：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#############</span><br><span class="line">    sadd key value    #添加值</span><br><span class="line">    smembers key      #查看指定set的所有值</span><br><span class="line">    </span><br><span class="line">    sismember key value  #判断某个值是否在set中</span><br><span class="line">    scard key      #获取set集合中的内容元素个数</span><br><span class="line">    </span><br><span class="line">    srem key value   #移除set中的指定元素</span><br><span class="line">    </span><br><span class="line">    srandmember myset   #随机获取set中的一个元素</span><br><span class="line">    </span><br><span class="line">    spop ke   #随机移除一个元素</span><br><span class="line">    </span><br><span class="line">    smove myset myset2 value#将一个指定的值移动到另一个set集合</span><br><span class="line">    </span><br><span class="line">################################</span><br><span class="line">    查看两个set的交集、并集、差集（不同的）</span><br><span class="line">    sdiff key1 key2    #差集</span><br><span class="line">    sinter key1 key2   #交集</span><br><span class="line">    sunion key1 key2   #并集</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>场景：</p><ul><li>微博粉丝、共同关注</li><li>实现数据去重、求并集交集</li></ul><h3 id="Hash（哈希）"><a href="#Hash（哈希）" class="headerlink" title="Hash（哈希）"></a>Hash（哈希）</h3><p>Sring元素组成的字典，适合存储对象。</p><p><strong>命令：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">###################</span><br><span class="line">    hset myhash field helo  #set一个具体的 key-value</span><br><span class="line">    </span><br><span class="line">    hget myhash field #获取一个字段值</span><br><span class="line">    </span><br><span class="line">    hmset myhash2 ke1 v1 ke2 v2 #set多个键值对</span><br><span class="line">    </span><br><span class="line">    hmget myhash2 ke1  ke2   # 获取多个字段值</span><br><span class="line">    </span><br><span class="line">    hgetall key   #获取所有的键值对</span><br><span class="line">    </span><br><span class="line">    hdel myhash field #删除hash指定key字段</span><br><span class="line">    </span><br><span class="line">    hlen key   #获取hash表的字段数量</span><br><span class="line">    </span><br><span class="line">    hkeys key #获取所有的字段</span><br><span class="line">    </span><br><span class="line">    hvals key  #获取所有的value</span><br><span class="line">    </span><br><span class="line">    hexists key # 判断是否存在</span><br><span class="line">    </span><br><span class="line">###################</span><br><span class="line">    incr decr incrby decrby hsetnx</span><br><span class="line">    </span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><strong>场景：</strong></p><h3 id="Zset（有序集合）"><a href="#Zset（有序集合）" class="headerlink" title="Zset（有序集合）"></a>Zset（有序集合）</h3><p>有序唯一，通过分数将集合中的成员进行从小到大排序。可以实现分数排行榜等场景。</p><p>在set的基础上，加了一个值。</p><p>set k1 v1</p><p>zset k1 score v1</p><p><strong>命令：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">###############</span><br><span class="line">    </span><br><span class="line">zadd myzset <span class="number">1</span> one</span><br><span class="line">    </span><br><span class="line">    zrange myzset <span class="number">0</span> -<span class="number">1</span></span><br><span class="line">    </span><br><span class="line">###############</span><br><span class="line">    排序</span><br><span class="line">    zrangebyscore key -inf +inf   #按照value升序排列</span><br><span class="line">    </span><br><span class="line">    zrangebyscore key -inf +inf withscore   #升序并将value也输出出来</span><br><span class="line">    </span><br><span class="line">    zrevrangebyscore key 0 -1 #按照value降序排列</span><br><span class="line">    </span><br><span class="line">    zrange key 0 -1 # 查看所有</span><br><span class="line">    </span><br><span class="line">    zrem key value  # 移除有序集合中的指定元素</span><br><span class="line">    </span><br><span class="line">    zcard key  #获取有序集合中的个数</span><br><span class="line">    </span><br><span class="line">    zcount key 1 2 #获取指定区间的成员个数</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>应用场景：</p><ul><li>分数排行榜</li></ul><h2 id="Redis的基本事务操作"><a href="#Redis的基本事务操作" class="headerlink" title="Redis的基本事务操作"></a>Redis的基本事务操作</h2><p>redis的单条命令都具有原子性，但是事务不保证原子性。</p><p>redis事务没有隔离级别的概念。</p><p>所有的命令在事务中，并没有直接被执行，只有发起执行命令的时候才会执行！Exec</p><p>redis的事务：</p><ul><li>开启事务（multi）</li><li>命令入队（…..）</li><li>执行事务（exec）</li></ul><p><strong>命令：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">multi</span><br><span class="line"></span><br><span class="line">#命令入队</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">#执行事务</span><br><span class="line">exec</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>异常有两种：</p><blockquote><p>编译型异常，错误命令会报错，执行事务整个事务也会错误。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">###############</span><br><span class="line">    multi</span><br><span class="line">    </span><br><span class="line">    错误命令</span><br><span class="line">    </span><br><span class="line">    正确命令</span><br><span class="line">    </span><br><span class="line">    exec --------------整个事务异常</span><br><span class="line">    </span><br><span class="line">    </span><br></pre></td></tr></table></figure><blockquote><p>运行时异常，输入命令时正常，执行事务时，正确命令正常执行，错误命令抛出异常。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">###################</span><br><span class="line">    multi</span><br><span class="line">    </span><br><span class="line">    正确的命令（但是运行会报错）</span><br><span class="line">    </span><br><span class="line">    正确命令</span><br><span class="line">    </span><br><span class="line">    exec---------事务正常执行，错误的地方抛出异常，正确的正常执行。</span><br></pre></td></tr></table></figure><blockquote><p>Redis监视测试  —– watch（相当于加锁）</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">正常执行#########</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; set out <span class="number">0</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; watch money  #监视money</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; decrby money <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; incrby out <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; exec</span><br><span class="line"><span class="number">1</span>) (integer) <span class="number">80</span></span><br><span class="line">2) (integer) 20           #正常执行</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure><p> <strong>测试多线程修改值，使用watch可以当作redis的乐观锁操作！</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; watch money</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; decrby money <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; incrby out <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; exec  #在执行事务之前另一个线程修改了money的值，被watch观察到，导致失败。</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/07/16/cyxT2Jq4h7PkOAb.png" alt="image-20200716093400841"></p><h3 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h3><p>Redis官方推荐的Java连接开发工具，使用Java操作redis中间件。</p><p>1.导入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.72<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.编码测试</p><p><img src="https://i.loli.net/2020/07/16/ezUtCrd9nwFI1hT.png" alt="image-20200716095433135"></p><h3 id="Spring-Boot-整合Redis"><a href="#Spring-Boot-整合Redis" class="headerlink" title="Spring Boot 整合Redis"></a>Spring Boot 整合Redis</h3><p>springboot操作数据：spring-data jpa jdbc mongodb redis</p><p>Spring Data 也是和spirng boot齐名的项目</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(RedisOperations.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(RedisProperties.class)</span></span><br><span class="line"><span class="meta">@Import(&#123; LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;redisTemplate&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">RedisTemplate&lt;Object, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"><span class="keyword">return</span> template;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringRedisTemplate <span class="title">stringRedisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">StringRedisTemplate template = <span class="keyword">new</span> StringRedisTemplate();</span><br><span class="line">template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"><span class="keyword">return</span> template;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.导入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.配置连接</p><p><strong>如何了解怎么去配置一个新的东西？</strong></p><p>==看源码==</p><p>比如redis:</p><ul><li><p>先去依赖中找到spring-boot-autoconfigure–》spring.factories</p></li><li><p>然后搜索redis,进入RedisAutoConfiguration类</p></li><li><p>可以看到@EnableConfigurationProperties({RedisProperties.class})注解</p></li><li><p>进入RedisProperties.class,可以看到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ConfigurationProperties(</span><br><span class="line">    prefix &#x3D; &quot;spring.redis&quot;</span><br><span class="line">)</span><br><span class="line">以及下面的配置项</span><br></pre></td></tr></table></figure></li><li><p>然后在application.properties文件中，配置，前缀为spring.redis+配置项。</p></li></ul><p>配置：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">127.0.0.1</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br></pre></td></tr></table></figure><p>3.测试</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>多线程产生的线程安全和性能问题</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B9%9D%EF%BC%89--%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BA%A7%E7%94%9F%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E5%92%8C%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B9%9D%EF%BC%89--%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BA%A7%E7%94%9F%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E5%92%8C%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（九）–多线程带来的线程安全问题和性能问题详解"><a href="#Java并发（九）–多线程带来的线程安全问题和性能问题详解" class="headerlink" title="Java并发（九）–多线程带来的线程安全问题和性能问题详解"></a>Java并发（九）–多线程带来的线程安全问题和性能问题详解</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-线程安全问题"><a href="#1-线程安全问题" class="headerlink" title="1. 线程安全问题"></a>1. 线程安全问题</h3><p>​        不管业务中遇到怎样的多个线程访问某对象或某方法的情况，而在编程这个业务逻辑的时候，都不需要额外做任何额外的处理，程序也可以运行正常，就可以称为线程安全。</p><h3 id="2-产生线程安全问题的原因"><a href="#2-产生线程安全问题的原因" class="headerlink" title="2. 产生线程安全问题的原因"></a>2. 产生线程安全问题的原因</h3><p>多个线程同时访问共享资源。</p><p>主要两个问题：</p><pre><code> 1. 数据争用：数据由于同时读写，会造成数据错误。 2. 竞争条件：即使没有同时读写，由于顺序原因也有可能造成错误。</code></pre><h3 id="3-线程不安全的三种现象"><a href="#3-线程不安全的三种现象" class="headerlink" title="3. 线程不安全的三种现象"></a>3. 线程不安全的三种现象</h3><p>线程不安全的三种现象：</p><ul><li>运行结果错误，如a++在多线程情况下与期望结果不一致。</li><li>活跃性问题：死锁、活锁、饥饿。</li><li>对象发布和初始化的时候的安全问题。</li></ul><h4 id="3-1-运行结果错误："><a href="#3-1-运行结果错误：" class="headerlink" title="3.1 运行结果错误："></a>3.1 运行结果错误：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/7 15:19</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoTreadMutiTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        TwoTreadMutiTest test = <span class="keyword">new</span> TwoTreadMutiTest();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(test);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(test);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果不是预期的2000，而且每次运行的结果不一致，说明发生了线程安全问题，导致了运行结果错误的问题。</p><p>i++：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586244224080.png" alt="1586244224080"></p><p>实际运行过程中，i++过程中，会发生上图的过程。</p><h4 id="3-2-活跃性问题"><a href="#3-2-活跃性问题" class="headerlink" title="3.2 活跃性问题"></a>3.2 活跃性问题</h4><p>死锁例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lemon.practice.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiedLockDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String A = <span class="string">&quot;A&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String B = <span class="string">&quot;B&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        DiedLockDemo.diedLockTest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">diedLockTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (A)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.currentThread().sleep(<span class="number">2000</span>);<span class="comment">//等待2000ms等线程T2锁定B</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">synchronized</span> (B)&#123;</span><br><span class="line">                        System.out.println(<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (B) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.currentThread().sleep(<span class="number">2000</span>);<span class="comment">//等待2000ms等线程T1锁定A</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">synchronized</span> (A)&#123;</span><br><span class="line">                        System.out.println(<span class="number">2</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-3对象的发布和逸出"><a href="#3-3对象的发布和逸出" class="headerlink" title="3.3对象的发布和逸出"></a>3.3对象的发布和逸出</h4><p>对象发布是指使对象能够被其作用域之外的线程访问。</p><p>发布逸出：将一个对象的发布出现在我们不满意的结果或者对象发布本身不是我们期望的时候。</p><p>发布形式：</p><ul><li>将对象引用存储到public变量中。</li><li>在非private方法中返回一个对象。</li><li>创建内部类，使得当前对象能够被这个内部类使用，</li><li>通过方法调用将对象传递给外部方法。</li></ul><p>逸出情况：</p><ol><li>方法返回一个private对象。</li><li>还未完成初始化就把对象提供给了外界。<ul><li>在构造函数未初始化完成就进行this赋值</li><li>注册监听事件</li><li>构造函数中运行线程。</li></ul></li></ol><p>避免逸出方法：</p><ol><li>返回副本。</li><li>工厂模式。</li></ol><h3 id="4-各种需要考虑线程安全的情况"><a href="#4-各种需要考虑线程安全的情况" class="headerlink" title="4. 各种需要考虑线程安全的情况"></a>4. 各种需要考虑线程安全的情况</h3><ol><li>访问共享的变量和资源，会有并发风险，比如对象的属性、静态变量、共享缓存和数据库等。</li><li>所以依赖时序的操作，即使每一步都是线程安全的。<ul><li>read-and-write操作：一个线程读取了一个共享变量，并在此基础上更新该数据。比如index++。</li><li>check-then-act操作：一个线程读取了一个共享变量，并在此基础上决定其下一个的操作。</li></ul></li><li>不同的数据之间存在捆绑关系：比如ip和端口</li><li>线程不安全的类。比如hashmap、Arraylist</li></ol><h3 id="5-性能问题以及体现"><a href="#5-性能问题以及体现" class="headerlink" title="5. 性能问题以及体现"></a>5. 性能问题以及体现</h3><p>体现：</p><ul><li>服务器响应慢，吞吐量低，资源消耗过高。</li></ul><h3 id="6-性能问题产生原因"><a href="#6-性能问题产生原因" class="headerlink" title="6. 性能问题产生原因"></a>6. 性能问题产生原因</h3><ol><li><p>调度：上下文切换</p><p>​    上下文：看着连续运行的线程，实际上是以断断续续运行的方式使其任务进展的。而在切出和切入的时候操作系统需要保存和恢复相应线程的进度信息，即切入和切出那一刻相应线程执行到了什么程度了。这种进度信息叫做上下文。一般包括通用寄存器的内容和程序计数器的内容。</p><p>​    上下文切换：当一个线程由于其时间片用完或者自身的原因被迫或者主动暂停其运行时，另外一个线程可以被操作系统选中占用处理器开始或者继续其运行，这种过程被称为上下文切换。</p><p>上下文切换种类：</p><ul><li>自发性上下文切换<ul><li>Thread.sleep()</li><li>Object.wait()</li><li>Thread.yield()</li><li>Thread.join</li><li>LockSupport.parl()</li><li>线程发起I/O操作或者等待锁（会密集的发生上下文切换）</li></ul></li><li>非自发性上下文切换<ul><li>线程调度器的原因（如时间片用完或者线程优先级有关）</li></ul></li></ul></li><li><p>协作：内存同步</p><p>主要涉及Java内存模型。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8.三层架构优化（JDBC优化）.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/8.%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%BC%98%E5%8C%96%EF%BC%88JDBC%E4%BC%98%E5%8C%96%EF%BC%89/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/8.%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%BC%98%E5%8C%96%EF%BC%88JDBC%E4%BC%98%E5%8C%96%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="三层架构优化（JDBC优化）"><a href="#三层架构优化（JDBC优化）" class="headerlink" title="三层架构优化（JDBC优化）"></a>三层架构优化（JDBC优化）</h2><h3 id="1-三层优化"><a href="#1-三层优化" class="headerlink" title="1.三层优化"></a>1.三层优化</h3><p>1.加入接口<br>    建议面向接口开发：先接口-再实现类<br>    –service、dao加入接口<br>    –接口与实现类的命名规范<br>        接口：interface，    起名   I实体类Service        IStudentService<br>                        IStudentDao<br>        实现类：implements    起名   实体类ServiceImpl        StudentServiceImpl<br>                        StudentDaoImpl<br>        接口：    I实体类层所在包名    IStudentService、IStudentDao<br>            接口所在的包：  xxx.service        xx.dao</p><pre><code>    实现类：     实体类层所在包名Impl    StudentServiceImpl、StudentDaoImpl        实现类所在的包：xxx.service.impl        xx.dao.impl以后使用接口/实现类时，推荐写法：接口 x = new 实现类();IStudentDao studentDao = new StudentDaoImpl();</code></pre><p>2.DBUtil 通用的数据库帮助类，可以简化Dao层的代码量</p><p>帮助类 一般建议写在  xxx.util包<br>A<br>{</p><pre><code>a()&#123;    B.connection&#125;</code></pre><p>}</p><p>B<br>{<br>    static Connection connection =..<br>    b{    </p><p>​    }</p><p>}</p><p>方法重构：  将多个方法 的共同代码 提炼出来，单独写在一个方法中，然后引入该方法即可<br>a()<br>{<br>    ..<br>    c();<br>    ..<br>}</p><p>b()<br>{<br>    ..<br>    c();<br>    ..<br>}</p><p>c()<br>{<br>        [..<br>    ..<br>    …<br>    ..]<br>}</p><p>Web调试：<br>与java代码的调试 区别：启动方式不同</p><p>index.jsp -&gt;index_jsp.java -&gt;index_jsp.class </p><p>jsp-&gt;java-&gt;class<br>jsp翻译成的Java 以及编译后的class文件 存在于tomcat中的work目录中</p><h3 id="2-demo"><a href="#2-demo" class="headerlink" title="2.demo"></a>2.demo</h3><p>代码：</p><p>IStudentDao ：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteStudent</span><span class="params">(<span class="keyword">int</span> sno)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断学生是否存在</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">boolean</span> <span class="title">isExist</span><span class="params">(<span class="keyword">int</span> sno)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据学号修改学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateStudentBySno</span><span class="params">(<span class="keyword">int</span> sno ,Student student)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据学号查找学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">queryStudentBySno</span><span class="params">(<span class="keyword">int</span> sno)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查找所有学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList <span class="title">queryAllStudent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>IStudentDaoImpl:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IStudentDaoImpl</span> <span class="keyword">implements</span> <span class="title">IStudentDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String USERNAME = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PASSWORD = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line">    PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into student values(?,?,?,?)&quot;</span>;</span><br><span class="line">        Object[] params = &#123;student.getSno(), student.getSname(), student.getSage(), student.getSaddr()&#125;;</span><br><span class="line">        <span class="keyword">return</span>  JDBCUtil.executeUpdate(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteStudent</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;delete from student where sno = ?&quot;</span>;</span><br><span class="line">        Object[] params = &#123;sno&#125;;</span><br><span class="line">        <span class="keyword">return</span>  JDBCUtil.executeUpdate(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断学生是否存在</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">boolean</span> <span class="title">isExist</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryStudentBySno(sno)==<span class="keyword">null</span>? <span class="keyword">false</span> : <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据学号修改学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateStudentBySno</span><span class="params">(<span class="keyword">int</span> sno ,Student student)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;update student set sname = ?, sage = ?, saddr = ? where sno = ?&quot;</span>;</span><br><span class="line">        Object[] params = &#123;student.getSname(), student.getSage(), student.getSaddr(), sno&#125;;</span><br><span class="line">        <span class="keyword">return</span>  JDBCUtil.executeUpdate(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据学号查找学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">queryStudentBySno</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        Student student = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">&quot;select * from student where sno = ?&quot;</span>;</span><br><span class="line">        Object[] params = &#123;sno&#125;;</span><br><span class="line">        rs = JDBCUtil.executeQuery(sql,params);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs.next())&#123;</span><br><span class="line">                <span class="keyword">int</span> no = rs.getInt(<span class="string">&quot;sno&quot;</span>);</span><br><span class="line">                String sname = rs.getString(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">                <span class="keyword">int</span> sage = rs.getInt(<span class="string">&quot;sage&quot;</span>);</span><br><span class="line">                String saddr = rs.getString(<span class="string">&quot;saddr&quot;</span>);</span><br><span class="line">                student = <span class="keyword">new</span> Student(sno, sname, sage, saddr);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>  student;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.closeAll(rs, pstmt, JDBCUtil.connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查找所有学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Student&gt; <span class="title">queryAllStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Student&gt; studentList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        rs = JDBCUtil.executeQuery(sql, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                <span class="keyword">int</span> sno = rs.getInt(<span class="string">&quot;sno&quot;</span>);</span><br><span class="line">                String sname = rs.getString(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">                <span class="keyword">int</span> sage = rs.getInt(<span class="string">&quot;sage&quot;</span>);</span><br><span class="line">                String saddr = rs.getString(<span class="string">&quot;saddr&quot;</span>);</span><br><span class="line">                Student student = <span class="keyword">new</span> Student(sno, sname, sage, saddr);</span><br><span class="line">                studentList.add(student);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>  studentList;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           JDBCUtil.closeAll(rs, pstmt, JDBCUtil.connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>IStudentService:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateStudentBySno</span><span class="params">(<span class="keyword">int</span> sno, Student student)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteStudent</span><span class="params">(<span class="keyword">int</span> sno)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">queryStudentBySno</span><span class="params">(<span class="keyword">int</span> sno)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList <span class="title">queryAllStudent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>IStudentServiceImpl：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IStudentServiceImpl</span> <span class="keyword">implements</span> <span class="title">IStudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    IStudentDao iStudentDao = <span class="keyword">new</span> IStudentDaoImpl();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!iStudentDao.isExist(student.getSno()))&#123;</span><br><span class="line">            iStudentDao.addStudent(student);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateStudentBySno</span><span class="params">(<span class="keyword">int</span> sno, Student student)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (iStudentDao.isExist(sno))&#123;</span><br><span class="line">            <span class="keyword">return</span> iStudentDao.updateStudentBySno(sno,student);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteStudent</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (iStudentDao.isExist(sno))&#123;</span><br><span class="line">            <span class="keyword">return</span> iStudentDao.deleteStudent(sno);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">queryStudentBySno</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> iStudentDao.queryStudentBySno(sno);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList <span class="title">queryAllStudent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> iStudentDao.queryAllStudent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>JDBCUtil:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USERNAME = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PASSWORD = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通用的增删改</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">executeUpdate</span><span class="params">(String sql, Object[] params)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pstmt = getPstmt(sql, params);</span><br><span class="line">            <span class="keyword">int</span> count = JDBCUtil.pstmt.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            closeAll(<span class="keyword">null</span>, pstmt, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//通用的查</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ResultSet <span class="title">executeQuery</span><span class="params">(String sql, Object[] params)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pstmt = getPstmt(sql, params);</span><br><span class="line">            rs = JDBCUtil.pstmt.executeQuery();</span><br><span class="line">            <span class="keyword">return</span> rs;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeAll</span><span class="params">(ResultSet rs, PreparedStatement pstmt, Connection connection)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="keyword">null</span>) rs.close();</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取PreparedStatement对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PreparedStatement <span class="title">getPstmt</span><span class="params">(String sql, Object[] params)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException </span>&#123;</span><br><span class="line">        pstmt = getConnection().prepareStatement(sql);</span><br><span class="line">        <span class="keyword">if</span> (params != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                pstmt.setObject(i+<span class="number">1</span>, params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  pstmt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-查找错误问题的方法和过程"><a href="#3-查找错误问题的方法和过程" class="headerlink" title="3.查找错误问题的方法和过程:"></a>3.查找错误问题的方法和过程:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.首先在报错中找到自己写的类或者方法中显示的错误</span><br><span class="line">2.如果是index_jsp._jspSerVice(index_jsp.java :162)这种错误，说明index.jsp有问题，但是index.jsp又没有162行，仔细看.java，说明是翻译后的Java文件，我们去index.jsp翻译后的index_jsp.Java文件找到162行，查看错误就行。</span><br><span class="line"></span><br><span class="line">JSP文件的翻译过程：</span><br><span class="line">index.jsp--&gt;index_jsp.java--&gt;index_jsp.class</span><br><span class="line"></span><br><span class="line">3.然后通过Debug打断点判断问题。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.三层架构与添加学生demo.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/7.%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%B7%BB%E5%8A%A0%E5%AD%A6%E7%94%9Fdemo/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/7.%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%B7%BB%E5%8A%A0%E5%AD%A6%E7%94%9Fdemo/</url>
      
        <content type="html"><![CDATA[<h2 id="三层架构与添加学生demo"><a href="#三层架构与添加学生demo" class="headerlink" title="三层架构与添加学生demo"></a>三层架构与添加学生demo</h2><h3 id="1-介绍："><a href="#1-介绍：" class="headerlink" title="1.介绍："></a>1.介绍：</h3><p>三层架构：</p><p>​    与MVC设计模式的目标一致：都是为了解耦合、提高代码复用；</p><p>​    区别：二者对项目理解的角度不同。</p><p>三层组成:</p><p>表示层（USL，User Show Layer ;   视图层）</p><p>​    -前台：对应MVC中的View，用于与用户交互、界面的显示。</p><p>​        常用技术: jsp、js、html、css</p><p>​        代码位置: WebContent</p><p>​    -后台：对应MVC中的Controller，用于控制跳转、调用业务逻辑层</p><p>​        Servlet（SpringMVC）</p><p>​        代码位置: xxx.servlet包中</p><p>业务逻辑层（BLL，Business Logic Layer  ;  Service层）</p><p>​    -接受表示层的请求调用</p><p>​    -组装数据库访问层，逻辑性的操作（增删改查，比如增之前先判断先查询）</p><p>​    位于：xxx.service包</p><p>数据访问层（DAL， Data Access Layer  ;  Dao层）</p><p>​    -直接访问数据库的操作，原子性的操作（增删改查）</p><p>​    位于：xxx.dao包</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589435338401.png" alt="1589435338401"></p><p>三层的关系：</p><p>​    上层将请求传递给下层，下层处理后返回给上层。</p><p>Servlet：</p><p>​    一个Servlet对应一个功能，因此，如果有增删改查四个功能，则需要创建4个Servlet。</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589435954505.png" alt="1589435954505"></p><h3 id="2-demo"><a href="#2-demo" class="headerlink" title="2.demo"></a>2.demo</h3><p>往student表中添加学生</p><p>逻辑图：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589436087961.png" alt="1589436087961"></p><p>代码：</p><p>项目结构：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589436180248.png" alt="1589436180248"></p><p>student.jsp:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;AddStudentServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        学号：&lt;input type=&quot;text&quot; name=&quot;sno&quot;&gt;&lt;/br&gt;</span><br><span class="line">        姓名：&lt;input type=&quot;text&quot; name=&quot;sname&quot;&gt;&lt;/br&gt;</span><br><span class="line">        年龄：&lt;input type=&quot;text&quot; name=&quot;sage&quot;&gt;&lt;/br&gt;</span><br><span class="line">        地址：&lt;input type=&quot;text&quot; name=&quot;saddr&quot;&gt;&lt;/br&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;添加&quot;&gt;&lt;/br&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;DeleteStudentServlet&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">        学号：&lt;input type=&quot;text&quot; name=&quot;sno&quot;&gt;&lt;/br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;删除&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;QueryAllStudentServlet&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;查询所有学生&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>studentShow.jsp:</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;entity.Student&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.omg.CORBA.Request&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: dell</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">5</span>/<span class="number">14</span></span><br><span class="line">  Time: <span class="number">15</span>:<span class="number">28</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%--&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;--%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;table&quot;</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;学号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;地址&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            ArrayList&lt;Student&gt; studentList = (ArrayList&lt;Student&gt;) request.getAttribute(<span class="string">&quot;studentList&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Student student : studentList)&#123;</span><br><span class="line">        %&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSno() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSname() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSage() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSaddr() %&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            &#125;</span><br><span class="line">        %&gt;</span><br><span class="line">        &lt;%--&lt;c:forEach items=<span class="string">&quot;$&#123;studentList&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;student&quot;</span>&gt;--%&gt;</span><br><span class="line">            &lt;%--&lt;tr&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.sno&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.sname&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.sage&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.saddr&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">            &lt;%--&lt;/tr&gt;--%&gt;</span><br><span class="line">        &lt;%--&lt;/c:forEach&gt;--%&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>AddStudentServlet:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;AddStudentServlet&quot;, urlPatterns = &quot;/AddStudentServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddStudentServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> sno = Integer.parseInt(request.getParameter(<span class="string">&quot;sno&quot;</span>));</span><br><span class="line">        String sname = request.getParameter(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> sage = Integer.parseInt(request.getParameter(<span class="string">&quot;sage&quot;</span>));</span><br><span class="line">        String saddr = request.getParameter(<span class="string">&quot;saddr&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Student student = <span class="keyword">new</span> Student(sno, sname, sage, saddr);</span><br><span class="line"></span><br><span class="line">        StudentService studentService = <span class="keyword">new</span> StudentService();</span><br><span class="line">        <span class="keyword">boolean</span> result = studentService.addStudent(student);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        <span class="keyword">if</span> (result)&#123;</span><br><span class="line">            out.println(<span class="string">&quot;添加学生成功&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            out.println(<span class="string">&quot;添加学生失败,该学生已存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>QueryAllStudentServlet:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;QueryAllStudentServlet&quot; ,urlPatterns = &quot;/QueryAllStudentServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryAllStudentServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        StudentService studentService  = <span class="keyword">new</span> StudentService();</span><br><span class="line">        ArrayList studentList = studentService.queryAllStudent();</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        <span class="keyword">if</span> (studentList != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//out.println(&quot;查询成功！&quot;);</span></span><br><span class="line"><span class="comment">//            request.setAttribute(&quot;sno&quot;,student.getSno());</span></span><br><span class="line"><span class="comment">//            request.setAttribute(&quot;sname&quot;,student.getSname());</span></span><br><span class="line"><span class="comment">//            request.setAttribute(&quot;sage&quot;,student.getSage());</span></span><br><span class="line"><span class="comment">//            request.setAttribute(&quot;saddr&quot;,student.getSaddr());</span></span><br><span class="line">            request.setAttribute(<span class="string">&quot;studentList&quot;</span>, studentList);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;studentShow.jsp&quot;</span>).forward(request,response);</span><br><span class="line">            <span class="comment">//response.sendRedirect(&quot;studentShow.jsp&quot;);</span></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            out.println(<span class="string">&quot;该表没有学生！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Student:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sno;</span><br><span class="line">    <span class="keyword">private</span> String sname;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sage;</span><br><span class="line">    <span class="keyword">private</span> String saddr;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String sname, <span class="keyword">int</span> sage, String saddr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sname = sname;</span><br><span class="line">        <span class="keyword">this</span>.sage = sage;</span><br><span class="line">        <span class="keyword">this</span>.saddr = saddr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> sno, String sname, <span class="keyword">int</span> sage, String saddr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sno = sno;</span><br><span class="line">        <span class="keyword">this</span>.sname = sname;</span><br><span class="line">        <span class="keyword">this</span>.sage = sage;</span><br><span class="line">        <span class="keyword">this</span>.saddr = saddr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSno</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sno;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSno</span><span class="params">(<span class="keyword">int</span> sno)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sno = sno;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSname</span><span class="params">(String sname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sname = sname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSage</span><span class="params">(<span class="keyword">int</span> sage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sage = sage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSaddr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> saddr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSaddr</span><span class="params">(String saddr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.saddr = saddr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>StudentDao:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String USERNAME = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PASSWORD = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;insert into student values(?,?,?,?)&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            pstmt.setInt(<span class="number">1</span>,student.getSno());</span><br><span class="line">            pstmt.setString(<span class="number">2</span>,student.getSname());</span><br><span class="line">            pstmt.setInt(<span class="number">3</span>,student.getSage());</span><br><span class="line">            pstmt.setString(<span class="number">4</span>,student.getSaddr());</span><br><span class="line">            <span class="keyword">int</span> count = pstmt.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteStudent</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;delete from student where sno = ?&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            pstmt.setInt(<span class="number">1</span>,sno);</span><br><span class="line">            <span class="keyword">int</span> count = pstmt.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断学生是否存在</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">boolean</span> <span class="title">isExist</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryStudentBySno(sno)==<span class="keyword">null</span>? <span class="keyword">false</span> : <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据学号查找学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">queryStudentBySno</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        Student student = <span class="keyword">null</span>;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;select * from student where sno = ?&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            pstmt.setInt(<span class="number">1</span>,sno);</span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (rs.next())&#123;</span><br><span class="line">                <span class="keyword">int</span> no = rs.getInt(<span class="string">&quot;sno&quot;</span>);</span><br><span class="line">                String sname = rs.getString(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">                <span class="keyword">int</span> sage = rs.getInt(<span class="string">&quot;sage&quot;</span>);</span><br><span class="line">                String saddr = rs.getString(<span class="string">&quot;saddr&quot;</span>);</span><br><span class="line">                student = <span class="keyword">new</span> Student(sno,sname,sage,saddr);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> student;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (rs != <span class="keyword">null</span>) rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查找所有学生</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList <span class="title">queryAllStudent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Student student = <span class="keyword">null</span>;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line"></span><br><span class="line">            ArrayList studentList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                <span class="keyword">int</span> sno = rs.getInt(<span class="string">&quot;sno&quot;</span>);</span><br><span class="line">                String sname = rs.getString(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">                <span class="keyword">int</span> sage = rs.getInt(<span class="string">&quot;sage&quot;</span>);</span><br><span class="line">                String saddr = rs.getString(<span class="string">&quot;saddr&quot;</span>);</span><br><span class="line"></span><br><span class="line">                student = <span class="keyword">new</span> Student(sno, sname, sage, saddr);</span><br><span class="line">                studentList.add(student);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> studentList;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (rs != <span class="keyword">null</span>) rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>StudentService:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    StudentDao studentDao = <span class="keyword">new</span> StudentDao();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!studentDao.isExist(student.getSno()))&#123;</span><br><span class="line">            studentDao.addStudent(student);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteStudent</span><span class="params">(<span class="keyword">int</span> sno)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (studentDao.isExist(sno))&#123;</span><br><span class="line">            <span class="keyword">return</span> studentDao.deleteStudent(sno);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList <span class="title">queryAllStudent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentDao.queryAllStudent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>乱码处理：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    </span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9.分页.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/9.%E5%88%86%E9%A1%B5/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/9.%E5%88%86%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><h3 id="1-分页介绍"><a href="#1-分页介绍" class="headerlink" title="1.分页介绍"></a>1.分页介绍</h3><p>要实现分页，必须知道  某一页的 数据 从哪里开始 到哪里结束</p><p>页面大小：每页显示的数据量</p><p>假设每页显示10条数据</p><p>mysql分页：<br>mysql:从0开始计数<br>0        0        9<br>1        10        19<br>2        20        29<br>n        n*10          (n+1)*10-1</p><p>结论：<br>分页：<br>    第n页的数据：  第(n-1)<em>10+1条  – 第n</em>10条</p><h4 id="１-１MYSQL实现分页的sql："><a href="#１-１MYSQL实现分页的sql：" class="headerlink" title="１.１MYSQL实现分页的sql："></a>１.１MYSQL实现分页的sql：</h4><p>limit  开始,多少条<br>第0页<br>select * from student limit 0,10 ;<br>第1页<br>select * from student limit 10,10 ;<br>第2页<br>select * from student limit  20,10 ;<br>第n页<br>select * from student limit n*10,10</p><p>mysql的分页语句：</p><p>select * from student limit 页数*页面大小,页面大小</p><h4 id="1-2-oracle分页："><a href="#1-2-oracle分页：" class="headerlink" title="1.2.oracle分页："></a>1.2.oracle分页：</h4><p>sqlserver/oracle:从1开始计数<br>第n页        开始        结束<br>1        1        10<br>2        11        20<br>3        21        30<br>n        (n-1)<em>10+1    n</em>10</p><p>select *from student  where sno &gt;=(n-1)<em>10+1 and sno &lt;=n</em>10 ;  –此种写法的前提：必须是Id连续 ，否则 无法满足每页显示10条数据</p><p>select rownum,t.*from student t where rownum &gt;=(n-1)*10+1 and rownum &lt;=n*10  order by sno;<br>–1.如果根据sno排序则rownum会混乱（解决方案：分开使用-&gt;先只排序，再只查询rownum） 2.rownum不能查询&gt;的数据 </p><p>select s.* from student s order by sno asc;</p><p>select rownum, t.* from<br>(select s.* from student s order by sno asc) t<br>where rownum &gt;=(n-1)<em>10+1 and rownum &lt;=n</em>10 ; ;</p><p>//ORACLE\sqlserver都是从1开始计数：  (n-1)<em>10+1    —  n</em>10<br>oracle的分页查询语句：<br>select <em>from<br>(<br>    select rownum r, t.</em> from<br>    (select s.* from student s order by sno asc) t         10000<br>)<br>where r&gt;=(n-1)<em>10+1 and &lt;=n</em>10  ;                10</p><p>优化：</p><p>select <em>from<br>(<br>    select rownum r, t.</em> from<br>    (select s.* from student s order by sno asc) t<br>    where rownum&lt;=n*10<br>)<br>where r&gt;=(n-1)*10+1  ;    </p><p>select <em>from<br>(<br>    select rownum r, t.</em> from<br>    (select s.* from student s order by sno asc) t<br>    where  rownum&lt;=页数*页面大小<br>)<br>where r&gt;=(页数-1)*页面大小+1  ;    </p><h4 id="1-1-3-SQLServer分页：-3种分页sql"><a href="#1-1-3-SQLServer分页：-3种分页sql" class="headerlink" title="1.1.3 SQLServer分页：  3种分页sql"></a>1.1.3 SQLServer分页：  3种分页sql</h4><p>row_number()    over(字段) ;</p><p>sqlserver2003:top  –此种分页SQL存在弊端（如果id值不连续，则不能保证每页数据量相等）<br>select top 页面大小 * from student where id not in<br>( select top (页数-1)*页面大小 id from student  order by sno asc )</p><p>sqlserver2005之后支持：<br>select <em>from<br>(<br>    select row_number()  over (sno order by sno asc) as r,</em> from student</p><pre><code> where r&lt;=n*10 </code></pre><p>)<br>where r&gt;=(n-1)*10+1 and  ;    </p><p>SQLServer此种分页sql与oralce分页sql的区别： 1.rownum  ，row_number()    2.oracle需要排序（为了排序，单独写了一个子查询），但是在sqlserver 中可以省略该排序的子查询  因为sqlserver中可以通过over直接排序</p><p>sqlserver2012之后支持：<br>offset fetch next only</p><p>select * from student  oreder by sno<br>offset (页数-1)*页面大小+1  rows fetch next 页面大小  rows only ;</p><p>(n-1)<em>10+1    —  n</em>10 </p><p>mysql从0开始计数，Oracle/sqlserver 从1开始计数</p><h3 id="2-分页实现："><a href="#2-分页实现：" class="headerlink" title="2.分页实现："></a>2.分页实现：</h3><p>5个变量（属性）<br>1.数据总数    100    103                    （查数据库,select count(*)..）<br>2.页面大小（每页显示的数据条数）20                  (用户自定义)<br>3.总页数                              （程序自动计算）<br>    总页数 = 100/20  =数据总数/页面大小<br>    总页数 = 103/20 = 数据总数/页面大小+1<br>    —&gt;<br>    总页数 = 数据总数%页面大小==0? 数据总数/页面大小:数据总数/页面大小+1 ;</p><p>4.当前页（页码）                              （用户自定义）<br>5.当前页的对象集合（实体类集合）：每页所显示的所有数据 （10个人信息）<br>List<Student></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589798043657.png" alt="1589798043657"></p><p>dao和DBUtil的区别：<br>dao 是处理特定 类的 数据库操作类：<br>DBUtil是通用  数据库操作类</p><h3 id="3-demo"><a href="#3-demo" class="headerlink" title="3.demo"></a>3.demo</h3><p>studentShow.jsp:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 分页需要参数：</span></span><br><span class="line"><span class="comment">        * 1.当前页：currentPage</span></span><br><span class="line"><span class="comment">        * 2.总页数：maxPage</span></span><br><span class="line"><span class="comment">        * 3.页条数：pageSize</span></span><br><span class="line"><span class="comment">        * 4.总数据：totalCount</span></span><br><span class="line"><span class="comment">        * 5.当前页对象集合：studentList</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;table&quot;</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;学号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;地址&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">        &lt;%--接收从QueryStudentByPageServlet传递过来的page,取出student对象并展示--%&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            Page p = (Page) request.getAttribute(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Student student : p.getStudentList())&#123;</span><br><span class="line">        %&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;a href=&quot;QueryStudentBySno?sno=&lt;%=student.getSno() %&gt;&quot;&gt;&lt;%=student.getSno() %&gt;&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSname() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSage() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSaddr() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;a href=&quot;DeleteStudentServlet?sno=&lt;%=student.getSno() %&gt; &quot;&gt;删除&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">        &lt;%</span><br><span class="line">            &#125;</span><br><span class="line">        %&gt;</span><br><span class="line">        &lt;%--&lt;c:forEach items=<span class="string">&quot;$&#123;studentList&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;student&quot;</span>&gt;--%&gt;</span><br><span class="line">            &lt;%--&lt;tr&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.sno&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.sname&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.sage&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;$&#123;student.saddr&#125;&lt;/td&gt;--%&gt;</span><br><span class="line">            &lt;%--&lt;/tr&gt;--%&gt;</span><br><span class="line">        &lt;%--&lt;/c:forEach&gt;--%&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;a href=&quot;addStudent.jsp&quot;&gt;新增&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="keyword">if</span> (p.getCurrentPage() &gt;= p.getTotalPage())&#123;</span><br><span class="line">            %&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=1&quot;&gt;首页&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=&lt;%=p.getCurrentPage()-1%&gt;&quot;&gt;上一页&lt;/a&gt;</span><br><span class="line">            每页显示</span><br><span class="line">            &lt;select name=<span class="string">&quot;pageSize&quot;</span>&gt;</span><br><span class="line">                &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            条</span><br><span class="line">            &lt;%</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (p.getCurrentPage() == <span class="number">1</span>)&#123;</span><br><span class="line">            %&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=&lt;%=p.getCurrentPage()+1%&gt;&quot;&gt;下一页&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=&lt;%=p.getTotalPage()%&gt;&quot;&gt;尾页&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">            每页显示</span><br><span class="line">            &lt;select name=<span class="string">&quot;pageSize&quot;</span>&gt;</span><br><span class="line">                &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            条</span><br><span class="line">            &lt;%</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            %&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=1&quot;&gt;首页&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=&lt;%=p.getCurrentPage()-1%&gt;&quot;&gt;上一页&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=&lt;%=p.getCurrentPage()+1%&gt;&quot;&gt;下一页&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;QueryStudentByPageServlet?currentPage=&lt;%=p.getTotalPage()%&gt;&quot;&gt;尾页&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">            每页显示</span><br><span class="line">            &lt;select name=<span class="string">&quot;pageSize&quot;</span>&gt;</span><br><span class="line">                &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            条</span><br><span class="line">            &lt;%</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;%--&lt;%--%&gt;</span><br><span class="line">        &lt;%--IStudentService iStudentService  = <span class="keyword">new</span> IStudentServiceImpl();--%&gt;</span><br><span class="line">        &lt;%--<span class="keyword">int</span> pageSize = <span class="number">2</span>;--%&gt;</span><br><span class="line">        &lt;%--<span class="keyword">int</span> maxPage = iStudentService.getTotalCount()%pageSize == <span class="number">0</span> ?--%&gt;</span><br><span class="line">            &lt;%--iStudentService.getTotalCount()/pageSize : iStudentService.getTotalCount()/pageSize + <span class="number">1</span> ;--%&gt;</span><br><span class="line">        &lt;%--<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxPage; i++) &#123;--%&gt;</span><br><span class="line">            &lt;%--out.print(<span class="string">&quot;&lt;a href=&#x27;queryStudentByPageServlet?currentPage=&#x27;+i&gt;&quot;</span>+i+<span class="string">&quot;&lt;/a&gt;&quot;</span>);--%&gt;</span><br><span class="line">        &lt;%--&#125;--%&gt;</span><br><span class="line">    &lt;%--%&gt;--%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>QueryStudentByPageServlet:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;QueryStudentByPageServlet&quot;, urlPatterns = &quot;/QueryStudentByPageServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryStudentByPageServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            page对象要设置4个参数：</span></span><br><span class="line"><span class="comment">            1.当前页</span></span><br><span class="line"><span class="comment">            2.totalCount</span></span><br><span class="line"><span class="comment">            3.pageSize</span></span><br><span class="line"><span class="comment">            4.studentList</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//1.获取当前页</span></span><br><span class="line">        Page page = <span class="keyword">new</span> Page();</span><br><span class="line">        String cpage = request.getParameter(<span class="string">&quot;currentPage&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (cpage == <span class="keyword">null</span>)&#123;</span><br><span class="line">            cpage = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> currentPage = Integer.parseInt(cpage);</span><br><span class="line">        page.setCurrentPage(currentPage);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.获取总数totalCount</span></span><br><span class="line">        IStudentService iStudentService = <span class="keyword">new</span> IStudentServiceImpl();</span><br><span class="line">        <span class="keyword">int</span> totalCount = iStudentService.getTotalCount();</span><br><span class="line">        page.setTotalCount(totalCount);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.获取pageSize</span></span><br><span class="line">        String pSize = request.getParameter(<span class="string">&quot;pageSize&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (pSize == <span class="keyword">null</span>)&#123;</span><br><span class="line">            pSize = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pageSize = Integer.parseInt(pSize);</span><br><span class="line">        page.setPageSize(pageSize);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.获取页面学生对象studentList</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;Student&gt; studentList = iStudentService.queryStudentByPage(currentPage,pageSize);</span><br><span class="line">            page.setStudentList(studentList);</span><br><span class="line">            System.out.println(studentList);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//把page对象传递到studentShow.jsp</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;p&quot;</span>, page);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;studentShow.jsp&quot;</span>).forward(request,response);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>IStudentDaoImpl:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotalCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       String sql = <span class="string">&quot;select count(1) from student&quot;</span>;</span><br><span class="line">       <span class="keyword">return</span> JDBCUtil.getTotalCount(sql);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ArrayList&lt;Student&gt; <span class="title">queryStudentByPage</span><span class="params">(<span class="keyword">int</span> courrentPage, <span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">       ArrayList&lt;Student&gt; studentList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       String sql = <span class="string">&quot;SELECT * FROM student LIMIT ?,?&quot;</span>;</span><br><span class="line">       Object[] params = &#123;(courrentPage-<span class="number">1</span>)*pageSize,pageSize&#125;;</span><br><span class="line">       rs = JDBCUtil.executeQuery(sql, params);</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">               <span class="keyword">int</span> sno = rs.getInt(<span class="string">&quot;sno&quot;</span>);</span><br><span class="line">               String sname = rs.getString(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">               <span class="keyword">int</span> sage = rs.getInt(<span class="string">&quot;sage&quot;</span>);</span><br><span class="line">               String saddr = rs.getString(<span class="string">&quot;saddr&quot;</span>);</span><br><span class="line">               Student student = <span class="keyword">new</span> Student(sno, sname, sage, saddr);</span><br><span class="line">               studentList.add(student);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">           e1.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           JDBCUtil.closeAll(rs, pstmt, JDBCUtil.connection);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span>  studentList;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>IStudentServiceImpl:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList <span class="title">queryStudentByPage</span><span class="params">(<span class="keyword">int</span> courrentPage, <span class="keyword">int</span> PageSize)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Student&gt; studentList = <span class="keyword">null</span>;</span><br><span class="line">        studentList = iStudentDao.queryStudentByPage(courrentPage, PageSize);</span><br><span class="line">        <span class="keyword">return</span> studentList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotalCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> iStudentDao.getTotalCount();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>JDBCUtil:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getTotalCount</span><span class="params">(String sql)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = -<span class="number">1</span>;</span><br><span class="line">        rs = executeQuery(sql, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs.next())&#123;</span><br><span class="line">                count = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.closeAll(rs, pstmt, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入理解什么是RESTFul API</title>
      <link href="2020/12/17/SSM/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E4%BB%80%E4%B9%88%E6%98%AFRESTFul%20API/"/>
      <url>2020/12/17/SSM/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E4%BB%80%E4%B9%88%E6%98%AFRESTFul%20API/</url>
      
        <content type="html"><![CDATA[<p><strong>参考地址：</strong><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html">http://www.ruanyifeng.com/blog/2014/05/restful_api.html</a>****</p><h2 id="一、起源"><a href="#一、起源" class="headerlink" title="一、起源"></a>一、起源</h2><p>REST这个词，是<a href="http://en.wikipedia.org/wiki/Roy_Fielding">Roy Thomas Fielding</a>在他2000年的<a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">博士论文</a>中提出的。</p><p><img src="https://i.loli.net/2020/12/17/fMBaINgsE6tHFJ5.png" alt="image-20201217154005430"></p><p> 　Fielding是一个非常重要的人，他是HTTP协议（1.0版和1.1版）的主要设计者、Apache服务器软件的作者之一、Apache基金会的第一任主席。所以，他的这篇论文一经发表，就引起了关注，并且立即对互联网开发产生了深远的影响。<br> 　他这样介绍论文的写作目的：</p><blockquote><p>本文研究计算机科学两大前沿—-软件和网络—-的交叉点。长期以来，软件研究主要关注软件设计的分类、设计方法的演化，很少客观地评估不同的设计选择对系统行为的影响。而相反地，网络研究主要关注系统之间通信行为的细节、如何改进特定通信机制的表现，常常忽视了一个事实，那就是改变应用程序的互动风格比改变互动协议，对整体表现有更大的影响。<strong>我这篇文章的写作目的，就是想在符合架构原理的前提下，理解和评估以网络为基础的应用软件的架构设计，得到一个功能强、性能好、适宜通信的架构。</strong></p></blockquote><h2 id="二、名称"><a href="#二、名称" class="headerlink" title="二、名称"></a><strong>二、名称</strong></h2><blockquote><p>Fielding将他对互联网软件的架构原则，定名为REST，即Representational State Transfer的缩写。我对这个词组的翻译是”表现层状态转化”。</p></blockquote><blockquote><p>如果一个架构符合REST原则，就称它为RESTful架构。</p></blockquote><blockquote><p><strong>要理解RESTful架构，最好的方法就是去理解Representational State Transfer这个词组到底是什么意思，它的每一个词代表了什么涵义。</strong>如果你把这个名称搞懂了，也就不难体会REST是一种什么样的设计。</p></blockquote><h2 id="三、资源（Resources）"><a href="#三、资源（Resources）" class="headerlink" title="三、资源（Resources）"></a><strong>三、资源（Resources）</strong></h2><blockquote><p>REST的名称”表现层状态转化”中，省略了主语。”表现层”其实指的是”资源”（Resources）的”表现层”。</p></blockquote><blockquote><p><strong>所谓”资源”，就是网络上的一个实体，或者说是网络上的一个具体信息。</strong>它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源标识符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">附：</span><br><span class="line">URI：Uniform Resource Identifier，统一资源标识符</span><br><span class="line">URL：Uniform Resource Location统一资源定位符</span><br></pre></td></tr></table></figure><blockquote><p>所谓”上网”，就是与互联网上一系列的”资源”互动，调用它的URI。</p></blockquote><h2 id="四、表现层（Representation）"><a href="#四、表现层（Representation）" class="headerlink" title="四、表现层（Representation）"></a><strong>四、表现层（Representation）</strong></h2><blockquote><p>“资源”是一种信息实体，它可以有多种外在表现形式。<strong>我们把”资源”具体呈现出来的形式，叫做它的”表现层”（Representation）。</strong></p></blockquote><blockquote><p>比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。</p></blockquote><blockquote><p>URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的”.html”后缀名是不必要的，因为这个后缀名表示格式，属于”表现层”范畴，而URI应该只代表”资源”的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对”表现层”的描述。</p></blockquote><h2 id="五、状态转化（State-Transfer）"><a href="#五、状态转化（State-Transfer）" class="headerlink" title="五、状态转化（State Transfer）"></a><strong>五、状态转化（State Transfer）</strong></h2><blockquote><p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。</p></blockquote><blockquote><p>互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，<strong>如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State Transfer）。而这种转化是建立在表现层之上的，所以就是”表现层状态转化”。</strong></p></blockquote><blockquote><p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：<strong>GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</strong></p></blockquote><h2 id="六、综述"><a href="#六、综述" class="headerlink" title="六、综述"></a><strong>六、综述</strong></h2><blockquote><p>综合上面的解释，我们总结一下什么是RESTful架构：<br> 　　　（1）每一个URI代表一种资源；<br> 　　　（2）客户端和服务器之间，传递这种资源的某种表现层；<br> 　　　（3）客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。</p></blockquote><h2 id="七、误区"><a href="#七、误区" class="headerlink" title="七、误区"></a><strong>七、误区</strong></h2><p>RESTful架构有一些典型的设计误区。<br> 　<strong>最常见的一种设计错误，就是URI包含动词。</strong>因为”资源”表示一种实体，所以应该是名词，URI不应该有动词，动词应该放在HTTP协议中。<br> 　举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。<br> 　如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F;accounts&#x2F;1&#x2F;transfer&#x2F;500&#x2F;to&#x2F;2</span><br></pre></td></tr></table></figure><p>正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST /transaction HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="keyword">from</span>=<span class="number">1</span>&amp;to=<span class="number">2</span>&amp;amount=<span class="number">500.00</span></span><br></pre></td></tr></table></figure><p><strong>另一个设计误区，就是在URI中加入版本号</strong>：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span>/<span class="regexp">/www.example.com/app</span><span class="regexp">/1.0/foo</span></span><br><span class="line"><span class="symbol">http:</span>/<span class="regexp">/www.example.com/app</span><span class="regexp">/1.1/foo</span></span><br><span class="line"><span class="symbol">http:</span>/<span class="regexp">/www.example.com/app</span><span class="regexp">/2.0/foo</span></span><br></pre></td></tr></table></figure><p>因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见<a href="http://www.informit.com/articles/article.aspx?p=1566460">Versioning REST Services</a>）：</p><blockquote><p>Accept: vnd.example-com.foo+json; version=1.0<br> Accept: vnd.example-com.foo+json; version=1.1<br> Accept: vnd.example-com.foo+json; version=2.0</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> SSM </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC</title>
      <link href="2020/12/17/SSM/SpringMVC/"/>
      <url>2020/12/17/SSM/SpringMVC/</url>
      
        <content type="html"><![CDATA[<h2 id="1-SpringMVC概述"><a href="#1-SpringMVC概述" class="headerlink" title="1.SpringMVC概述"></a>1.SpringMVC概述</h2><h3 id="MVC三层架构："><a href="#MVC三层架构：" class="headerlink" title="MVC三层架构："></a>MVC三层架构：</h3><p>M: Model模型，封装和映射数据（Javabean）</p><p>V：View视图，界面显示工作（.jsp）</p><p>C：Controller控制器，控制整个网站的跳转逻辑（Servlet）</p><p> <img src="https://i.loli.net/2020/11/09/DhobkrgwmzLF2MJ.png" alt="image-20201109103828763"></p><h3 id="SpringMVC三层架构"><a href="#SpringMVC三层架构" class="headerlink" title="SpringMVC三层架构"></a>SpringMVC三层架构</h3><p><img src="https://i.loli.net/2020/12/17/nyJXMvQTB1oYAc5.png" alt="image-20201113113548932"></p><h2 id="2-注解"><a href="#2-注解" class="headerlink" title="2.注解"></a>2.注解</h2><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>RequestMapping是一个用来处理请求地址映射的注解，可用于类或方法上。用于类上，表示类中的所有响应请求的方法都是以该地址作为父路径。</p><p>RequestMapping注解有六个属性：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># value， method</span></span></span><br><span class="line">value：     指定请求的实际地址，指定的地址可以是URI Template 模式（后面将会说明）；</span><br><span class="line"></span><br><span class="line">method：  指定请求的method类型， GET、POST、PUT、DELETE等；</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># consumes，produces</span></span></span><br><span class="line">consumes： 指定处理请求的提交内容类型（Content-Type），例如application/json, text/html;</span><br><span class="line"></span><br><span class="line">produces:    指定返回的内容类型，仅当request请求头中的(Accept)类型中包含该指定类型才返回；</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># params，headers</span></span></span><br><span class="line">params： 指定request中必须包含某些参数值或者不包含某些参数值，才让该方法处理。</span><br><span class="line"></span><br><span class="line">headers： 指定request中必须包含某些指定的header值，才能让该方法处理请求。</span><br></pre></td></tr></table></figure><p>Value:</p><p>URL地址可以进行通配符匹配：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?   可以替代任意一个字符,0个多个都不行，模糊和精确同时存在时，精确优先</span><br><span class="line"></span><br><span class="line">*能替代任意多个字符，和一层路径</span><br><span class="line"></span><br><span class="line">**能替代多层路径</span><br></pre></td></tr></table></figure><h3 id="PathVariable-映射URL绑定的占位符"><a href="#PathVariable-映射URL绑定的占位符" class="headerlink" title="@PathVariable  映射URL绑定的占位符"></a>@PathVariable  映射URL绑定的占位符</h3><p>通过 @PathVariable 可以将URL中占位符参数{xxx}绑定到处理器类的方法形参中@PathVariable(“xxx“) 。</p><p>然后可以拿到请求地址中的参数。</p><p>语法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PathVariable(&quot;xxx&quot;)</span></span><br><span class="line">通过 <span class="meta">@PathVariable</span> 可以将URL中占位符参数&#123;xxx&#125;绑定到处理器类的方法形参中<span class="meta">@PathVariable(“xxx“)</span> </span><br><span class="line"> </span><br><span class="line"><span class="meta">@RequestMapping(value=”user/&#123;id&#125;/&#123;name&#125;”)</span></span><br><span class="line">请求路径：http:<span class="comment">//localhost:8080/hello/show5/1/james</span></span><br></pre></td></tr></table></figure><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello2</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id, <span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id=&quot;</span> + id);</span><br><span class="line">        System.out.println(<span class="string">&quot;name=&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h3><p>作用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">作用：将方法的返回值，以特定的格式写入到response的body区域，进而将数据返回给客户端。</span><br><span class="line"></span><br><span class="line">当方法上面没有写ResponseBody,底层会将方法的返回值封装为ModelAndView对象。</span><br><span class="line"></span><br><span class="line">如果返回值是字符串，那么直接将字符串写到客户端；如果是一个对象，会将对象转化为json串，然后写到客户端。</span><br></pre></td></tr></table></figure><h3 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h3><p>获取请求的请求体。</p><h2 id="3-Restful架构"><a href="#3-Restful架构" class="headerlink" title="3.Restful架构"></a>3.Restful架构</h2><p>参考：</p><p>Restful例子代码；</p><p>通过get、post、put、delete四种不同的请求方式以及不同的RequestMapping区分请求方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/book/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询id=&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/book&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;添加=&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PutMapping(&quot;/book/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello4</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;修改=&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/book/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello5</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;删除=&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="4-SpringMVC获取请求带来的信息"><a href="#4-SpringMVC获取请求带来的信息" class="headerlink" title="4.SpringMVC获取请求带来的信息"></a>4.SpringMVC获取请求带来的信息</h2><h3 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h3><p>作用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将请求参数绑定到你控制器的方法参数上（是springmvc中接收普通参数的注解）</span><br></pre></td></tr></table></figure><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：@RequestParam(value=”参数名”,required=”<span class="literal">true</span>/<span class="literal">false</span>”,defaultValue=””)</span><br><span class="line"> </span><br><span class="line">value：参数名</span><br><span class="line"> </span><br><span class="line">required：是否包含该参数，默认为<span class="literal">true</span>，表示该请求路径中必须包含该参数，如果不包含就报错。</span><br><span class="line"> </span><br><span class="line">defaultValue：默认参数值，如果设置了该值，required=<span class="literal">true</span>将失效，自动为<span class="literal">false</span>,如果没有传该参数，就使用默认值</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请求地址：http://localhost:8080/test?id=123</span><br></pre></td></tr></table></figure><p>controller：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello6</span><span class="params">(<span class="meta">@RequestParam(value = &quot;id&quot;, required = false, defaultValue = &quot;没带参数的默认值&quot;)</span> String id)</span></span>&#123;</span><br><span class="line">    <span class="comment">//String id也可以取名为其他，比如String abc,代表</span></span><br><span class="line">    <span class="comment">//abc = request.getParameter(&quot;id&quot;)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;获取到了：&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过@RequestParam获取到了请求中id参数。</p><p><strong>@RequestParam和@PathVariable的区别：</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/test/&#123;name&#125;?id=123</span><br><span class="line">@RequestParam获取的是id的值，是请求参数中的值。</span><br><span class="line">@PathVariable获取的是&#123;name&#125;中的name值，是请求路径上占位符的值。</span><br></pre></td></tr></table></figure><h3 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="@RequestHeader"></a>@RequestHeader</h3><p>作用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">获取请求头中某个key的值，能够将请求头中的变量值映射到控制器的参数中</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、value：参数名称</span><br><span class="line"></span><br><span class="line">2、required：是否必须</span><br><span class="line"></span><br><span class="line">3、defaultValue：默认值</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello7</span><span class="params">(<span class="meta">@RequestHeader(value = &quot;user-agents&quot;, required = false)</span> String id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;拿到请求头：&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="CookieValue"><a href="#CookieValue" class="headerlink" title="@CookieValue"></a>@CookieValue</h3><p>作用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用来获取Cookie中的值</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、value：参数名称</span><br><span class="line"></span><br><span class="line">2、required：是否必须</span><br><span class="line"></span><br><span class="line">3、defaultValue：默认值</span><br></pre></td></tr></table></figure><h3 id="HttpEntity"><a href="#HttpEntity" class="headerlink" title="HttpEntity"></a>HttpEntity</h3><p>作用：接收发过来的请求的整个请求信息。包括请求头和请求题。</p><p>例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;/hello12?username=zhangsan&quot;&gt;HttpEntity接收请求信息&lt;/a&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello12&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello12</span><span class="params">(HttpEntity&lt;String&gt; body)</span></span>&#123;</span><br><span class="line">        System.out.println(body);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ResponseEntity"><a href="#ResponseEntity" class="headerlink" title="ResponseEntity"></a>ResponseEntity</h3><p>作用：响应数据到页面。可以设置响应头、响应体、响应状态码。</p><p>例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;/hello13&quot;&gt;ResponseEntity返回响应数据&lt;/a&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello13&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">hello13</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String body = <span class="string">&quot;&lt;h1&gt;succssssssssssssss&quot;</span>;</span><br><span class="line">        HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">        headers.add(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        ResponseEntity responseEntity = <span class="keyword">new</span> ResponseEntity&lt;String&gt;(body, headers, HttpStatus.OK);</span><br><span class="line">        System.out.println(responseEntity);</span><br><span class="line">        <span class="keyword">return</span> responseEntity;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="5-数据到页面"><a href="#5-数据到页面" class="headerlink" title="5.数据到页面"></a>5.数据到页面</h2><p>除了传入原生request和session，SpringMVC还提供了很多其他方式将数据带给页面。</p><h3 id="在方法出传入Map、Model、ModelMap"><a href="#在方法出传入Map、Model、ModelMap" class="headerlink" title="在方法出传入Map、Model、ModelMap"></a>在方法出传入Map、Model、ModelMap</h3><p><strong>Map，Model，ModelMap的作用域都是request。</strong></p><p>三者关系：</p><p>通过getclass，可以看到<code>Map</code>，<code>Model</code>，<code>ModelMap</code>最终都是<code>BindingAwareModelMap</code>在工作；相当于给<code>BindingAwareModelMap</code>中保存的东西都会被放在请求域中。</p><p>例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello1</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;数据输出，map&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;你好&quot;</span>);</span><br><span class="line">        System.out.println(map.getClass());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello2</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;我是output1()&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello3</span><span class="params">(ModelMap modelMap)</span></span>&#123;</span><br><span class="line">        modelMap.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;我是output3()&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;success&lt;/h1&gt;</span><br><span class="line">$&#123;msg&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">## 使用JSTL需要导入两个jar包</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;jstl&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;1.2&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;taglibs&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;standard&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;1.1.2&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    </span><br><span class="line">在jsp页面导入标签：</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>还会有个小问题：<br>由于Servlet版本原因，会导致EL表达式无法被解析到.，所以需要设置：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span>%&gt;</span><br></pre></td></tr></table></figure><p>或者：修改web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line">2 <span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">3</span>          <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">4</span>          <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">5</span>          <span class="attr">id</span>=<span class="string">&quot;WebApp_ID&quot;</span> <span class="attr">version</span>=<span class="string">&quot;3.0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="方法返回值使用ModeAndView"><a href="#方法返回值使用ModeAndView" class="headerlink" title="方法返回值使用ModeAndView"></a>方法返回值使用ModeAndView</h3><p>ModeAndView</p><p>既包含视图信息（页面地址），也包含模型数据（给页面带的数据）；数据均保存在请求域中。</p><p>page域：在页面</p><p>session域：在一个session中，运行时间长，数据量大，容易崩。</p><p>request域：数据存放在请求域中，请求结束，数据消失，比较利于程序运行。</p><p>application域：不仅自己可以看，其他也能看到，信息不安全。</p><p>所以使用最多的是request域。</p><p>例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello4&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">hello4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="comment">//或者</span></span><br><span class="line">        <span class="comment">//ModelAndView modelAndView = new ModelAndView();</span></span><br><span class="line">        <span class="comment">//modelAndView.setViewName(&quot;success&quot;);</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="使用-SessionAttributes注解为session域中暂存数据"><a href="#使用-SessionAttributes注解为session域中暂存数据" class="headerlink" title="使用@SessionAttributes注解为session域中暂存数据"></a>使用@SessionAttributes注解为session域中暂存数据</h3><p>使用<code>@SessionAttributes(value = &quot;msg&quot;)</code>注解会在给<code>BindingAwareModelMap</code>中保存数据的同时，为session中存放一份。value指定保存数据时要给session中存放的key。</p><ul><li><code>value = &#123;&quot;msg&quot;&#125;</code>：只要保存的是这种key的数据，给session中存放一份。</li><li><code>types=&#123;String.class&#125;</code>：只要保存的是这种类型的数据，给session中存放一份。</li><li>需要放在类上</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SessionAttributes(value = &quot;msg&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutputController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;handler01&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">handler01</span><span class="params">(Map&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class="line">map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;你好&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;map的类型是：&quot;</span> + map.getClass());</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>SpringMVC虽然提供了为session存放数据的@SessionAttributes注解，不过还是推荐使用原始API，因为使用SpringMVC提供的注解可能会引发异常。</p><h2 id="6-视图解析"><a href="#6-视图解析" class="headerlink" title="6.视图解析"></a>6.视图解析</h2><h3 id="forward转发"><a href="#forward转发" class="headerlink" title="forward转发"></a><strong>forward转发</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--创建视图解析器对象--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;internalResourceViewResolver&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br><span class="line">        &lt;!--表示文件所在位置--&gt;</span><br><span class="line">        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/pages/&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;!--表示文件后缀名--&gt;</span><br><span class="line">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure><p>一般配置了视图解析器，在返回页面的时候会根据返回值进行拼接跳转到页面，但是如果页面放在了其他地方，而不是视图解析器配置的地方，则可以使用forward前缀指定转发或者使用相对路径。</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forward:转发的路径</span><br></pre></td></tr></table></figure><p>两种作用：</p><ol><li>转发到指定页面</li><li>转发到指定请求</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//转发到指定页面</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello5&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello5</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;转发&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/forwardtest.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//转发到指定请求</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello6&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello6</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;转发2&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/hello5&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="redirect重定向"><a href="#redirect重定向" class="headerlink" title="redirect重定向"></a><strong>redirect重定向</strong></h3><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redirect:重定向路径</span><br></pre></td></tr></table></figure><p>两种作用：</p><ol><li>转发到指定页面</li><li>转发到指定请求</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello7&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello7</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;转发&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/forwardtest.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello8&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello8</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;转发2&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/hello7&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="转发和重定向区别："><a href="#转发和重定向区别：" class="headerlink" title="转发和重定向区别："></a><strong>转发和重定向区别：</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">区别：</span><br><span class="line">1.转发是浏览器上的网址不变，重定向时 浏览器上的网址改变为重定向的路径。</span><br><span class="line">2.转发只有一次请求，重定向实际上产生了两次请求。</span><br><span class="line">3.转发的网址必须是本站点的网址，重定向时的网址可以是任何网址。</span><br><span class="line">4.转发：以前的request中存放的变量不会失效，就像把两个页面拼到了一起。重定向：以前的request中存放的变量全部失效，并进入一个新的request作用域。</span><br><span class="line"></span><br><span class="line">转发：</span><br><span class="line">　　发送请求 --&gt;服务器运行--&gt;进行请求的重新设置，例如通过request.setAttribute(name,value)--&gt;根据转发的地址，获取该地址的网页--&gt;响应请求给浏览器</span><br><span class="line">　　</span><br><span class="line">重定向：</span><br><span class="line">　　发送请求 --&gt;服务器运行--&gt;响应请求，返回给浏览器一个新的地址与响应码--&gt;浏览器根据响应码，判定该响应为重定向，自动发送一个新的请求给服务器，请求地址为之前返回的地址--&gt;服务器运行--&gt;响应请求给浏览器</span><br><span class="line">　　</span><br><span class="line">四个注意点：</span><br><span class="line">1.重定向两次请求比较慢</span><br><span class="line">2.重定向可以避免在用户重新加载页面时两次调用相同的动作。</span><br><span class="line">3.要访问到另外一个WEB站点上的资源的情况，使用重定向。</span><br><span class="line">4.转发传值更方便。</span><br></pre></td></tr></table></figure><p><strong>浏览器控制台过滤请求</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用-xx</span><br><span class="line">例如：过滤js和css请求</span><br><span class="line">-js -css  中间用空格隔开</span><br></pre></td></tr></table></figure><h3 id="如何解析视图："><a href="#如何解析视图：" class="headerlink" title="如何解析视图："></a><strong>如何解析视图：</strong></h3><p>不论控制器返回一个String,ModelAndView,View都会转换为ModelAndView对象，由视图解析器解析视图，然后，进行页面的跳转。</p><p><img src="https://i.loli.net/2020/11/24/gKYlpj7JRiuyzv8.png" alt="image-20201124102139649"></p><p>视图解析源码分析：重要的两个接口<strong>ViewResolver和View。</strong></p><h3 id="视图和视图解析器"><a href="#视图和视图解析器" class="headerlink" title="视图和视图解析器"></a>视图和视图解析器</h3><ul><li>请求处理方法执行完成后，最终返回一个 ModelAndView 对象。对于那些返回 String，View 或 ModeMap 等类型的处理方法，*<strong>*Spring MVC**</strong> <strong><em>\</em>也会在内部将它们装配成一个\</strong> *<em>ModelAndView***</em> <strong><em>\</em>对象**</strong>，它包含了逻辑名和模型对象的视图</li><li>Spring MVC 借助*<strong>*视图解析器**</strong>（*<strong>*ViewResolver**</strong>）得到最终的视图对象（View），最终的视图可以是 JSP ，也可能是 Excel、JFreeChart等各种表现形式的视图</li><li>对于最终究竟采取何种视图对象对模型数据进行渲染，处理器并不关心，处理器工作重点聚焦在生产模型数据的工作上，从而实现 MVC 的充分解耦</li></ul><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><ul><li><strong><em>\</em>视图**</strong>的作用是渲染模型数据，将模型里的数据以某种形式呈现给客户,主要就是完成转发或者是重定向的操作.</li><li>为了实现视图模型和具体实现技术的解耦，Spring 在 org.springframework.web.servlet 包中定义了一个高度抽象的 <strong><em>\</em>View**</strong> 接口：</li></ul><h3 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h3><ul><li>SpringMVC 为逻辑视图名的解析提供了不同的策略，可以在 Spring WEB 上下文中*<strong>*配置一种或多种解析策略**</strong>，*<strong>*并指定他们之间的先后顺序**</strong>。每一种映射策略对应一个具体的视图解析器实现类。</li><li>视图解析器的作用比较单一：将逻辑视图解析为一个具体的视图对象。</li><li>所有的视图解析器都必须实现 ViewResolver 接口：</li></ul><h2 id="7-数据转换-amp-数据格式话-amp-数据校验"><a href="#7-数据转换-amp-数据格式话-amp-数据校验" class="headerlink" title="7.数据转换&amp;数据格式话&amp;数据校验"></a>7.数据转换&amp;数据格式话&amp;数据校验</h2><p><strong>参考：<a href="https://www.cnblogs.com/blknemo/p/13498035.html">https://www.cnblogs.com/blknemo/p/13498035.html</a></strong></p><h3 id="数据绑定流程"><a href="#数据绑定流程" class="headerlink" title="数据绑定流程"></a>数据绑定流程</h3><ol><li>Spring MVC 主框架将 ServletRequest 对象及目标方法的入参实例传递给 WebDataBinderFactory 实例，以创建 DataBinder 实例对象</li><li>DataBinder 调用装配在 Spring MVC 上下文中的 ConversionService 组件进行数据类型转换、数据格式化工作。将 Servlet 中的请求信息填充到入参对象中</li><li>调用 Validator 组件对已经绑定了请求消息的入参对象进行数据合法性校验，并最终生成数据绑定结果 BindingData 对象</li><li>Spring MVC 抽取 BindingResult 中的入参对象和校验错误对象，将它们赋给处理方法的响应入参</li></ol><p>Spring MVC 通过反射机制对目标处理方法进行解析，将请求消息绑定到处理方法的入参中。数据绑定的核心部件是 DataBinder，运行机制如下：</p><p><img src="https://i.loli.net/2020/11/25/TZ5Q93l6AgvrPOe.png" alt="image-20201125103010177"></p><h3 id="数据转换"><a href="#数据转换" class="headerlink" title="数据转换"></a>数据转换</h3><p>Spring MVC 上下文中内建了很多转换器，可完成大多数 Java 类型的转换工作。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ConversionService converters &#x3D;</span><br><span class="line"></span><br><span class="line">java.lang.Boolean -&gt; java.lang.String :</span><br><span class="line">org.springframework.core.convert.support.ObjectToStringConverter@f874ca</span><br><span class="line">java.lang.Character -&gt; java.lang.Number : CharacterToNumberFactory@f004c9</span><br><span class="line">java.lang.Character -&gt; java.lang.String : ObjectToStringConverter@68a961</span><br><span class="line">java.lang.Enum -&gt; java.lang.String : EnumToStringConverter@12f060a</span><br><span class="line">java.lang.Number -&gt; java.lang.Character : NumberToCharacterConverter@1482ac5</span><br><span class="line">java.lang.Number -&gt; java.lang.Number : NumberToNumberConverterFactory@126c6f</span><br><span class="line">java.lang.Number -&gt; java.lang.String : ObjectToStringConverter@14888e8</span><br><span class="line">java.lang.String -&gt; java.lang.Boolean : StringToBooleanConverter@1ca6626</span><br><span class="line">java.lang.String -&gt; java.lang.Character : StringToCharacterConverter@1143800</span><br><span class="line">java.lang.String -&gt; java.lang.Enum : StringToEnumConverterFactory@1bba86e</span><br><span class="line">java.lang.String -&gt; java.lang.Number : StringToNumberConverterFactory@18d2c12</span><br><span class="line">java.lang.String -&gt; java.util.Locale : StringToLocaleConverter@3598e1</span><br><span class="line">java.lang.String -&gt; java.util.Properties : StringToPropertiesConverter@c90828</span><br><span class="line">java.lang.String -&gt; java.util.UUID : StringToUUIDConverter@a42f23</span><br><span class="line">java.util.Locale -&gt; java.lang.String : ObjectToStringConverter@c7e20a</span><br><span class="line">java.util.Properties -&gt; java.lang.String : PropertiesToStringConverter@367a7f</span><br><span class="line">java.util.UUID -&gt; java.lang.String : ObjectToStringConverter@112b07f</span><br><span class="line">……</span><br></pre></td></tr></table></figure><p><strong>自定义转换器类</strong></p><p>总结三步：</p><ol><li><p>写一个自己的转换器类，并实现Converter&lt;S, T&gt;接口，将S类型转换为T类型</p></li><li><p>将自己的converter配置到ConversionService中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## 在springmvc.xml中配置</span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.lemon.Util.MyConvert&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>告诉SpringMVC使用自己的ConversionService</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionService&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>例子:</p><p>index.jsp:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;/hello9?userInfo=root-123456&quot;&gt;数据转换&lt;/a&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure><p>MyConvert:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConvert</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        <span class="keyword">if</span> (!s.isEmpty() &amp;&amp; s!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            String[] split = s.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            user.setUsername(split[<span class="number">0</span>]);</span><br><span class="line">            user.setPasswrod(split[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Controller:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello9&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello9</span><span class="params">(<span class="meta">@RequestParam(&quot;userInfo&quot;)</span> User user)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;用户：&quot;</span> + user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="关于-mvc-annotation-driven"><a href="#关于-mvc-annotation-driven" class="headerlink" title="关于 mvc:annotation-driven"></a>关于 mvc:annotation-driven</h3><ul><li><p><code>&lt;mvc:annotation-driven/&gt;</code> 会自动注册RequestMappingHandlerMapping、RequestMappingHandlerAdapter 与 ExceptionHandlerExceptionResolver 三个bean。</p></li><li><p>还将提供以下支持：</p><ul><li>支持使用 ConversionService 实例对表单参数进行类型转换</li><li>支持使用 @NumberFormat annotation、@DateTimeFormat 注解完成数据类型的格式化</li><li>支持使用 @Valid 注解对 JavaBean 实例进行 JSR 303 验证</li><li>支持使用 @RequestBody 和 @ResponseBody 注解</li></ul></li></ul><h3 id="数据格式化"><a href="#数据格式化" class="headerlink" title="数据格式化"></a>数据格式化</h3><p> 对属性对象的输入/输出进行格式化，从其本质上讲依然属于 “类型转换” 的范畴。</p><p>Spring 在格式化模块中定义了一个实现 ConversionService 接口的 FormattingConversionService 实现类，该实现类扩展了 GenericConversionService，因此它既具有类型转换的功能，又具有格式化的功能</p><p>FormattingConversionService 拥有一个 FormattingConversionServiceFactroyBean 工厂类，后者用于在 Spring 上下文中构造前者</p><p>FormattingConversionServiceFactroyBean 内部已经注册了:</p><ul><li>NumberFormatAnnotationFormatterFactroy：支持对数字类型的属性使用 @NumberFormat 注解</li><li>JodaDateTimeFormatAnnotationFormatterFactroy：支持对日期类型的属性使用 @DateTimeFormat 注解</li></ul><p>装配了 FormattingConversionServiceFactroyBean 后，就可以在 Spring MVC 入参绑定及模型数据输出时使用注解驱动了。<br> <code>&lt;mvc:annotation-driven/&gt;</code> 默认创建的 ConversionService 实例即为 FormattingConversionServiceFactroyBean</p><h4 id="日期格式化"><a href="#日期格式化" class="headerlink" title="日期格式化"></a><strong>日期格式化</strong></h4><p>@DateTimeFormat 注解可对 java.util.Date、java.util.Calendar、java.long.Long 时间类型进行标注：</p><ul><li><p>pattern 属性：类型为字符串。指定解析/格式化字段数据的模式，如：”yyyy-MM-dd hh:mm:ss”</p></li><li><p>iso 属性：类型为 DateTimeFormat.ISO。指定解析/格式化字段数据的ISO模式，包括四种：ISO.NONE（不使用） – 默 认、ISO.DATE(yyyy-MM-dd) 、ISO.TIME(hh:mm:ss.SSSZ)、ISO.DATE_TIME(yyyy-MM-dd hh:mm:ss.SSSZ)</p></li><li><p>style 属性：字符串类型。通过样式指定日期时间的格式，由两位字符组成，第一位表示日期的格式，第二位表示时间的格式：S：短日期/时间格式、M：中日期/时间格式、L：长日期/时间格式、F：完整日期/时间格式、-：忽略日期或时间格式</p></li></ul><h4 id="数值格式化"><a href="#数值格式化" class="headerlink" title="数值格式化"></a>数值格式化</h4><p>@NumberFormat 可对类似数字类型的属性进行标注，它拥有两个互斥的属性：</p><ul><li>style：类型为 NumberFormat.Style。用于指定样式类型，包括三种：Style.NUMBER（正常数字类型）、Style.CURRENCY（货币类型）、 Style.PERCENT（百分数类型）</li><li>pattern：类型为 String，自定义样式，如patter=”#,###”；</li></ul><p>例子：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@DateTimeFormat(pattern=&quot;yyyy/MM/dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NumberFormat(pattern=&quot;#,###.###&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Double wages;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle19&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">handle19</span><span class="params">(<span class="meta">@ModelAttribute(&quot;user&quot;)</span> User user)</span> </span>&#123;</span><br><span class="line">    user.setId(<span class="number">1000</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数据校验"><a href="#数据校验" class="headerlink" title="数据校验"></a>数据校验</h3><h4 id="JSR303"><a href="#JSR303" class="headerlink" title="JSR303"></a>JSR303</h4><ul><li><p>JSR 303 是 Java 为 Bean 数据合法性校验提供的标准框架，它已经包含在 JavaEE 6.0 中</p></li><li><p>JSR 303 通过在 Bean 属性上标注类似于 @NotNull、@Max 等标准的注解指定校验规则，并通过标准的验证接口对 Bean 进行验证</p><table><thead><tr><th>注解</th><th>功能说明</th></tr></thead><tbody><tr><td>@Null</td><td>被注解的元素必须为null</td></tr><tr><td>@NotNull</td><td>被注解的元素必须不为null</td></tr><tr><td>@AssertTure</td><td>被注解的元素必须为true</td></tr><tr><td>@AssertFalse</td><td>被注解的元素必须为false</td></tr><tr><td>@Min(value)</td><td>被注解的元素必须是一个数字，其值必须大于等于指定的最小值</td></tr><tr><td>@Max(value)</td><td>被注解的元素必须是一个数字其值必须小于等于指定的最大值</td></tr><tr><td>@DecimalMin(value)</td><td>被注解的元素必须是一个数字其值必须大于等于指定的最小值</td></tr><tr><td>@DecimalMax(value)</td><td>被注解的元素必须是一个数字其值必须小于等于指定的最大值</td></tr><tr><td>@Size(max,min)</td><td>被注解的元素的大小必须在指定的范围内</td></tr><tr><td>@Digits(integer,fraction)</td><td>被注解的元素必须是一个数字，其值必须在可接受的范围内</td></tr><tr><td>@Past</td><td>被注解的元素必须是一个过去的日期</td></tr><tr><td>@Future</td><td>被注解的元素必须是一个将来的日期</td></tr><tr><td>@Pattern(value)</td><td>被注解的元素必须符合指定的正则表达式</td></tr></tbody></table></li></ul><h4 id="Hibernate-Validator-扩展注解"><a href="#Hibernate-Validator-扩展注解" class="headerlink" title="Hibernate Validator 扩展注解"></a>Hibernate Validator 扩展注解</h4><p>Hibernate Validator 是 JSR 303 的一个参考实现，除支持所有标准的校验注解外，它还支持以下的扩展注解</p><table><thead><tr><th>注解</th><th>功能说明</th></tr></thead><tbody><tr><td>@Email</td><td>被注解的元素必须是电子邮箱地址</td></tr><tr><td>@Length</td><td>被注解的字符串的大小必须在指定的范围内</td></tr><tr><td>@NotEmpty</td><td>被注解的字符串必须非空</td></tr><tr><td>@Range</td><td>被注解的元素必须在合适的范围内</td></tr></tbody></table><h4 id="Spring-MVC-数据校验"><a href="#Spring-MVC-数据校验" class="headerlink" title="Spring MVC 数据校验"></a>Spring MVC 数据校验</h4><ul><li><p>Spring 4.0 拥有自己独立的数据校验框架，同时支持 JSR 303 标准的校验框架。</p></li><li><p>Spring 在进行数据绑定时，可同时调用校验框架完成数据校验工作。在 Spring MVC 中，可直接通过注解驱动的方式进行数据校验</p></li><li><p>Spring 的 LocalValidatorFactroyBean 既实现了 Spring 的 Validator 接口，也实现了 JSR 303 的 Validator 接口。只要在 Spring 容器中定义了一个 LocalValidatorFactoryBean，即可将其注入到需要数据校验的 Bean 中。</p></li><li><p>Spring 本身并没有提供 JSR303 的实现，所以必须将 JSR303 的实现者的 jar 包放到类路径下。</p></li><li><p><code>&lt;mvc:annotation-driven/&gt;</code> 会默认装配好一个 LocalValidatorFactoryBean，通过在处理方法的入参上标 注 @valid 注解即可让 Spring MVC 在完成数据绑定后执行数据校验的工作</p></li><li><p>在已经标注了 JSR303 注解的表单/命令对象前标注一个 @Valid，Spring MVC 框架在将请求参数绑定到该入参对象后，就会调用校验框架根据注解声明的校验规则实施校验</p></li><li><p>Spring MVC 是通过对处理方法签名的规约来保存校验结果的：前一个表单/命令对象的校验结果保存到随后的入参中，这个保存校验结果的入参必须是 BindingResult 或 Errors 类型，这两个类都位于 org.springframework.validation 包中</p></li><li><p>需校验的 Bean 对象和其绑定结果对象或错误对象时成对出现的，它们 之间不允许声明其他的入参</p></li><li><p>Errors 接口提供了获取错误信息的方法，如 getErrorCount() 或 getFieldErrors(String field)</p></li><li><p>BindingResult 扩展了 Errors 接口</p></li></ul><p><strong>使用步骤：</strong></p><ol><li><p>导入依赖</p></li><li><p>给Javabean的属性添加校验注解</p></li><li><p>在springmvc封装对象的时候,使用@Valid告诉springmvc这个Javabean需要校验</p></li><li><p>获取校验结果—-BindingResult</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在表单/命令对象类的属性中标注校验注解，在处理方法对 应的入参前添加 <span class="meta">@Valid</span>，Spring MVC 就会实施校验并将校验结果保存在被校验入参对象之后的 BindingResult 或 Errors 入参中。</span><br><span class="line">常用方法：</span><br><span class="line">    <span class="function">FieldError <span class="title">getFieldError</span><span class="params">(String field)</span></span></span><br><span class="line"><span class="function">    List <span class="title">getFieldErrors</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    Object <span class="title">getFieldValue</span><span class="params">(String field)</span></span></span><br><span class="line"><span class="function">    Int <span class="title">getErrorCount</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//页面显示错误信息</span></span></span><br><span class="line"><span class="function">Spring MVC 除了会将表单/命令对象的校验结果保存到对应的 BindingResult 或 Errors 对象中外，还会将所有校验 结果保存到 “隐含模型”</span></span><br><span class="line"><span class="function">即使处理方法的签名中没有对应于表单/命令对象的结果入参，校验结果也会保存在 “隐含对象” 中。</span></span><br><span class="line"><span class="function">隐含模型中的所有数据最终将通过 HttpServletRequest 的属性列表暴露给 JSP 视图对象，因此在 JSP 中可以获取错误信息</span></span><br><span class="line"><span class="function">方法:</span></span><br><span class="line"><span class="function">1.从BindingResult 中获取</span></span><br><span class="line"><span class="function">    2.直接将错误信息写在Javabean的属性上</span></span><br><span class="line"><span class="function">    <span class="comment">//@Length(min = 6, max = 16, message = &quot;密码需要6-16位&quot;)</span></span></span><br></pre></td></tr></table></figure></li><li><p>根据不同的校验结果进行处理</p></li></ol><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><p>1.导入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.1.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.index.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;/hello9&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;passwrod&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line">   <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Length(min = 6, max = 16)</span></span><br><span class="line">   <span class="keyword">private</span> String passwrod;</span><br></pre></td></tr></table></figure><p>3.controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello9&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello9</span><span class="params">(<span class="meta">@Valid</span> User user, BindingResult bindingResult, Model model)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> b = bindingResult.hasErrors();</span><br><span class="line">        <span class="keyword">if</span> (b)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;has error&quot;</span>);</span><br><span class="line">            List&lt;FieldError&gt; allErrors = bindingResult.getFieldErrors();</span><br><span class="line">            HashMap&lt;String, String&gt; errorMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (FieldError field : allErrors) &#123;</span><br><span class="line">                System.out.println(field.getField());</span><br><span class="line">                errorMap.put(field.getField(), field.getDefaultMessage());</span><br><span class="line">            &#125;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;errors&quot;</span>,errorMap);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;用户：&quot;</span> + user);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>4.error.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error</span><br><span class="line">$&#123;errors.username&#125;</span><br><span class="line">$&#123;errors.passwrod&#125;</span><br></pre></td></tr></table></figure><h4 id="提示消息国际化"><a href="#提示消息国际化" class="headerlink" title="提示消息国际化"></a>提示消息国际化</h4><p>每个属性在数据绑定和数据校验发生错误时，都会生成一个对应的 FieldError 对象。</p><p>当一个属性校验失败后，校验框架会为该属性生成 4 个消息代码，这些代码以校验注解类名为前缀，结合 modleAttribute、属性名及属性类型名生成多个对应的消息代码：例如 User 类中的 password 属性标准了一个 @Pattern 注解，当该属性值不满足 @Pattern 所定义的规则时, 就会产生以下 4 个错误代码：</p><ul><li>Pattern.user.password</li><li>Pattern.password</li><li>Pattern.java.lang.String</li><li>Pattern</li></ul><p>当使用 Spring MVC 标签显示错误消息时， Spring MVC 会查看 WEB 上下文是否装配了对应的国际化消息，如果没有，则显示默认 的错误消息，否则使用国际化消息。</p><p>若数据类型转换或数据格式转换时发生错误，或该有的参数不存在，或调用处理方法时发生错误，都会在隐含模型中创建错误消息。其错误代码前缀说明如下：</p><ul><li><p>required：必要的参数不存在。如 @RequiredParam(“param1”) 标注了一个入参，但是该参数不存在</p></li><li><p>typeMismatch：在数据绑定时，发生数据类型不匹配的问题</p></li><li><p>methodInvocation：Spring MVC 在调用处理方法时发生了错误</p></li></ul><p><strong>步骤</strong>:</p><ol><li><p>编写国际化的文件</p></li><li><p>让Springmvc管理国际化资源文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;messageSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;i18n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">value值为文件基础名:如il8n_error.properties</span><br></pre></td></tr></table></figure></li><li><p>页面取值</p></li></ol><h2 id="8-Ajax"><a href="#8-Ajax" class="headerlink" title="8.Ajax"></a>8.Ajax</h2><p>1.导依赖</p><p>2.写配置</p><p>3.测试</p><h2 id="9-文件上传与下载"><a href="#9-文件上传与下载" class="headerlink" title="9.文件上传与下载"></a>9.文件上传与下载</h2><p>1.导jar包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.在springmvc.xml中配置multiPartResolver：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456456123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.写页面发请求</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;/upload&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;请选择文件：&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;开始上传&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;上传&quot;&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>4.控制器上传图片</p><p>步骤：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.MultipartFile获取文件地址</span><br><span class="line"></span><br><span class="line">2.将文件写入目标文件地址（transferTo）</span><br></pre></td></tr></table></figure><p>多文件上传步骤：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.MultipartFile[]获取多个文件地址</span><br><span class="line"></span><br><span class="line">2.遍历数组，将文件写入目标文件地址（transferTo）</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!file.isEmpty()) &#123;</span><br><span class="line">            String storePath= <span class="string">&quot;E:\\编程\\学习项目\\SpringMVC01\\upload&quot;</span>;<span class="comment">//存放我们上传的文件路径</span></span><br><span class="line">            String fileName = file.getOriginalFilename();</span><br><span class="line">            File filepath = <span class="keyword">new</span> File(storePath, fileName);</span><br><span class="line">            <span class="keyword">if</span> (!filepath.getParentFile().exists()) &#123;</span><br><span class="line">                filepath.getParentFile().mkdirs();<span class="comment">//如果目录不存在，创建目录</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                file.transferTo(<span class="keyword">new</span> File(storePath+File.separator+fileName));<span class="comment">//把文件写入目标文件地址</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;<span class="comment">//返回到成功页面</span></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;<span class="comment">//返回到失败的页面</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>文件下载：</strong></p><p>步骤：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.获得下载文件的路径</span><br><span class="line"></span><br><span class="line">2.获得字节输入流或者文件输入流</span><br><span class="line"></span><br><span class="line">3.创建byte数组接收流 available:获取输入流所读取的文件的最大字节数</span><br><span class="line"></span><br><span class="line">4.把字节读取到数组中</span><br><span class="line"></span><br><span class="line">5.返回响应到浏览器</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;download/&#123;filename&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; download(<span class="meta">@PathVariable</span> String filename) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//获得下载文件的路径(这里绝对路径)</span></span><br><span class="line">        String filepath= <span class="string">&quot;E:\\编程\\学习项目\\SpringMVC01\\upload\\&quot;</span>+filename + <span class="string">&quot;.png&quot;</span>;</span><br><span class="line">        System.out.println(filename);</span><br><span class="line">        File file =<span class="keyword">new</span> File(filepath);</span><br><span class="line">        <span class="comment">//获得字节输入流或者文件输入流</span></span><br><span class="line">        InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">        <span class="comment">//available:获取输入流所读取的文件的最大字节数</span></span><br><span class="line">        <span class="keyword">byte</span>[] body = <span class="keyword">new</span> <span class="keyword">byte</span>[in.available()];</span><br><span class="line">        <span class="comment">//把字节读取到数组中</span></span><br><span class="line">        in.read(body);</span><br><span class="line">        <span class="comment">//设置请求头</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">        headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attchement;filename=&quot;</span> + file.getName());</span><br><span class="line">        <span class="comment">//设置响应状态</span></span><br><span class="line">        HttpStatus statusCode = HttpStatus.OK;</span><br><span class="line">        ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; entity = <span class="keyword">new</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt;(body, headers, statusCode);</span><br><span class="line">        in.close();</span><br><span class="line">        <span class="keyword">return</span> entity;<span class="comment">//返回</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="10-拦截器"><a href="#10-拦截器" class="headerlink" title="10.拦截器"></a>10.拦截器</h2><p>参考博客：<a href="https://www.cnblogs.com/black-spike/p/7813238.html">https://www.cnblogs.com/black-spike/p/7813238.html</a></p>]]></content>
      
      
      <categories>
          
          <category> SSM </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线程池详解</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89--%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%A6%E8%A7%A3/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89--%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（十三）–线程池详解"><a href="#Java并发（十三）–线程池详解" class="headerlink" title="Java并发（十三）–线程池详解"></a>Java并发（十三）–线程池详解</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="一、线程池介绍"><a href="#一、线程池介绍" class="headerlink" title="一、线程池介绍"></a>一、线程池介绍</h3><h5 id="1-什么是线程池？"><a href="#1-什么是线程池？" class="headerlink" title="1. 什么是线程池？"></a>1. 什么是线程池？</h5><p>​    线程池也是一种多线程处理方式，处理过程中将任务提交到线程池，任务执行交由线程池来管理。</p><h5 id="2-创建线程池的原因"><a href="#2-创建线程池的原因" class="headerlink" title="2.创建线程池的原因"></a>2.创建线程池的原因</h5><p>​    如果每个请求都创建一个线程去处理，服务器的资源很快别耗尽，使用线程池可减少创建线程的次数，避免反复创建并销毁线程带来的开销问题，每个工作线程都被重复利用，可执行多个任务。 </p><ol><li>反复创建线程开销大。</li><li>过多的线程会占用太多内存。</li></ol><h5 id="3-线程池的好处"><a href="#3-线程池的好处" class="headerlink" title="3.线程池的好处"></a>3.线程池的好处</h5><ul><li>加快响应速度</li><li>合理利用CPU资源</li><li>统一管理线程</li></ul><h3 id="二、创建和停止线程池"><a href="#二、创建和停止线程池" class="headerlink" title="二、创建和停止线程池"></a>二、创建和停止线程池</h3><h5 id="1-线程池构造函数的参数"><a href="#1-线程池构造函数的参数" class="headerlink" title="1.线程池构造函数的参数"></a>1.线程池构造函数的参数</h5><p><img src="https://img-blog.csdnimg.cn/20200415153311683.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1586914315611"></p><p>corePoolSize：</p><p>​    是线程池中的核心线程数量，不会被回收。</p><p>maximumPoolSize:</p><p>​    线程不够用时线程池可以创建的最大线程数量。</p><p>workQueue：</p><p>​    阻塞队列，存储等待执行的任务，执行FIFO原则。</p><p>有三种常见的队列类型：</p><ul><li>直接交换队列: SynchronousQueue，内部没有容量，只是作为中转，所所以maximumPoolSize需要设置的大一些。</li><li>无界队列：LinkedBlockingQueue，不会被塞满。maximumPoolSize设置多大也没有影响。但是如果任务处理不够快，容易造成内存浪费或者OOM。</li><li>有界队列：ArrayBlockingQueue。</li></ul><p>KeepAliveTime:</p><p>​    空闲线程的保留的时间。</p><p>unit：</p><p>​    KeepAliveTime的时间单位。</p><p>handler：</p><p>​    线程的饱和策略，一种拒绝策略，在任务满了以后，拒绝执行某些任务。</p><p>ThreadFactory：</p><p>​    创建线程的线程工厂。默认使用Executors.defaultThreadFactory(),创建的线程都在同一个线程组，拥有同样的优先级，都不是守护线程。如果自己指定ThreadFactory,那么就可以改变线程名、线程组、优先级、是否是守护线程。</p><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">DefaultThreadFactory() &#123;</span><br><span class="line">            SecurityManager s = System.getSecurityManager();</span><br><span class="line">            group = (s != <span class="keyword">null</span>) ? s.getThreadGroup() :</span><br><span class="line">                                  Thread.currentThread().getThreadGroup();</span><br><span class="line">            namePrefix = <span class="string">&quot;pool-&quot;</span> +</span><br><span class="line">                          poolNumber.getAndIncrement() +</span><br><span class="line">                         <span class="string">&quot;-thread-&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Thread <span class="title">newThread</span><span class="params">(Runnable r)</span> </span>&#123;</span><br><span class="line">            Thread t = <span class="keyword">new</span> Thread(group, r,</span><br><span class="line">                                  namePrefix + threadNumber.getAndIncrement(),</span><br><span class="line">                                  <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (t.isDaemon())</span><br><span class="line">                t.setDaemon(<span class="keyword">false</span>);</span><br><span class="line">            <span class="keyword">if</span> (t.getPriority() != Thread.NORM_PRIORITY)</span><br><span class="line">                t.setPriority(Thread.NORM_PRIORITY);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p><strong>线程池中接收任务后的流程：</strong></p><p>1.当前线程数小于coreThreads核心线程数时，即时线程池中其他线程是空闲的，也会创建线程新线程来运行新任务。</p><p>2.当前线程数大于核心线程数小于max最大线程数时，会放入工作队列中，只有工作队列满了才会创建线程。</p><p>3.如果工作队列满了并且当前线程数大于或等于最大线程数，会采用Handler执行拒绝策略。</p><p><img src="https://img-blog.csdnimg.cn/20200415153054965.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1586914813003"></p><p><strong>增减线程的特点</strong>：</p><ol><li>如果核心线程数等于最大线程数，则线程池的大小是固定的。</li><li>线程池希望保持较少的线程数，只有在负载变得很大时才增加。</li><li>通过设置maximumPoolSize为很高的值，例如Integer.MAX_value，可以允许线程池容纳任意数量的并发任务。</li><li> 只有在队列填满时才创建多余corePoolSize的线程，所以如果使用的是无界队列，例如LinkedBlockingQueue，那么线程数就不会超过corePoolSize。 </li></ol><h5 id="2-常见的几种线程池以及应用场景"><a href="#2-常见的几种线程池以及应用场景" class="headerlink" title="2.常见的几种线程池以及应用场景"></a>2.常见的几种线程池以及应用场景</h5><p>1.newSingleThreadExecutor</p><p>​    创建一个单线程化的线程池，唯一工作是执行任务，保证所有任务按照指定顺序执行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleThreadPoolTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newSingleThreadExecutor();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            executorService.execute(<span class="keyword">new</span> Task());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newSingleThreadExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FinalizableDelegatedExecutorService</span><br><span class="line">            (<span class="keyword">new</span> ThreadPoolExecutor(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                    <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                    <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;()));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>可以看到corePoolSize和maxPoolSize都是1，队列也是无界队列LinkedBlockingQueue，也会有请求堆积的问题。导致占用大量内存。</p><p>2.newFixedThreadPool</p><p>​    创建一个指定工作线程数量的线程池，可控制线程最大并发数，超出的线程在队列中等待。 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedThreadPoolTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            executorService.execute(<span class="keyword">new</span> Task());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>源码:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                      <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                      <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>可以看到，corePoolSize和MaxPoolSize的值相等，不会有线程被回收，存活时间为0s,队列采用的是无界队列LinkedBlockingQueue。由于无界队列是没有容量的，导致请求数越来越多且处理不过来的时候，会造成占用大量内存，以及OOM的情况。</p><p>3.newCachedThreadPool</p><p>​    可缓存线程池，如果线程池超过处理需要，可灵活回收空闲线程，若无可回收则新建线程。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CachedThreadPoolTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            executorService.execute(<span class="keyword">new</span> Task());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newCachedThreadPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">0</span>, Integer.MAX_VALUE,</span><br><span class="line">                                      <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                                      <span class="keyword">new</span> SynchronousQueue&lt;Runnable&gt;());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>可以看到工作队列使用的SynchronousQueue，所以没有容量来存储线程，maxPoolSize为Integer.VALUE,这可能会创建数量非常多的线程，有可能导致OOM。</p><p>4.newScheduledThreadPool</p><p>​    创建一个支持定时或周期性任务执行的线程池。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduledThreadPoolTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//scheduledExecutorService.schedule(new Task(),3,TimeUnit.SECONDS);  等待3秒执行任务</span></span><br><span class="line">        <span class="comment">//1秒后执行任务，然后每隔3秒重复执行。</span></span><br><span class="line">        scheduledExecutorService.scheduleAtFixedRate(<span class="keyword">new</span> Task(),<span class="number">1</span>,<span class="number">3</span>,TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>源码:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newScheduledThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ScheduledThreadPoolExecutor(corePoolSize);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ScheduledThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(corePoolSize, Integer.MAX_VALUE, <span class="number">0</span>, NANOSECONDS,</span><br><span class="line">              <span class="keyword">new</span> DelayedWorkQueue());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>内部使用的是延迟队列。</p><p>JDK1.8新加的线程池：</p><p>workStealingPool:</p><p>特点：</p><p>​    1.子任务。</p><p>​    2.窃取。</p><p>应用场景：</p><p>newSingleThreadExecutor</p><p>​    适用于一个任务一个任务执行的场景。</p><p>newFixedThreadPool：</p><p>​    适用于执行长期的任务，性能好很多。</p><p>newCachedThreadPool</p><p>​    适用于执行很多短期异步的小程序或者负载较轻的服务器。</p><p>newScheduleThreadPool</p><p>​    适用于周期性执行任务的场景。</p><p>四种线程池构造函数参数：</p><p><img src="https://img-blog.csdnimg.cn/20200415153122837.png" alt="1586921435365"></p><h5 id="3-线程池的线程数量如何设定"><a href="#3-线程池的线程数量如何设定" class="headerlink" title="3.线程池的线程数量如何设定"></a>3.线程池的线程数量如何设定</h5><p>1.CPU密集型：线程数=按照核数或者核数+1设定。</p><p>2.IO密集型：线程数=CPU核数*（1+平均等待时间/平均工作时间）</p><h5 id="4-停止线程池"><a href="#4-停止线程池" class="headerlink" title="4.停止线程池"></a>4.停止线程池</h5><p>1.shutdown</p><p>等待线程池中执行的任务和等待队列中的任务执行完毕就停止，而在执行shutdown之后任新加入任务会报异常。</p><p>2.isShutdown</p><p>判断线程池是否进入停止状态。</p><p>3.isTerminated</p><p>判断整个线程是否都停止了。</p><p>4.awaitTermination</p><p>等待一段时间，线程停止了返回true。否则返回false。</p><p>5.shutdownNow</p><p>立刻停止线程。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedThreadPoolTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            executorService.execute(<span class="keyword">new</span> Task());</span><br><span class="line">        &#125;</span><br><span class="line">        Thread.sleep(<span class="number">1500</span>);</span><br><span class="line">        List&lt;Runnable&gt; runnableList = executorService.shutdownNow();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//System.out.println(executorService.isShutdown());</span></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">        <span class="keyword">boolean</span> b = executorService.awaitTermination(<span class="number">12</span>, TimeUnit.SECONDS);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        <span class="comment">//System.out.println(executorService.isShutdown());</span></span><br><span class="line">        <span class="comment">//System.out.println(executorService.isTerminated());</span></span><br><span class="line">        <span class="comment">//executorService.execute(new Task());</span></span><br><span class="line">        <span class="comment">//Thread.sleep(10000);</span></span><br><span class="line">        <span class="comment">//System.out.println(executorService.isTerminated());</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三、线程池拒绝策略"><a href="#三、线程池拒绝策略" class="headerlink" title="三、线程池拒绝策略"></a>三、线程池拒绝策略</h3><p>拒绝时机：</p><p>1.当Executor关闭时，提交新任务被拒绝。</p><p>2.以及当Executor对最大线程和工作队列容量使用有限边界并已经饱和时。</p><p>四种拒绝策略：</p><p>1.AbortPolice</p><p>​    直接抛出异常。默认策略。</p><p>2.DiscardPolice</p><p>​    抛弃当前任务.</p><p>3.DiscardOldestPolice</p><p>​    抛弃队列中最早的任务</p><p>4.CallerRunsPolice</p><p>​    用调用者所在线程来执行任务。</p><h3 id="四、钩子方法"><a href="#四、钩子方法" class="headerlink" title="四、钩子方法"></a>四、钩子方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     演示每个任务执行前后放钩子函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PauseableThreadPool</span> <span class="keyword">extends</span> <span class="title">ThreadPoolExecutor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> Condition unpaused = lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isPaused;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PauseableThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize, <span class="keyword">int</span> maximumPoolSize, <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="function"><span class="params">                               TimeUnit unit,</span></span></span><br><span class="line"><span class="function"><span class="params">                               BlockingQueue&lt;Runnable&gt; workQueue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PauseableThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize, <span class="keyword">int</span> maximumPoolSize, <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="function"><span class="params">                               TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue,</span></span></span><br><span class="line"><span class="function"><span class="params">                               ThreadFactory threadFactory)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, threadFactory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PauseableThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize, <span class="keyword">int</span> maximumPoolSize, <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="function"><span class="params">                               TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue,</span></span></span><br><span class="line"><span class="function"><span class="params">                               RejectedExecutionHandler handler)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PauseableThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize, <span class="keyword">int</span> maximumPoolSize, <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="function"><span class="params">                               TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue,</span></span></span><br><span class="line"><span class="function"><span class="params">                               ThreadFactory threadFactory, RejectedExecutionHandler handler)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, threadFactory,</span><br><span class="line">                handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">beforeExecute</span><span class="params">(Thread t, Runnable r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.beforeExecute(t, r);</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isPaused) &#123;</span><br><span class="line">                unpaused.await();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            isPaused = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            isPaused = <span class="keyword">false</span>;</span><br><span class="line">            unpaused.signalAll();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        PauseableThreadPool pauseableThreadPool = <span class="keyword">new</span> PauseableThreadPool(<span class="number">10</span>, <span class="number">20</span>, <span class="number">10l</span>,</span><br><span class="line">                TimeUnit.SECONDS, <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;());</span><br><span class="line">        Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;我被执行&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            pauseableThreadPool.execute(runnable);</span><br><span class="line">        &#125;</span><br><span class="line">        Thread.sleep(<span class="number">1500</span>);</span><br><span class="line">        pauseableThreadPool.pause();</span><br><span class="line">        System.out.println(<span class="string">&quot;线程池被暂停了&quot;</span>);</span><br><span class="line">        Thread.sleep(<span class="number">1500</span>);</span><br><span class="line">        pauseableThreadPool.resume();</span><br><span class="line">        System.out.println(<span class="string">&quot;线程池被恢复了&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="五、实现原理、源码分析"><a href="#五、实现原理、源码分析" class="headerlink" title="五、实现原理、源码分析"></a>五、实现原理、源码分析</h3><p>线程池组成部分：</p><ol><li>线程池管理器（创建线程等）</li><li>工作线程</li><li>任务队列</li><li>任务接口（Task）</li></ol><p>Executor家族：</p><p><img src="https://img-blog.csdnimg.cn/20200415153147473.png" alt="1586930768504"></p><p>Executor: 顶层接口，只有一个方法，就是执行任务的。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ExecutorService: 增加了一些初步管理线程池的方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ExecutorService</span> <span class="keyword">extends</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">List&lt;Runnable&gt; <span class="title">shutdownNow</span><span class="params">()</span></span>;</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isTerminated</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Executors: 工具类，帮助我们快速创建线程池用的。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Executors</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                      <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                      <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//省略</span></span><br><span class="line">    </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>ThreadPoolExecutor: 创建线程池。</p><p>自定义创建线程池demo：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateThreadPoolDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> corePoolSize = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> maximumPoolSize = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">long</span> keepAliveTime = <span class="number">10</span>;</span><br><span class="line">        TimeUnit unit = TimeUnit.SECONDS;</span><br><span class="line">        BlockingQueue&lt;Runnable&gt; workQueue = <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">        ThreadFactory threadFactory = <span class="keyword">new</span> NameTreadFactory();</span><br><span class="line">        RejectedExecutionHandler handler = <span class="keyword">new</span> MyIgnorePolicy();</span><br><span class="line">        ThreadPoolExecutor executor = <span class="keyword">new</span> ThreadPoolExecutor(corePoolSize, maximumPoolSize, keepAliveTime, unit,</span><br><span class="line">                workQueue, threadFactory, handler);</span><br><span class="line">        executor.prestartAllCoreThreads(); <span class="comment">// 预启动所有核心线程</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            MyTask task = <span class="keyword">new</span> MyTask(String.valueOf(i));</span><br><span class="line">            executor.execute(task);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.in.read(); <span class="comment">//阻塞主线程</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NameTreadFactory</span> <span class="keyword">implements</span> <span class="title">ThreadFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> AtomicInteger mThreadNum = <span class="keyword">new</span> AtomicInteger(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Thread <span class="title">newThread</span><span class="params">(Runnable r)</span> </span>&#123;</span><br><span class="line">            Thread t = <span class="keyword">new</span> Thread(r, <span class="string">&quot;my-thread-&quot;</span> + mThreadNum.getAndIncrement());</span><br><span class="line">            System.out.println(t.getName() + <span class="string">&quot; has been created&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyIgnorePolicy</span> <span class="keyword">implements</span> <span class="title">RejectedExecutionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rejectedExecution</span><span class="params">(Runnable r, ThreadPoolExecutor e)</span> </span>&#123;</span><br><span class="line">            doLog(r, e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doLog</span><span class="params">(Runnable r, ThreadPoolExecutor e)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 可做日志记录等</span></span><br><span class="line">            System.err.println( r.toString() + <span class="string">&quot; rejected&quot;</span>);</span><br><span class="line"><span class="comment">//          System.out.println(&quot;completedTaskCount: &quot; + e.getCompletedTaskCount());</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTask</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyTask</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;MyTask [name=&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="keyword">this</span>.toString() + <span class="string">&quot; is running!&quot;</span>);</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>); <span class="comment">//让任务执行慢点</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>原理：</p><ul><li>相同线程执行不同任务。</li></ul><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (workerCountOf(c) &lt; corePoolSize) &#123;</span><br><span class="line">            <span class="keyword">if</span> (addWorker(command, <span class="keyword">true</span>))</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            c = ctl.get();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"> <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">runWorker</span><span class="params">(Worker w)</span> </span>&#123;</span><br><span class="line">        Thread wt = Thread.currentThread();</span><br><span class="line">        Runnable task = w.firstTask;</span><br><span class="line">        w.firstTask = <span class="keyword">null</span>;</span><br><span class="line">        w.unlock(); <span class="comment">// allow interrupts</span></span><br><span class="line">        <span class="keyword">boolean</span> completedAbruptly = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (task != <span class="keyword">null</span> || (task = getTask()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                w.lock();</span><br><span class="line">                <span class="keyword">if</span> ((runStateAtLeast(ctl.get(), STOP) ||</span><br><span class="line">                     (Thread.interrupted() &amp;&amp;</span><br><span class="line">                      runStateAtLeast(ctl.get(), STOP))) &amp;&amp;</span><br><span class="line">                    !wt.isInterrupted())</span><br><span class="line">                    wt.interrupt();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    beforeExecute(wt, task);</span><br><span class="line">                    Throwable thrown = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        task.run();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (RuntimeException x) &#123;</span><br><span class="line">                        thrown = x; <span class="keyword">throw</span> x;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Error x) &#123;</span><br><span class="line">                        thrown = x; <span class="keyword">throw</span> x;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Throwable x) &#123;</span><br><span class="line">                        thrown = x; <span class="keyword">throw</span> <span class="keyword">new</span> Error(x);</span><br><span class="line">                    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                        afterExecute(task, thrown);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    task = <span class="keyword">null</span>;</span><br><span class="line">                    w.completedTasks++;</span><br><span class="line">                    w.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            completedAbruptly = <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            processWorkerExit(w, completedAbruptly);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>首先检查工作线程是否小于corePoolSize,如果小于的话，就去增加worker,然后在worker类中，可以看到，首先先拿到一个任务，如果任务不为空就去运行任务。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>15.编写自己的JDBC框架.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/15.%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84JDBC%E6%A1%86%E6%9E%B6/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/15.%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84JDBC%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="编写自己的JDBC框架"><a href="#编写自己的JDBC框架" class="headerlink" title="编写自己的JDBC框架"></a>编写自己的JDBC框架</h1><p>参考链接：<a href="https://www.cnblogs.com/xdp-gacl/p/4006830.html">https://www.cnblogs.com/xdp-gacl/p/4006830.html</a></p><h2 id="一、元数据介绍"><a href="#一、元数据介绍" class="headerlink" title="一、元数据介绍"></a>一、元数据介绍</h2><p>　　元数据指的是”数据库”、”表”、”列”的定义信息。</p><h3 id="1-1、DataBaseMetaData元数据"><a href="#1-1、DataBaseMetaData元数据" class="headerlink" title="1.1、DataBaseMetaData元数据"></a>1.1、DataBaseMetaData元数据</h3><p>　　Connection.getDatabaseMetaData()获得代表DatabaseMetaData元数据的DatabaseMetaData对象。<br>　　DataBaseMetaData对象的常用方法：</p><ul><li>getURL()：返回一个String类对象，代表数据库的URL。</li><li>getUserName()：返回连接当前数据库管理系统的用户名。</li><li>getDatabaseProductName()：返回数据库的产品名称。</li><li>getDatabaseProductVersion()：返回数据库的版本号。</li><li>getDriverName()：返回驱动驱动程序的名称。</li><li>getDriverVersion()：返回驱动程序的版本号。</li><li>isReadOnly()：返回一个boolean值，指示数据库是否只允许读操作。</li></ul><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: testDataBaseMetaData</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 获取数据库的元信息</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDataBaseMetaData</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Connection conn = JdbcUtils.getConnection();</span><br><span class="line">        DatabaseMetaData metadata = conn.getMetaData();</span><br><span class="line">        <span class="comment">//getURL()：返回一个String类对象，代表数据库的URL</span></span><br><span class="line">        System.out.println(metadata.getURL());</span><br><span class="line">        <span class="comment">//getUserName()：返回连接当前数据库管理系统的用户名</span></span><br><span class="line">        System.out.println(metadata.getUserName());</span><br><span class="line">        <span class="comment">//getDatabaseProductName()：返回数据库的产品名称</span></span><br><span class="line">        System.out.println(metadata.getDatabaseProductName());</span><br><span class="line">        <span class="comment">//getDatabaseProductVersion()：返回数据库的版本号</span></span><br><span class="line">        System.out.println(metadata.getDatabaseProductVersion());</span><br><span class="line">        <span class="comment">//getDriverName()：返回驱动驱动程序的名称</span></span><br><span class="line">        System.out.println(metadata.getDriverName());</span><br><span class="line">        <span class="comment">//getDriverVersion()：返回驱动程序的版本号</span></span><br><span class="line">        System.out.println(metadata.getDriverVersion());</span><br><span class="line">        <span class="comment">//isReadOnly()：返回一个boolean值，指示数据库是否只允许读操作</span></span><br><span class="line">        System.out.println(metadata.isReadOnly());</span><br><span class="line">        JdbcUtils.release(conn, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　运行结果如下：</p><p>　　<img src="data:image/png;base64,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" alt="img"></p><h3 id="1-2、ParameterMetaData元数据"><a href="#1-2、ParameterMetaData元数据" class="headerlink" title="1.2、ParameterMetaData元数据"></a>1.2、ParameterMetaData元数据</h3><p>　　PreparedStatement.getParameterMetaData() 获得代表PreparedStatement元数据的ParameterMetaData对象。<br>　　Select * from user where name=? And password=?<br>　　ParameterMetaData对象的常用方法：</p><ul><li>getParameterCount()： 获得指定参数的个数</li><li>getParameterType(int param)：获得指定参数的sql类型，MySQL数据库驱动不支持</li></ul><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: testParameterMetaData</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 获取参数元信息</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testParameterMetaData</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Connection conn = JdbcUtils.getConnection();</span><br><span class="line">        String sql = <span class="string">&quot;select * from user wherer name=? and password=?&quot;</span>;</span><br><span class="line">        <span class="comment">//将SQL预编译一下</span></span><br><span class="line">        PreparedStatement st = conn.prepareStatement(sql);</span><br><span class="line">        ParameterMetaData pm = st.getParameterMetaData();</span><br><span class="line">        <span class="comment">//getParameterCount() 获得指定参数的个数</span></span><br><span class="line">        System.out.println(pm.getParameterCount());</span><br><span class="line">        <span class="comment">//getParameterType(int param)：获得指定参数的sql类型，MySQL数据库驱动不支持</span></span><br><span class="line">        System.out.println(pm.getParameterType(<span class="number">1</span>));</span><br><span class="line">        JdbcUtils.release(conn, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><h3 id="1-3、ResultSetMetaData元数据"><a href="#1-3、ResultSetMetaData元数据" class="headerlink" title="1.3、ResultSetMetaData元数据"></a>1.3、ResultSetMetaData元数据</h3><p>　　ResultSet. getMetaData() 获得代表ResultSet对象元数据的ResultSetMetaData对象。<br>　　ResultSetMetaData对象的常用方法：</p><ul><li>getColumnCount() 返回resultset对象的列数</li><li>getColumnName(int column) 获得指定列的名称</li><li>getColumnTypeName(int column)获得指定列的类型</li></ul><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: testResultSetMetaData</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 结果集的元数据</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testResultSetMetaData</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection conn = JdbcUtils.getConnection();</span><br><span class="line">        String sql = <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">        PreparedStatement st  = conn.prepareStatement(sql);</span><br><span class="line">        ResultSet rs = st.executeQuery();</span><br><span class="line">        <span class="comment">//ResultSet.getMetaData()获得代表ResultSet对象元数据的ResultSetMetaData对象</span></span><br><span class="line">        ResultSetMetaData metadata = rs.getMetaData();</span><br><span class="line">        <span class="comment">//getColumnCount() 返回resultset对象的列数</span></span><br><span class="line">        System.out.println(metadata.getColumnCount());</span><br><span class="line">        <span class="comment">//getColumnName(int column) 获得指定列的名称</span></span><br><span class="line">        System.out.println(metadata.getColumnName(<span class="number">1</span>));</span><br><span class="line">        <span class="comment">//getColumnTypeName(int column)获得指定列的类型</span></span><br><span class="line">        System.out.println(metadata.getColumnTypeName(<span class="number">1</span>));</span><br><span class="line">        JdbcUtils.release(conn, st, rs);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><h2 id="二、使用元数据封装简单的JDBC框架"><a href="#二、使用元数据封装简单的JDBC框架" class="headerlink" title="二、使用元数据封装简单的JDBC框架"></a>二、使用元数据封装简单的JDBC框架</h2><p>　　系统中所有实体对象都涉及到基本的CRUD操作<br>　　所有实体的CUD操作代码基本相同，仅仅发送给数据库的SQL语句不同而已，因此可以把CUD操作的所有相同代码抽取到工具类的一个update方法中，并定义参数接收变化的SQL语句。<br>　　实体的R操作，除SQL语句不同之外，根据操作的实体不同，对ResultSet的映射也各不相同，因此可义一个query方法，除以参数形式接收变化的SQL语句外，可以使用策略模式由qurey方法的调用者决定如何把ResultSet中的数据映射到实体对象中。</p><h3 id="2-1、封装通用的update方法和qurey方法"><a href="#2-1、封装通用的update方法和qurey方法" class="headerlink" title="2.1、封装通用的update方法和qurey方法"></a>2.1、封装通用的update方法和qurey方法</h3><p>　　定义一个JdbcUtils工具类，工具类负责获取数据库连接，释放资源，执行SQL的update和query操作，代码如下：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//读取db.properties文件中的数据库连接信息</span></span><br><span class="line">            InputStream in = JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">            Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">            prop.load(in);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取数据库连接驱动</span></span><br><span class="line">            driver = prop.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="comment">//获取数据库连接URL地址</span></span><br><span class="line">            url = prop.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            <span class="comment">//获取数据库连接用户名</span></span><br><span class="line">            username = prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            <span class="comment">//获取数据库连接密码</span></span><br><span class="line">            password = prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//加载数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: getConnection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 获取数据库连接对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Connection数据库连接对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, username,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: release</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 释放资源，</span></span><br><span class="line"><span class="comment">    *     要释放的资源包括Connection数据库连接对象，负责执行SQL命令的Statement对象，存储查询结果的ResultSet对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn,Statement st,ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭存储查询结果的ResultSet对象</span></span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭负责执行SQL命令的Statement对象</span></span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭Connection数据库连接对象</span></span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: update</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 万能更新</span></span><br><span class="line"><span class="comment">    * 所有实体的CUD操作代码基本相同，仅仅发送给数据库的SQL语句不同而已，</span></span><br><span class="line"><span class="comment">    * 因此可以把CUD操作的所有相同代码抽取到工具类的一个update方法中，并定义参数接收变化的SQL语句</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> sql 要执行的SQL</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> params 执行SQL时使用的参数</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql,Object params[])</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = getConnection();</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;params.length;i++)&#123;</span><br><span class="line">                st.setObject(i+<span class="number">1</span>, params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            release(conn, st, rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: query</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>:万能查询</span></span><br><span class="line"><span class="comment">    * 实体的R操作，除SQL语句不同之外，根据操作的实体不同，对ResultSet的映射也各不相同，</span></span><br><span class="line"><span class="comment">    * 因此可义一个query方法，除以参数形式接收变化的SQL语句外，可以使用策略模式由qurey方法的调用者决定如何把ResultSet中的数据映射到实体对象中。</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> sql 要执行的SQL</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> params 执行SQL时使用的参数</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rsh 查询返回的结果集处理器</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">query</span><span class="params">(String sql,Object params[],ResultSetHandler rsh)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = getConnection();</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;params.length;i++)&#123;</span><br><span class="line">                st.setObject(i+<span class="number">1</span>, params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            rs = st.executeQuery();</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 对于查询返回的结果集处理使用到了策略模式，</span></span><br><span class="line"><span class="comment">             * 在设计query方法时，query方法事先是无法知道用户对返回的查询结果集如何进行处理的，即不知道结果集的处理策略，</span></span><br><span class="line"><span class="comment">             * 那么这个结果集的处理策略就让用户自己提供，query方法内部就调用用户提交的结果集处理策略进行处理</span></span><br><span class="line"><span class="comment">             * 为了能够让用户提供结果集的处理策略，需要对用户暴露出一个结果集处理接口ResultSetHandler</span></span><br><span class="line"><span class="comment">             * 用户只要实现了ResultSetHandler接口，那么query方法内部就知道用户要如何处理结果集了</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">return</span> rsh.handler(rs);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            release(conn, st, rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　在设计query方法时，对于查询返回的结果集处理使用到了策略模式，query方法事先是无法知道用户对返回的查询结果集如何进行处理的，即不知道结果集的处理策略， 那么这个结果集的处理策略就让用户自己提供，query方法内部就调用用户提交的结果集处理策略进行处理， 为了能够让用户提供结果集的处理策略，需要对用户暴露出一个结果集处理接口ResultSetHandler， 结果集处理器接口ResultSetHandler的定义如下：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: ResultSetHandler</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:结果集处理器接口</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-5 下午12:01:27</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ResultSetHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: handler</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 结果集处理方法</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rs 查询结果集</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">handler</span><span class="params">(ResultSet rs)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　用户只要实现了ResultSetHandler接口，那么就是针对查询结果集写了一个处理器，在query方法内部就调用用户自己写的处理器处理结果集。</p><h3 id="2-2、编写常用的结果集处理器"><a href="#2-2、编写常用的结果集处理器" class="headerlink" title="2.2、编写常用的结果集处理器"></a>2.2、编写常用的结果集处理器</h3><p>　　为了提高框架的易用性，我们可以事先就针对结果集写好一些常用的处理器，比如将结果集转换成bean对象的处理器，将结果集转换成bean对象的list集合的处理器。</p><h4 id="2-2-1、BeanHandler——将结果集转换成bean对象的处理器"><a href="#2-2-1、BeanHandler——将结果集转换成bean对象的处理器" class="headerlink" title="2.2.1、BeanHandler——将结果集转换成bean对象的处理器"></a><strong>2.2.1、BeanHandler——将结果集转换成bean对象的处理器</strong></h4><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: BeanHandler</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 将结果集转换成bean对象的处理器</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-5 下午12:00:33</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanHandler</span> <span class="keyword">implements</span> <span class="title">ResultSetHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt; clazz;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BeanHandler</span><span class="params">(Class&lt;?&gt; clazz)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.clazz = clazz;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">handler</span><span class="params">(ResultSet rs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!rs.next())&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Object bean = clazz.newInstance();</span><br><span class="line">            <span class="comment">//得到结果集元数据</span></span><br><span class="line">            ResultSetMetaData metadata = rs.getMetaData();</span><br><span class="line">            <span class="keyword">int</span> columnCount = metadata.getColumnCount();<span class="comment">//得到结果集中有几列数据</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;columnCount;i++)&#123;</span><br><span class="line">                String coulmnName = metadata.getColumnName(i+<span class="number">1</span>);<span class="comment">//得到每列的列名</span></span><br><span class="line">                Object coulmnData = rs.getObject(i+<span class="number">1</span>);</span><br><span class="line">                Field f = clazz.getDeclaredField(coulmnName);<span class="comment">//反射出类上列名对应的属性</span></span><br><span class="line">                f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                f.set(bean, coulmnData);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> bean;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><h4 id="2-2-2、BeanListHandler——将结果集转换成bean对象的list集合的处理器"><a href="#2-2-2、BeanListHandler——将结果集转换成bean对象的list集合的处理器" class="headerlink" title="2.2.2、BeanListHandler——将结果集转换成bean对象的list集合的处理器"></a><strong>2.2.2、BeanListHandler——将结果集转换成bean对象的list集合的处理器</strong></h4><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: BeanListHandler</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 将结果集转换成bean对象的list集合的处理器</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-5 下午12:00:06</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanListHandler</span> <span class="keyword">implements</span> <span class="title">ResultSetHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt; clazz;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BeanListHandler</span><span class="params">(Class&lt;?&gt; clazz)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.clazz = clazz;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">handler</span><span class="params">(ResultSet rs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            List&lt;Object&gt; list = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                Object bean = clazz.newInstance();</span><br><span class="line"></span><br><span class="line">                ResultSetMetaData  metadata = rs.getMetaData();</span><br><span class="line">                <span class="keyword">int</span> count = metadata.getColumnCount();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;</span><br><span class="line">                    String name = metadata.getColumnName(i+<span class="number">1</span>);</span><br><span class="line">                    Object value = rs.getObject(name);</span><br><span class="line"></span><br><span class="line">                    Field f = bean.getClass().getDeclaredField(name);</span><br><span class="line">                    f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                    f.set(bean, value);</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(bean);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> list.size()&gt;<span class="number">0</span>?list:<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　当框架自身提供的结果集处理器不满足用户的要求时，那么用户就可以自己去实现ResultSetHandler接口，编写满足自己业务要求的结果集处理器。</p><p>　　有了上述的JdbcUtils框架之后，针对单个实体对象CRUD操作就非常方便了，如下所示：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> me.gacl.domain.Account;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.BeanListHandler;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Account account)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into account(name,money) values(?,?)&quot;</span>;</span><br><span class="line">        Object params[] = &#123;account.getName(),account.getMoney()&#125;;</span><br><span class="line">        JdbcUtils.update(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;delete from account where id=?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;id&#125;;</span><br><span class="line">        JdbcUtils.update(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Account account)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">&quot;update account set name=?,money=? where id=?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;account.getName(),account.getMoney(),account.getId()&#125;;</span><br><span class="line">        JdbcUtils.update(sql, params);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">find</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from account where id=?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;id&#125;;</span><br><span class="line">        <span class="keyword">return</span> (Account) JdbcUtils.query(sql, params, <span class="keyword">new</span> BeanHandler(Account.class));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">getAll</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">        Object params[] = &#123;&#125;;</span><br><span class="line">        <span class="keyword">return</span> (List&lt;Account&gt;) JdbcUtils.query(sql, params,<span class="keyword">new</span> BeanListHandler(Account.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p> 　　编写的这个JDBC框架就是模拟Apache的DBUtils框架的实现，下一篇将具体介绍Apache的DBUtils框架。</p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>17. Apache DButils框架学习.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/17.%20Apache%20DButils%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/17.%20Apache%20DButils%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Apache-DButils框架学习"><a href="#Apache-DButils框架学习" class="headerlink" title="Apache DButils框架学习"></a>Apache DButils框架学习</h1><h2 id="一、commons-dbutils简介"><a href="#一、commons-dbutils简介" class="headerlink" title="一、commons-dbutils简介　"></a>一、commons-dbutils简介　</h2><p>　　commons-dbutils 是 Apache 组织提供的一个开源 JDBC工具类库，它是对JDBC的简单封装，学习成本极低，并且使用dbutils能极大简化jdbc编码的工作量，同时也不会影响程序的性能。因此dbutils成为很多不喜欢hibernate的公司的首选。</p><p>　　commons-dbutilsAPI介绍：</p><ul><li>org.apache.commons.dbutils.QueryRunner</li><li>org.apache.commons.dbutils.ResultSetHandler</li></ul><p>　　工具类</p><ul><li>org.apache.commons.dbutils.DbUtils</li></ul><h2 id="二、QueryRunner类使用讲解"><a href="#二、QueryRunner类使用讲解" class="headerlink" title="二、QueryRunner类使用讲解"></a>二、QueryRunner类使用讲解</h2><p>　　该类简单化了SQL查询，它与ResultSetHandler组合在一起使用可以完成大部分的数据库操作，能够大大减少编码量。<br>　　QueryRunner类提供了两个构造方法：</p><ul><li>默认的构造方法   <ul><li><strong>在调用QueryRunner方法时需要传入connection，这种是手动提交事务。</strong></li></ul></li><li>需要一个 javax.sql.DataSource 来作参数的构造方法。<ul><li><strong>在调用QueryRunner方法时不需要传入connection，这种是自动提交事务。</strong></li></ul></li></ul><h3 id="2-1、QueryRunner类的主要方法"><a href="#2-1、QueryRunner类的主要方法" class="headerlink" title="2.1、QueryRunner类的主要方法"></a>2.1、QueryRunner类的主要方法</h3><p>　　public Object query(Connection conn, String sql, Object[] params, ResultSetHandler rsh) throws SQLException：执行一个查询操作，在这个查询中，对象数组中的每个元素值被用来作为查询语句的置换参数。该方法会自行处理 PreparedStatement 和 ResultSet 的创建和关闭。<br>　　public Object query(String sql, Object[] params, ResultSetHandler rsh) throws SQLException:　几乎与第一种方法一样；唯一的不同在于它不将数据库连接提供给方法，并且它是从提供给构造方法的数据源(DataSource) 或使用的setDataSource 方法中重新获得 Connection。<br>　　public Object query(Connection conn, String sql, ResultSetHandler rsh) throws SQLException : 执行一个不需要置换参数的查询操作。<br>　　public int update(Connection conn, String sql, Object[] params) throws SQLException:用来执行一个更新（插入、更新或删除）操作。<br>　　public int update(Connection conn, String sql) throws SQLException：用来执行一个不需要置换参数的更新操作。</p><h3 id="2-2、使用QueryRunner类实现CRUD"><a href="#2-2、使用QueryRunner类实现CRUD" class="headerlink" title="2.2、使用QueryRunner类实现CRUD"></a>2.2、使用QueryRunner类实现CRUD</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> apachedbutils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> entiy.Student;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.*;</span><br><span class="line"><span class="keyword">import</span> util.JdbcUtil_Druid;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/6/10 15:34</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApacheDbutilsTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;insert into student(sno,sname,sage,saddr) values(?,?,?,?)&quot;</span>;</span><br><span class="line">        Object params[] = &#123;<span class="string">&quot;1&quot;</span>, <span class="string">&quot;小王&quot;</span>, <span class="string">&quot;22&quot;</span>, <span class="string">&quot;上海&quot;</span>&#125;;</span><br><span class="line">        runner.update(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;update student set sname = ? where sno = ?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;<span class="string">&quot;小xi&quot;</span>, <span class="string">&quot;2&quot;</span>&#125;;</span><br><span class="line">        runner.update(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;delete from student where sno = ?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;<span class="number">8</span>&#125;;</span><br><span class="line">        runner.update(sql, params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将结果集中的第一行数据封装到一个对应的JavaBean实例中。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findOne</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student where sno = ?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;<span class="number">2</span>&#125;;</span><br><span class="line">        Student student = (Student) runner.query(sql, params, <span class="keyword">new</span> BeanHandler(Student.class));</span><br><span class="line">        System.out.println(student.getSname());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将结果集中的每一行数据都封装到一个对应的JavaBean实例中，存放到List里。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        List&lt;Student&gt; studentList = runner.query(sql, <span class="keyword">new</span> BeanListHandler&lt;Student&gt;(Student.class));</span><br><span class="line">        <span class="keyword">for</span> (Student student : studentList) &#123;</span><br><span class="line">            System.out.println(student.getSname());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把结果集中的每一行数据都转成一个数组，再存放到List中。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testArrayListHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        List&lt;Object[]&gt; studentList = runner.query(sql, <span class="keyword">new</span> ArrayListHandler());</span><br><span class="line">        <span class="keyword">for</span> (Object[] student : studentList) &#123;</span><br><span class="line">            System.out.println(student[<span class="number">0</span>] + <span class="string">&quot; &quot;</span> + student[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把结果集中的第一行数据转成对象数组。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testArrayHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        Object[] student = runner.query(sql, <span class="keyword">new</span> ArrayHandler());</span><br><span class="line">        System.out.println(student[<span class="number">0</span>] + <span class="string">&quot; &quot;</span> + student[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ColumnListHandler：将结果集中某一列的数据存放到List中。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testColumnListHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        List&lt;Object&gt; list = runner.query(sql, <span class="keyword">new</span> ColumnListHandler&lt;&gt;(<span class="string">&quot;sname&quot;</span>));</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//KeyedHandler(name)：将结果集中的每一行数据都封装到一个Map里，再把这些map再存到一个map里，其key为指定的key。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testKeyedHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        Map&lt;Integer,Map&gt; map = (Map) qr.query(sql, <span class="keyword">new</span> KeyedHandler(<span class="string">&quot;sno&quot;</span>));</span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;Integer, Map&gt; me : map.entrySet())&#123;</span><br><span class="line">            <span class="keyword">int</span>  id = me.getKey();</span><br><span class="line">            Map&lt;String,Object&gt; innermap = me.getValue();</span><br><span class="line">            <span class="keyword">for</span>(Map.Entry&lt;String, Object&gt; innerme : innermap.entrySet())&#123;</span><br><span class="line">                String columnName = innerme.getKey();</span><br><span class="line">                Object value = innerme.getValue();</span><br><span class="line">                System.out.println(columnName + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">                &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;----------------&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//MapHandler：将结果集中的第一行数据封装到一个Map里，key是列名，value就是对应的值。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testMapHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        Map&lt;String, Object&gt; query = runner.query(sql, <span class="keyword">new</span> MapHandler());</span><br><span class="line">        System.out.println(query);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//MapListHandler：将结果集中的每一行数据都封装到一个Map里，然后再存放到List</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testMapListHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//将数据源传递给QueryRunner，QueryRunner内部通过数据源获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner(JdbcUtil_Druid.ds);</span><br><span class="line">        String sql = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; query = runner.query(sql, <span class="keyword">new</span> MapListHandler());</span><br><span class="line">        System.out.println(query);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//add();</span></span><br><span class="line">            <span class="comment">//update();</span></span><br><span class="line">            <span class="comment">//delete();</span></span><br><span class="line">            <span class="comment">//findOne();</span></span><br><span class="line">            <span class="comment">//findAll();</span></span><br><span class="line">            <span class="comment">//testArrayListHandler();</span></span><br><span class="line">            <span class="comment">//testArrayHandler();</span></span><br><span class="line">            <span class="comment">//testColumnListHandler();</span></span><br><span class="line">            <span class="comment">//testKeyedHandler();</span></span><br><span class="line"><span class="comment">//            testMapHandler();</span></span><br><span class="line">            testMapListHandler();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="三、ResultSetHandler接口使用讲解"><a href="#三、ResultSetHandler接口使用讲解" class="headerlink" title="三、ResultSetHandler接口使用讲解"></a>三、ResultSetHandler接口使用讲解</h2><p>　　该接口用于处理java.sql.ResultSet，将数据按要求转换为另一种形式。<br>　　ResultSetHandler接口提供了一个单独的方法：Object handle (java.sql.ResultSet .rs)</p><h3 id="3-1、ResultSetHandler接口的实现类"><a href="#3-1、ResultSetHandler接口的实现类" class="headerlink" title="3.1、ResultSetHandler接口的实现类"></a>3.1、ResultSetHandler接口的实现类</h3><ul><li>ArrayHandler：把结果集中的<strong>第一行</strong>数据转成对象数组。</li><li>ArrayListHandler：把结果集中的每一行数据都转成一个数组，再存放到List中。</li><li>BeanHandler：将结果集中的<strong>第一行</strong>数据封装到一个对应的JavaBean实例中。</li><li>BeanListHandler：将结果集中的每一行数据都封装到一个对应的JavaBean实例中，存放到List里。</li><li>ColumnListHandler：将结果集中某一列的数据存放到List中。</li><li>KeyedHandler(name)：将结果集中的每一行数据都封装到一个Map里，再把这些map再存到一个map里，其key为指定的key。</li><li>MapHandler：将结果集中的第一行数据封装到一个Map里，key是列名，value就是对应的值。</li><li>MapListHandler：将结果集中的每一行数据都封装到一个Map里，然后再存放到List</li></ul><h3 id="3-2、测试dbutils各种类型的处理器"><a href="#3-2、测试dbutils各种类型的处理器" class="headerlink" title="3.2、测试dbutils各种类型的处理器"></a>3.2、测试dbutils各种类型的处理器</h3><p><strong>代码在上</strong></p><h2 id="三、DbUtils类使用讲解"><a href="#三、DbUtils类使用讲解" class="headerlink" title="三、DbUtils类使用讲解"></a>三、DbUtils类使用讲解</h2><p>　　DbUtils ：提供如关闭连接、装载JDBC驱动程序等常规工作的工具类，里面的所有方法都是静态的。主要方法如下：<br>　　public static void close(…) throws java.sql.SQLException：　DbUtils类提供了三个重载的关闭方法。这些方法检查所提供的参数是不是NULL，如果不是的话，它们就关闭Connection、Statement和ResultSet。<br>　　public static void closeQuietly(…): 这一类方法不仅能在Connection、Statement和ResultSet为NULL情况下避免关闭，还能隐藏一些在程序中抛出的SQLEeception。<br>　　public static void commitAndCloseQuietly(Connection conn)： 用来提交连接，然后关闭连接，并且在关闭连接时不抛出SQL异常。<br>　　public static boolean loadDriver(java.lang.String driverClassName)：这一方装载并注册JDBC驱动程序，如果成功就返回true。使用该方法，你不需要捕捉这个异常ClassNotFoundException。</p><h2 id="四、JDBC开发中的事务处理"><a href="#四、JDBC开发中的事务处理" class="headerlink" title="四、JDBC开发中的事务处理"></a>四、JDBC开发中的事务处理</h2><p>　　在开发中，对数据库的多个表或者对一个表中的多条数据执行更新操作时要保证对多个更新操作要么同时成功，要么都不成功，这就涉及到对多个更新操作的事务管理问题了。比如银行业务中的转账问题，A用户向B用户转账100元，假设A用户和B用户的钱都存储在Account表，那么A用户向B用户转账时就涉及到同时更新Account表中的A用户的钱和B用户的钱，用SQL来表示就是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 update account set money&#x3D;money-100 where name&#x3D;&#39;A&#39;</span><br><span class="line">2 update account set money&#x3D;money+100 where name&#x3D;&#39;B&#39;</span><br></pre></td></tr></table></figure><p>为了能够让事务处理更加优雅，我们使用ThreadLocal类进行改造，<strong>ThreadLocal一个容器，向这个容器存储的对象，在当前线程范围内都可以取得出来，向ThreadLocal里面存东西就是向它里面的Map存东西的，然后ThreadLocal把这个Map挂到当前的线程底下，这样Map就只属于这个线程了</strong></p><p><strong>AccountDao2：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> entiy.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> util.JdbcUtil_DruidWithThreadLocal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/6/11 9:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDao2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Account account)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">        String sql = <span class="string">&quot;update account set name=?,money=? where id=?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;account.getName(),account.getMoney(),account.getId()&#125;;</span><br><span class="line">        <span class="comment">//JdbcUtils2.getConnection()获取当前线程中的Connection对象</span></span><br><span class="line">        qr.update(JdbcUtil_DruidWithThreadLocal.getConnection(),sql, params);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">find</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">        String sql = <span class="string">&quot;select * from account where id=?&quot;</span>;</span><br><span class="line">        <span class="comment">//JdbcUtils2.getConnection()获取当前线程中的Connection对象</span></span><br><span class="line">        <span class="keyword">return</span> (Account) qr.query(JdbcUtil_DruidWithThreadLocal.getConnection(),sql, id, <span class="keyword">new</span> BeanHandler(Account.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>AccountService2:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dao.AccountDao2;</span><br><span class="line"><span class="keyword">import</span> entiy.Account;</span><br><span class="line"><span class="keyword">import</span> util.JdbcUtil_DruidWithThreadLocal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/6/11 9:54</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountService2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(<span class="keyword">int</span> sourceid, <span class="keyword">int</span> tartgetid, <span class="keyword">float</span> money)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//开启事务，在业务层处理事务，保证dao层的多个操作在同一个事务中进行</span></span><br><span class="line">            JdbcUtil_DruidWithThreadLocal.startTransaction();</span><br><span class="line">            AccountDao2 dao = <span class="keyword">new</span> AccountDao2();</span><br><span class="line"></span><br><span class="line">            Account source = dao.find(sourceid);</span><br><span class="line">            Account target = dao.find(tartgetid);</span><br><span class="line">            source.setMoney(source.getMoney()-money);</span><br><span class="line">            target.setMoney(target.getMoney()+money);</span><br><span class="line"></span><br><span class="line">            dao.update(source);</span><br><span class="line">            <span class="comment">//模拟程序出现异常让事务回滚</span></span><br><span class="line">            <span class="keyword">int</span> x = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">            dao.update(target);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//SQL正常执行之后提交事务</span></span><br><span class="line">            JdbcUtil_DruidWithThreadLocal.commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;回滚&quot;</span>);</span><br><span class="line">            <span class="comment">//出现异常之后就回滚事务</span></span><br><span class="line">            JdbcUtil_DruidWithThreadLocal.rollback();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//关闭数据库连接</span></span><br><span class="line">            JdbcUtil_DruidWithThreadLocal.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//transfer(&quot;A&quot;, &quot;B&quot;, (float) 100.0);</span></span><br><span class="line">        transfer(<span class="number">1</span>, <span class="number">2</span>, (<span class="keyword">float</span>) <span class="number">100.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>JdbcUtil_DruidWithThreadLocal:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/6/11 9:44</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtil_DruidWithThreadLocal</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用ThreadLocal存储当前线程中的Connection对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Connection&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;Connection&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在java中，编写数据库连接池需实现java.sql.DataSource接口，每一种数据库连接池都是DataSource接口的实现</span></span><br><span class="line"><span class="comment">     * DBCP连接池就是java.sql.DataSource接口的一个具体实现</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//在静态代码块中创建数据库连接池</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//加载dbcpconfig.properties配置文件</span></span><br><span class="line">            InputStream in = JdbcUtil_DBCP.class.getClassLoader().getResourceAsStream(<span class="string">&quot;resource/db.properties&quot;</span>);</span><br><span class="line">            Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">            prop.load(in);</span><br><span class="line">            <span class="comment">//创建数据源</span></span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(prop);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: getConnection</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: 从数据源中获取数据库连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Connection</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//从当前线程中获取Connection</span></span><br><span class="line">        Connection connection = threadLocal.get();</span><br><span class="line">        <span class="keyword">if</span> (connection == <span class="keyword">null</span>)&#123;</span><br><span class="line">            connection = ds.getConnection();</span><br><span class="line">            threadLocal.set(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  connection;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: startTransaction</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: 开启事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">startTransaction</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Connection conn =  threadLocal.get();</span><br><span class="line">            <span class="keyword">if</span>(conn==<span class="keyword">null</span>)&#123;</span><br><span class="line">                conn = getConnection();</span><br><span class="line">                <span class="comment">//把 conn绑定到当前线程上</span></span><br><span class="line">                threadLocal.set(conn);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//开启事务</span></span><br><span class="line">            conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: rollback</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>:回滚事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rollback</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//从当前线程中获取Connection</span></span><br><span class="line">            Connection conn = threadLocal.get();</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//回滚事务</span></span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: commit</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>:提交事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//从当前线程中获取Connection</span></span><br><span class="line">            Connection conn = threadLocal.get();</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//提交事务</span></span><br><span class="line">                conn.commit();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: close</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>:关闭数据库连接(注意，并不是真的关闭，而是把连接还给数据库连接池)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//从当前线程中获取Connection</span></span><br><span class="line">            Connection conn = threadLocal.get();</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">                <span class="comment">//解除当前线程上绑定conn</span></span><br><span class="line">                threadLocal.remove();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: getDataSource</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: 获取数据源</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> DataSource</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//从数据源中获取数据库连接</span></span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Method</span>: release</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: 释放资源，</span></span><br><span class="line"><span class="comment">     * 释放的资源包括Connection数据库连接对象，负责执行SQL命令的Statement对象，存储查询结果的ResultSet对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection connection, Statement st, ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭存储查询结果的ResultSet对象</span></span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭负责执行SQL命令的Statement对象</span></span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(connection!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭Connection数据库连接对象</span></span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">executeUpdate</span><span class="params">(String sql, Object[] params)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pstmt = createPreparedStatement(sql, params);</span><br><span class="line">            <span class="keyword">int</span> count = pstmt.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtil_DBCP.release(getConnection(), pstmt, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ResultSet <span class="title">executeQuery</span><span class="params">(String sql, Object[] params)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pstmt = createPreparedStatement(sql, params);</span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            <span class="keyword">return</span> rs;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取PreparedStatement对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PreparedStatement <span class="title">createPreparedStatement</span><span class="params">(String sql, Object[] params)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException </span>&#123;</span><br><span class="line">        pstmt = getConnection().prepareStatement(sql);</span><br><span class="line">        <span class="keyword">if</span> (params != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                pstmt.setObject(i+<span class="number">1</span>, params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  pstmt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSP环境搭建和入门</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/1.JSP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%92%8C%E5%85%A5%E9%97%A8/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/1.JSP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%92%8C%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="JSP环境搭建和入门"><a href="#JSP环境搭建和入门" class="headerlink" title="JSP环境搭建和入门"></a>JSP环境搭建和入门</h2><h3 id="1-tomcat的目录"><a href="#1-tomcat的目录" class="headerlink" title="1.tomcat的目录"></a>1.tomcat的目录</h3><p>bin:可执行文件（startup.bat   shutdown.bat）</p><p>conf：配置文件（server.conf）</p><p>lib：tomcat依赖的jar文件</p><p>log：日志文件（记录出错信息等）</p><p>temp：临时文件</p><p>webapps：可执行的项目（我们开发的项目 放到该目录）</p><p>work：存放有JSP翻译成的Java，以及编辑成的class文件。</p><p>默认端口号：8080</p><p>修改端口号：server.conf</p><p>启动：去bin目录双击startup.bat</p><p>访问localhost:8080</p><p>默认访问：web.xml中设置的</p><p>配置虚拟路劲：</p><p>第一种方式：server.xml中的<host>目录中，需要重启tomcat</p><p>​    配置：<Context docBase='项目实际路径' path='绝对路劲或者相对路径（相对于webapps）'/></p><p>第二种方式：在E:\tomcat8\apache-tomcat-8.0.50\conf\Catalina\localhost中新增一个文件，文件名为“项目名.xml”，新增一行：<Context docBase='项目实际路径' path='绝对路劲或者相对路径（相对于webapps）'/>。</p><h3 id="2-JSP执行流程"><a href="#2-JSP执行流程" class="headerlink" title="2.JSP执行流程"></a>2.JSP执行流程</h3><p>jsp—翻译成Java（Servlet）—编译成class文件</p><p>jsp和servlet可以相互转换</p><p>第一次访问比较慢，要生成Java和class文件。后续比较快，可以直接访问class文件。</p><p>如果修改了jsp文件，就需要再次生成class文件。</p><h3 id="3-JSP实际开发"><a href="#3-JSP实际开发" class="headerlink" title="3.JSP实际开发"></a>3.JSP实际开发</h3><p>​    创建项目：<a href="https://blog.csdn.net/a145127/article/details/84893355">https://blog.csdn.net/a145127/article/details/84893355</a></p><p>​    或者查看自己笔记</p><p>统一字符集编码：</p><p>​    1.设置JSP文件的编码：jsp文件中的pageEncoding属性。</p><p>​    2.设置浏览器读取JSP的编码：jsp文件中的content属性。</p><p>​    一般设置成一样的编码，推荐UTF-8</p><p>​    文本编码：</p><p>​        1.将整个IDEA中的文件 统一设置</p><p>​        2.设置某一个项目</p><p>​        3.设置单独文件</p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12.过滤器.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/12.%E8%BF%87%E6%BB%A4%E5%99%A8/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/12.%E8%BF%87%E6%BB%A4%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>创建多滤器：建一个类，实现一个Filter接口</p><p>把一个类变成具有特殊功能的类一般有三种方法：</p><p>​    1.继承类</p><p>​    2.实现接口</p><p>​    3.添加注解</p><p>init()、destroy() 原理、执行时机 同Servlet</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1590046002491.png" alt="1590046002491"></p><p>配置过滤器，类似servlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>filter.MyFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/MyServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">和servlet一样，通过<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>--&gt;找到<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>--&gt;然后通过<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>--&gt;找到<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>过滤器所在的地方。</span><br><span class="line">    过滤的东西由<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>决定。</span><br><span class="line">    只拦截 访问MyServlet的请求</span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/MyServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">拦截一切请求（每一次访问 都会被拦截）</span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><strong>通过doFilter()处理拦截，并且通过chain.doFilter(request, response);放行</strong></p><p>dispatcher请求方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REQUEST：拦截HTTP请求 get post</span><br><span class="line">FORWARD：只拦截 通过 请求转发方式的请求</span><br><span class="line"></span><br><span class="line">INCLUDE:只拦截拦截通过 request.getRequestDispatcher(&quot;&quot;).include()  、通过&lt;jsp:include page&#x3D;&quot;...&quot; &#x2F;&gt;此种方式发出的请求</span><br><span class="line">ERROR：只拦截&lt;error-page&gt;发出的请求</span><br></pre></td></tr></table></figure><p>过滤器中doFilter方法参数：ServletRequest<br>在Servlet中的方法参数：HttpServletRequest</p><p>过滤器链(多个过滤器)<br>可以配置多个过滤器，过滤器的先后顺序 是由 <filter-mapping>的位置 决定</p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11.JSTL表达式.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/11.JSTL%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/11.JSTL%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="JSTL表达式"><a href="#JSTL表达式" class="headerlink" title="JSTL表达式"></a>JSTL表达式</h2><p>需要引入2个jar ：jstl.jar   standard.jar<br>引入tablib  :<br>&lt;%@ taglib uri=”<a href="http://java.sun.com/jsp/jstl/core&quot;">http://java.sun.com/jsp/jstl/core&quot;</a> prefix=”c” %&gt;<br>其中prefix=”c” :前缀</p><p>核心标签库：  通用标签库、条件标签库  迭代标签库</p><p>a.通用标签库<br>&lt;c:set&gt;赋值<br>i:<br>在某个作用域之中（4个范围对象），给某个变量赋值<br>    &lt;%–<br>        request.setAttribute(“name”, “zhangsan”) ;<br>    –%&gt;<br>        &lt;c:set var=”name”    value=”zhangsan”   scope=”request”/&gt;<br>        ${requestScope.name }</p><p>&lt;c:set var=”变量名”    value=”变量值”   scope=”4个范围对象的作用域”/&gt;</p><p>ii:<br>给普通对象赋值<br>在某个作用域之中（4个范围对象），给某个对象的属性复制 （此种写法，不能指定scope属性）</p><pre><code>    &lt;c:set target=&quot;$&#123;requestScope.student&#125;&quot; property=&quot;sname&quot;  value=&quot;zxs&quot; /&gt;</code></pre><p>给map对象赋值<br>        &lt;c:set target=”${requestScope.countries}” property=”cn”  value=”中国” /&gt;</p><p>&lt;c:set target=”对象” property=”对象的属性”  value=”赋值” /&gt;</p><p>注意 &lt;c:set&gt;可以给不存在的变量赋值 （但不能给不存在的对象赋值）</p><p>&lt;c:out&gt;  ：显示<br>true:&lt;c:out value=’<a href="https://www.baidu.com">百度</a>‘ default=”当value为空的，显示的默认值” escapeXml=”true” /&gt;<br>false：    &lt;c:out value=’<a href="https://www.baidu.com">百度</a>‘ escapeXml=”false” /&gt;</p><p>&lt;c:remove &gt;：删除属性<br>&lt;c:remove var=”a” scope=”request”/&gt;</p><p>选择：<br>if(boolean)<br>单重选择<br>&lt;c:if test=”” &gt;</p><p>if else if… esle if… else  /switch</p><p>&lt;c:choose&gt;<br>    &lt;c:when test=”…”&gt;   </c:when><br>    &lt;c:when test=”…”&gt;   </c:when><br>    &lt;c:when test=”…”&gt;   </c:when><br>    &lt;c:otherwise&gt;   </c:otherwise><br></c:choose></p><p>在使用 test=”” 一定要注意后面是否有空格<br>例如：test=”${10&gt;2 }”   true<br>     test=”${10&gt;2 } “  非true</p><p>循环（迭代标签库）<br>for(int i=0;i&lt;5;i++)<br>    &lt;c:forEach  var=”name” items=”${requestScope.names }” &gt;<br>        -${name }-<br>    </c:forEach></p><p>for(String str:names)<br>    &lt;c:forEach  var=”student” items=”${requestScope.students }” &gt;<br>        ${student.sname }-${student.sno }</p><pre><code>&lt;/c:forEach&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>13.监听器.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/13.%E7%9B%91%E5%90%AC%E5%99%A8/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/13.%E7%9B%91%E5%90%AC%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h2><p><img src="https://images0.cnblogs.com/blog2015/449064/201503/301700508104329.jpg"></p><p>参考博客：<a href="https://www.cnblogs.com/w-wfy/p/6425357.html">https://www.cnblogs.com/w-wfy/p/6425357.html</a></p><p>1 什么是web监听器？</p><p>　　web监听器是一种Servlet中的特殊的类，它们能帮助开发者监听web中的特定事件，比如ServletContext,HttpSession,ServletRequest的创建和销毁；变量的创建、销毁和修改等。可以在某些动作前后增加处理，实现监控。</p><p>2 监听器常用的用途</p><p>　　通常使用Web监听器做以下的内容：</p><p>　　统计在线人数，利用HttpSessionLisener</p><p>　　加载初始化信息：利用ServletContextListener</p><p>　　统计网站访问量</p><p>　　实现访问监控</p><p>3 接下里看看一个监听器的创建以及执行过程</p><p> 　　首先需要创建一个监听器，实现某种接口，例如我想实现一个对在线人数的监控，可以创建如下的监听器：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> userNumber = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent arg0)</span> </span>&#123;</span><br><span class="line">        userNumber++;</span><br><span class="line">        arg0.getSession().setAttribute(<span class="string">&quot;userNumber&quot;</span>, userNumber);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent arg0)</span> </span>&#123;</span><br><span class="line">        userNumber--;</span><br><span class="line">        arg0.getSession().setAttribute(<span class="string">&quot;userNumber&quot;</span>, userNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　然后在web.xml中配置该监听器，在web-app中添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;listener&gt;</span><br><span class="line">      &lt;listener-class&gt;com.test.MyListener&lt;&#x2F;listener-class&gt;</span><br><span class="line">  &lt;&#x2F;listener&gt;</span><br></pre></td></tr></table></figure><p>　在JSP中添加访问人数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    在线人数：&lt;%&#x3D;session.getAttribute(&quot;userNumber&quot;) %&gt;&lt;br&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure><p>当我使用我的浏览器访问时，执行结果如下：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1590046996682.png" alt="1590046996682"></p><p>由于打开另一个浏览器访问，相当于另一个会话，因此在线人数会增加。</p><p>　　对于3.0版本的Servlet来说，还支持使用注解的方式进行配置。</p><p>　　那么接下来看看都有哪些监听器以及方法吧！</p><h2 id="监听器的分类"><a href="#监听器的分类" class="headerlink" title="监听器的分类"></a>监听器的分类</h2><p>　　1 按照监听的对象划分：</p><p>　　按照监听对象的不同可以划分为三种：</p><p>　　ServletContext监控：对应监控application内置对象的创建和销毁。</p><p>　　当web容器开启时，执行contextInitialized方法；当容器关闭或重启时，执行contextDestroyed方法。</p><p>　　实现方式：直接实现ServletContextListener接口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class MyServletContextListener implements ServletContextListener&#123;</span><br><span class="line">    public void contextDestroyed(ServletContextEvent sce) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public void contextInitialized(ServletContextEvent sce) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>HttpSession监控：对应监控session内置对象的创建和销毁。</p><p>　　当打开一个新的页面时，开启一个session会话，执行sessionCreated方法；当页面关闭session过期时，或者容器关闭销毁时，执行sessionDestroyed方法。</p><p>　　实现方式：直接实现HttpSessionListener接口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HttpSession监控：对应监控session内置对象的创建和销毁。</span><br><span class="line"></span><br><span class="line">　　当打开一个新的页面时，开启一个session会话，执行sessionCreated方法；当页面关闭session过期时，或者容器关闭销毁时，执行sessionDestroyed方法。</span><br><span class="line"></span><br><span class="line">　　实现方式：直接实现HttpSessionListener接口：</span><br></pre></td></tr></table></figure><p>ServletRequest监控：对应监控request内置对象的创建和销毁。</p><p>　　当访问某个页面时，出发一个request请求，执行requestInitialized方法；当页面关闭时，执行requestDestroyed方法。</p><p>　　实现方式，直接实现ServletRequestListener接口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class MyServletRequestListener implements ServletRequestListener&#123;</span><br><span class="line">    public void requestDestroyed(ServletRequestEvent arg0) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public void requestInitialized(ServletRequestEvent arg0) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2 按照监听事件划分：</p><p>　　2.1 监听事件自身的创建和销毁：同上面的按对象划分。</p><p>　　2.2 监听属性的新增、删除和修改：</p><p>　　监听属性的新增、删除和修改也是划分成三种，分别针对于ServletContext、HttpSession、ServletRequest对象：</p><p>　　ServletContext，实现ServletContextAttributeListener接口：</p><p>　　通过调用ServletContextAttribtueEvent的getName方法可以得到属性的名称。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class MyServletContextAttrListener implements ServletContextAttributeListener&#123;</span><br><span class="line"></span><br><span class="line">    public void attributeAdded(ServletContextAttributeEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In servletContext added :name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void attributeRemoved(ServletContextAttributeEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In servletContext removed :name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void attributeReplaced(ServletContextAttributeEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In servletContext replaced :name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>HttpSession，实现HttpSessionAttributeListener接口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class MyHttpSessionAttrListener implements HttpSessionAttributeListener&#123;</span><br><span class="line"></span><br><span class="line">    public void attributeAdded(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In httpsession added:name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void attributeRemoved(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In httpsession removed:name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void attributeReplaced(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In httpsession replaced:name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　ServletRequest，实现ServletRequestAttributeListener接口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class MyServletRequestAttrListener implements ServletRequestAttributeListener&#123;</span><br><span class="line"></span><br><span class="line">    public void attributeAdded(ServletRequestAttributeEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In servletrequest added :name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void attributeRemoved(ServletRequestAttributeEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In servletrequest removed :name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void attributeReplaced(ServletRequestAttributeEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;In servletrequest replaced :name &#x3D; &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　2.3 监听对象的状态：</p><p>　　针对某些POJO类，可以通过实现HttpSessionBindingListener接口，监听POJO类对象的事件。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class User implements HttpSessionBindingListener,Serializable&#123;</span><br><span class="line"></span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line">    </span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username &#x3D; username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password &#x3D; password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void valueBound(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;valueBound name: &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void valueUnbound(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;valueUnbound name: &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Session数据的钝化与活化：</p><p>　　由于session中保存大量访问网站相关的重要信息，因此过多的session数据就会服务器性能的下降，占用过多的内存。因此类似数据库对象的持久化，web容器也会把不常使用的session数据持久化到本地文件或者数据中。这些都是有web容器自己完成，不需要用户设定。</p><p>　　不用的session数据序列化到本地文件中的过程，就是钝化；</p><p>　　当再次访问需要到该session的内容时，就会读取本地文件，再次放入内存中，这个过程就是活化。</p><p>　　类似的，只要实现HttpSeesionActivationListener接口就是实现钝化与活化事件的监听：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class User implements HttpSessionBindingListener,</span><br><span class="line">HttpSessionActivationListener,Serializable&#123;</span><br><span class="line"></span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line">    </span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username &#x3D; username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password &#x3D; password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void valueBound(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;valueBound name: &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void valueUnbound(HttpSessionBindingEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;valueUnbound name: &quot;+hsbe.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void sessionDidActivate(HttpSessionEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;sessionDidActivate name: &quot;+hsbe.getSource());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void sessionWillPassivate(HttpSessionEvent hsbe) &#123;</span><br><span class="line">        System.out.println(&quot;sessionWillPassivate name: &quot;+hsbe.getSource());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java并发--线程并发基础常见问题</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91--%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%9F%BA%E7%A1%80%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91--%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%9F%BA%E7%A1%80%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发线程基础常见问题"><a href="#Java并发线程基础常见问题" class="headerlink" title="Java并发线程基础常见问题"></a>Java并发线程基础常见问题</h2><ol><li>有多少种线程实现方式?</li><li>实现Runnable接口和继承Thread类哪种更好？</li><li>一个线程调用两次start()会出现什么情况？为什么？</li><li>既然start（）方法会调用run()方法，为什么不直接调用run（）方法？</li><li>如何停止线程？</li><li>如何处理不可中断的阻塞？</li><li>线程有哪几种状态？生命周期是什么？</li><li>用程序实现交替打印0-100的奇偶数。</li><li>手写生产者消费者模式。</li><li>为什么wait()需要在同步代码块中使用，而sleep()不需要？</li><li>为什么线程通信的方法wait()、notify()、notifyAll()被定义在Object类中，而sleep（）定义在Thread类中？</li><li>如何选择用notify（）和notifyAll（）?</li><li>notifyAll()之后的线程都会再次抢锁，如果抢夺失败怎么办？</li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java并发--多线程概念的建立</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91--%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%A6%82%E5%BF%B5%E7%9A%84%E5%BB%BA%E7%AB%8B/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91--%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%A6%82%E5%BF%B5%E7%9A%84%E5%BB%BA%E7%AB%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发–多线程概念的建立"><a href="#Java并发–多线程概念的建立" class="headerlink" title="Java并发–多线程概念的建立"></a>Java并发–多线程概念的建立</h2><h3 id="1、什么是进程？"><a href="#1、什么是进程？" class="headerlink" title="1、什么是进程？"></a>1、什么是进程？</h3><p>​        进程是程序的真正运行实例，是操作系统资源分配的基本单位。</p><h3 id="2、什么是线程？"><a href="#2、什么是线程？" class="headerlink" title="2、什么是线程？"></a>2、什么是线程？</h3><p>​        线程是CPU的基本调度单位，每个线程执行的都是进程代码的某个片段。</p><h3 id="3、进程和线程的区别"><a href="#3、进程和线程的区别" class="headerlink" title="3、进程和线程的区别"></a>3、进程和线程的区别</h3><ol><li><p>概念不同</p><pre><code> 1. 进程是可以真正运行的程序实例，是操作系统资源分配的基本单位。线程是CPU的基本调度单位。</code></pre></li><li><p>内存共享方式不同</p><p>​    进程之间一般操作系统有分配独立的内存，不同进程之间无法访问，只能通过进程间通信IPC。线程操作系统不会分配独立的内存，线程之间共享进程的内存。线程独立的有自己独立的堆栈。</p><ol><li>数量不同</li><li>开销不同</li></ol></li></ol><p>相似点：生命周期</p><h3 id="4、Java语言和多线程的渊源"><a href="#4、Java语言和多线程的渊源" class="headerlink" title="4、Java语言和多线程的渊源"></a>4、Java语言和多线程的渊源</h3><p>​    即使不创建线程，在执行main方法的时候，JVM会自动创建其他线程。</p><pre><code> 1. Singal Dispatcher  //负责把操作系统发来的信号分发给适当的处理程序 2. Finalized    //负责对象的finalize（）方法 3. Reference Handler  //和GC、引用相关的线程 4. main   //主线程，用户程序的入口。</code></pre><h3 id="5、多线程"><a href="#5、多线程" class="headerlink" title="5、多线程"></a>5、多线程</h3><h4 id="5-1-什么是多线程？"><a href="#5-1-什么是多线程？" class="headerlink" title="5.1 什么是多线程？"></a>5.1 什么是多线程？</h4><p>​    如果一个程序允许两个或以上的线程，那么它就是多线程程序，多线程是指单个进程中运行多个线程。</p><h4 id="5-2-为什么使用多线程？"><a href="#5-2-为什么使用多线程？" class="headerlink" title="5.2 为什么使用多线程？"></a>5.2 为什么使用多线程？</h4><ul><li>最主要的目的是提高CPU利用率</li><li>提高处理速度</li><li>避免无效等待</li><li>提高用户体验</li></ul><h4 id="5-3-什么场景需要使用多线程？"><a href="#5-3-什么场景需要使用多线程？" class="headerlink" title="5.3 什么场景需要使用多线程？"></a>5.3 什么场景需要使用多线程？</h4><ul><li>为了同时处理多件不同的事</li><li>为了提高工作效率、处理能力。<ul><li>需要同时有很大并发量的时候。</li></ul></li></ul><h4 id="5-4-多线程带来的问题或局限"><a href="#5-4-多线程带来的问题或局限" class="headerlink" title="5.4 多线程带来的问题或局限"></a>5.4 多线程带来的问题或局限</h4><ol><li>性能问题：上下文切换带来的消耗</li><li>线程安全问题：包括数据安全问题（i++总数不一致）以及线程带来的活跃性问题（线程饥饿、死锁）。</li></ol><h3 id="6-、串行、并行、并发"><a href="#6-、串行、并行、并发" class="headerlink" title="6 、串行、并行、并发"></a>6 、串行、并行、并发</h3><ol><li><p>串行：</p><p>两个任务排队执行。</p></li><li><p>并行：</p><p>真正的同时运行在同一时刻，有多个任务同时执行。如在多核处理器上，有两个线程同时执行一段代码。</p></li><li><p>并发：</p><p>并发偏重于多个任务交替执行，多个任务有可能是串行的。v</p></li></ol><h3 id="7、高并发与多线程"><a href="#7、高并发与多线程" class="headerlink" title="7、高并发与多线程"></a>7、高并发与多线程</h3><p>高并发:代表一种状态，指在同一个时间点，有很多用户同时的访问同一 API 接口或者 Url 地址。</p><p>高并发指标：</p><ul><li>QPS：每秒查询数</li><li>带宽</li><li>PV（page view）</li><li>UV (Unique view)</li><li>并发连接数</li><li>服务器平均请求等待时间</li></ul><h3 id="8、同步与异步、阻塞与非阻塞"><a href="#8、同步与异步、阻塞与非阻塞" class="headerlink" title="8、同步与异步、阻塞与非阻塞"></a>8、同步与异步、阻塞与非阻塞</h3><p>同步：同步方法调用一旦开始，调用者必须等到方法调用返回后，才能继续后续的行为。</p><p>异步：异步方法调用更像是一个消息传递，一旦开始，方法调用会立即返回，调用者就可以继续后续的操作。</p><p>阻塞：比如一个线程占用了临界区资源，其他线程需要等待导致线程挂起，这种叫做阻塞。</p><p>非阻塞：强调没有一个线程可以妨碍其他线程执行，所有的线程都会尝试不断向前执行。</p><h3 id="9、临界区"><a href="#9、临界区" class="headerlink" title="9、临界区"></a>9、临界区</h3><p>临界区用来表示一种公共资源或者说共享数据，可以被多个线程使用，但是一次只能有一个线程使用它，一旦临界区资源被占用，其他线程想要使用这个资源必须等待。</p><h3 id="10、死锁、饥饿、活锁"><a href="#10、死锁、饥饿、活锁" class="headerlink" title="10、死锁、饥饿、活锁"></a>10、死锁、饥饿、活锁</h3><p>死锁：指两个或两个以上的线程由于竞争资源而互相等待导致阻塞的现象。</p><p>饥饿：指一个或多个线程因为种种原因无法获得所要的资源，导致一直无法执行。</p><p> 原因：</p><p>1.优先级比较低，导致资源不断被高优先级的抢占。</p><p> 2.某个线程一直占用资源不放。</p><p>活锁：线程都主动将资源释放给其他线程使用，导致资源不断的在线程间跳动，导致没有一个线程可以真正同时拿到所有资源正常执行。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线程各属性</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B8%83%EF%BC%89--%E7%BA%BF%E7%A8%8B%E5%90%84%E5%B1%9E%E6%80%A7/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B8%83%EF%BC%89--%E7%BA%BF%E7%A8%8B%E5%90%84%E5%B1%9E%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（七）–线程各属性"><a href="#Java并发（七）–线程各属性" class="headerlink" title="Java并发（七）–线程各属性"></a>Java并发（七）–线程各属性</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-属性概览"><a href="#1-属性概览" class="headerlink" title="1. 属性概览"></a>1. 属性概览</h3><p><img src="https://img-blog.csdnimg.cn/20200402100149361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70"></p><h3 id="2-线程ID"><a href="#2-线程ID" class="headerlink" title="2. 线程ID"></a>2. 线程ID</h3><p>每个线程都有自己的ID，用于标识不同的线程。</p><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Set thread ID */</span></span><br><span class="line">    tid = nextThreadID();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> threadSeqNumber;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">long</span> <span class="title">nextThreadID</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++threadSeqNumber;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>线程ID通过synchronized关键字修饰的方法里，进行先++自增。所以主线程ID不是０而是１，而我们自己创建的线程也不是２，因为JVM会自动帮我们创建一些守护线程，来为我们的用户线程提供服务。</p><h3 id="3-线程名称"><a href="#3-线程名称" class="headerlink" title="3. 线程名称"></a>3. 线程名称</h3><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Thread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       init(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="number">0</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> threadInitNumber;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">nextThreadNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> threadInitNumber++;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    checkAccess();</span><br><span class="line">    <span class="keyword">if</span> (name == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">&quot;name cannot be null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="comment">//这个判断线程是不是刚刚启动，如果不是，则不能修改native层的线程名字，</span></span><br><span class="line">    <span class="comment">//但是线程内部的Java名字可以修改。</span></span><br><span class="line">    <span class="keyword">if</span> (threadStatus != <span class="number">0</span>) &#123;</span><br><span class="line">        setNativeName(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-守护线程"><a href="#3-守护线程" class="headerlink" title="3. 守护线程"></a>3. 守护线程</h3><p>作用：给用户线程提供服务</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span>     daemon = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">this</span>.daemon = parent.isDaemon();</span><br></pre></td></tr></table></figure><p><strong>守护线程的三个特性：</strong></p><ul><li>线程类型默认继承自父线程</li><li>守护线程由JVM启动</li><li>不影响JVM退出，JVM退出只看用户线程是否执行完成。</li></ul><p><strong>守护线程和普通线程的区别：</strong></p><ul><li>整体无太大区别</li><li>唯一区别在于是否影响JVM退出。</li></ul><p>是否需要设置守护线程：不需要，因为把我们自己的线程设置为守护线程不安全，如果JVM看到只有守护线程，会自动关闭JVM，则会导致数据不一致等问题。</p><h3 id="4-线程优先级"><a href="#4-线程优先级" class="headerlink" title="4. 线程优先级"></a>4. 线程优先级</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MIN_PRIORITY = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> NORM_PRIORITY = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MAX_PRIORITY = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>在Java中，最小优先级为1，最大优先级为10，默认是5.</p><p>程序设计不应依赖于优先级：</p><ul><li>不同操作系统优先级不同</li><li>优先级会被操作系统改变</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现线程的方式</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89--%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89--%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（一）–实现线程的方式"><a href="#Java并发（一）–实现线程的方式" class="headerlink" title="Java并发（一）–实现线程的方式"></a>Java并发（一）–实现线程的方式</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-官方声明实现多线程有两种方式。"><a href="#1-官方声明实现多线程有两种方式。" class="headerlink" title="1. 官方声明实现多线程有两种方式。"></a>1. 官方声明实现多线程有两种方式。</h3><h4 id="1-1-通过继承Thread类，重写Thread类的run方法"><a href="#1-1-通过继承Thread类，重写Thread类的run方法" class="headerlink" title="1.1 通过继承Thread类，重写Thread类的run方法"></a>1.1 通过继承Thread类，重写Thread类的run方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendsThreadTest</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ExtendsThreadTest().start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-通过实现Runnable接口，把实例作为参数传递给Thread类"><a href="#1-2-通过实现Runnable接口，把实例作为参数传递给Thread类" class="headerlink" title="1.2 通过实现Runnable接口，把实例作为参数传递给Thread类"></a>1.2 通过实现Runnable接口，把实例作为参数传递给Thread类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RunnableTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> RunnableTest()).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-两种方式对比"><a href="#2-两种方式对比" class="headerlink" title="2. 两种方式对比"></a>2. 两种方式对比</h3><p>方法二更好：</p><ol><li>具体执行的任务run方法与Thread类耦合性更低。</li><li>节约资源，使用第一种方法每次都要创建、销毁线程，使用Runnable方式利于后面使用线程池来节约系统资源。</li><li>Java单继承原因，使用继承Thread类之后就不能继承其他类，扩展性降低。</li></ol><p>本质区别：</p><p>源码中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (target != <span class="keyword">null</span>) &#123;</span><br><span class="line">            target.run();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>实现Runnable传入一个Runnable实例参数到构造函数。</p><p>方法一是重写整个run()方法，</p><p>方法二是最终调用target.run()方法。</p><h3 id="3-两种方法一起使用的结果是什么？"><a href="#3-两种方法一起使用的结果是什么？" class="headerlink" title="3. 两种方法一起使用的结果是什么？"></a>3. 两种方法一起使用的结果是什么？</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateThreadBothTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Runnable实例虽然传入，但是整个run方法被重写，所以只会输出下面的1.</p><p>==总结==：</p><p>​    通常说实现多线程的方法有两种，Oracle官方也是这么声明，</p><p>​    准确的来说，创建线程只有一种方法就是构造Thread类，而实现线程的执行单元有两种方式：</p><pre><code> 1. 通过继承Thread类，重写Thread类的run方法 2. 通过实现Runnable接口，把实例作为参数传递给Thread类</code></pre><h3 id="4-错误说法"><a href="#4-错误说法" class="headerlink" title="4. 错误说法"></a>4. 错误说法</h3><ol><li><p>线程池</p><p>​    底层也是通过new Thread来实现。不能成为一种创建线程的方法。</p></li><li><p>通过Callable和FutureTask创建线程</p><p>​    底层也是通过实现Runnable接口来实现。不能成为一种创建线程的方法。</p></li><li><p>定时器</p></li><li><p>匿名内部类</p></li><li><p>Lambda表达式</p></li></ol><h3 id="5-学习编程的途径"><a href="#5-学习编程的途径" class="headerlink" title="5.学习编程的途径"></a>5.学习编程的途径</h3><p>宏观上：</p><ol><li>不能单看工作年限</li><li>要有责任心，不放过任何bug，找到原因并解决</li><li>主动，不断重构、优化、学习、总结。</li><li>敢于挑战技术难题，不要畏惧难点、没有接触的点。</li></ol><p>微观上：</p><ol><li>看经典书籍</li><li>看官方文档</li><li>英文搜Google和StackOverflow</li><li>多动手实践，多写demo，尝试用到项目中。</li><li>学习开源项目，多分析源码。</li></ol><h3 id="6-如何在业务开发中成长"><a href="#6-如何在业务开发中成长" class="headerlink" title="6. 如何在业务开发中成长"></a>6. 如何在业务开发中成长</h3><ol><li>在业务中沉淀，了解业务模型</li><li>在技术中深入</li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于停止线程</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89--%E5%85%B3%E4%BA%8E%E5%81%9C%E6%AD%A2%E7%BA%BF%E7%A8%8B/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89--%E5%85%B3%E4%BA%8E%E5%81%9C%E6%AD%A2%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（三）–关于停止线程"><a href="#Java并发（三）–关于停止线程" class="headerlink" title="Java并发（三）–关于停止线程"></a>Java并发（三）–关于停止线程</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-原理介绍"><a href="#1-原理介绍" class="headerlink" title="1. 原理介绍"></a>1. 原理介绍</h3><p>​    使用interrupt来通知，而不是强制。</p><h3 id="2-停止线程的实践"><a href="#2-停止线程的实践" class="headerlink" title="2. 停止线程的实践"></a>2. 停止线程的实践</h3><h4 id="2-1正确的停止方法"><a href="#2-1正确的停止方法" class="headerlink" title="2.1正确的停止方法"></a>2.1正确的停止方法</h4><h5 id="2-2-1-普通情况"><a href="#2-2-1-普通情况" class="headerlink" title="2.2.1 普通情况"></a>2.2.1 普通情况</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/30 18:54</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> run方法里面没有sleep或者wait方法时，停止线程。打印最大整数下所有10000的倍数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopThreadTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ( num &lt;= Integer.MAX_VALUE / <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (num % <span class="number">10000</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(num + <span class="string">&quot;是10000的倍数 &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            num++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;任务执行完成！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> StopThreadTest());</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不使用interrupt()方法时的运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135621958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585617246638"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/30 18:54</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> run方法里面没有sleep或者wait方法时，停止线程。打印最大整数下所有10000的倍数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopThreadTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ( num &lt;= Integer.MAX_VALUE / <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (num % <span class="number">10000</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(num + <span class="string">&quot;是10000的倍数 &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            num++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;任务执行完成！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> StopThreadTest());</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        t.interrupt();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是使用了interrupt()方法的运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135621958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585617281429"></p><p>可以发现使用和没使用的运行结果都一样，interrupt()方法只是给程序一个中断信号。</p><p>再加上判断条件，检测当前线程是否被中断：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/30 18:54</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> run方法里面没有sleep或者wait方法时，停止线程。打印最大整数下所有10000的倍数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopThreadTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!Thread.currentThread().isInterrupted() &amp;&amp; num &lt;= Integer.MAX_VALUE / <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (num % <span class="number">10000</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(num + <span class="string">&quot;是10000的倍数 &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            num++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;任务执行完成！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> StopThreadTest());</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        t.interrupt();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>加了判断条件后运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135729573.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585617333588"></p><h5 id="2-2-2-在阻塞情况下中断线程"><a href="#2-2-2-在阻塞情况下中断线程" class="headerlink" title="2.2.2 在阻塞情况下中断线程"></a>2.2.2 在阻塞情况下中断线程</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 9:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>   带有sleep方法的中断</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopThreadWithSleepTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Runnable runnable = ()-&gt;&#123;</span><br><span class="line">            <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (num &lt;= <span class="number">300</span> &amp;&amp; !Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (num % <span class="number">100</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        System.out.println(num + <span class="string">&quot;是100的倍数&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    num++;</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135753693.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585619081569"></p><p>可以看到执行完成，报出sleep interrupted异常。</p><h5 id="2-2-3-线程每次迭代后都阻塞的情况下中断"><a href="#2-2-3-线程每次迭代后都阻塞的情况下中断" class="headerlink" title="2.2.3 线程每次迭代后都阻塞的情况下中断"></a>2.2.3 线程每次迭代后都阻塞的情况下中断</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 9:48</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> 每次循环都调用sleep或wait方法，那么不需要每次迭代都检测是否被中断</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopThreadWithSleepEveryTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Runnable runnable = ()-&gt;&#123;</span><br><span class="line">            <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (num &lt;= <span class="number">300</span> &amp;&amp; !Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (num % <span class="number">100</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        System.out.println(num + <span class="string">&quot;是100的倍数&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    num++;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135818181.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585619580266"></p><p>我们发现，打印时间，较慢，大部分时间消耗在循环中的休眠10毫秒中，所以我们取消检测程序是否被中断的判断：</p><p>发现运行结果没有变化，所以，当每次循环都调用sleep或wait方法，那么不需要每次迭代都检测是否被中断。</p><h5 id="2-2-4-TryCatch放到while里面的问题"><a href="#2-2-4-TryCatch放到while里面的问题" class="headerlink" title="2.2.4 TryCatch放到while里面的问题"></a>2.2.4 TryCatch放到while里面的问题</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 9:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> 把TryCatch放到while中，会出现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopThreadTryCatchProblemTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Runnable runnable = () -&gt; &#123;</span><br><span class="line">            <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (num &lt;= <span class="number">10000</span> &amp;&amp; !Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (num % <span class="number">100</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    System.out.println(num + <span class="string">&quot;是100的倍数&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                num++;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135841701.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585620434689"></p><p>可以看到，中断后程序继续运行。</p><p><strong>原因:sleep函数会把interrupt标志位清除,所以程序找不到被中断的迹象。</strong></p><h5 id="2-2-5-停止线程的两种最佳实践"><a href="#2-2-5-停止线程的两种最佳实践" class="headerlink" title="2.2.5 停止线程的两种最佳实践"></a>2.2.5 停止线程的两种最佳实践</h5><p><strong>1.传递中断</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 10:33</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> catch了InterruptedException之后优先选择：</span></span><br><span class="line"><span class="comment"> * 在方法签名中抛出异常，这样run()就会强制try/catch</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RightWayStopThreadTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span> &amp;&amp; !Thread.currentThread().isInterrupted())&#123;</span><br><span class="line">            method();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> RightWayStopThreadTest());</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135902630.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585622394230"></p><p>发现抛出异常，但是程序没有被中断，sleep()会把interrupt标志位清除。</p><p>于是我们catch了InterruptedException之后优先选择：</p><ul><li>在方法签名中抛出异常，这样run()就会强制try/catch</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 10:33</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> catch了InterruptedException之后优先选择：</span></span><br><span class="line"><span class="comment"> * 在方法签名中抛出异常，这样run()就会强制try/catch</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RightWayStopThreadTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span> &amp;&amp; !Thread.currentThread().isInterrupted())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;go&quot;</span>);</span><br><span class="line">                method();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日志&quot;</span>);</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> RightWayStopThreadTest());</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200331135922811.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585623135261"></p><p><strong>这样我们可以在run()方法做完事的手续处理。</strong></p><p><strong>2.恢复中断</strong></p><p>在catch子语句中调用Thread.currentThread.interrupt()来</p><ul><li>设置中断状态，以便在后续的执行中，依然能够检查到刚才发生了中断，</li><li>然后补上中断，以便跳出</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 10:56</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> 在catch子语句中调用Thread.currentThread.interrupt()来</span></span><br><span class="line"><span class="comment"> * 设置中断状态，以便在后续的执行中，依然能够检查到刚才发生了中断，</span></span><br><span class="line"><span class="comment"> * 然后补上中断，以便跳出</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RightWayStopThread2Test</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span> (Thread.currentThread().isInterrupted())&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Interrupt,程序结束&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                method();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> RightWayStopThread2Test());</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/2020033113594577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585624494571"></p><p>==不能屏蔽中断==</p><h3 id="3-应中断的方法"><a href="#3-应中断的方法" class="headerlink" title="3. 应中断的方法"></a>3. 应中断的方法</h3><ul><li>Object.wait()</li><li>Thread.sleep()</li><li>Thread.join()</li><li>JUC.BlockingQueue.take()/put(E)</li><li>JUC.locks.Lock.lockInterruptibly()</li><li>JUC.CountDownLatch.await()</li><li>JUC.CyclicBarrier.await()</li><li>JUC.Exchange.exchange(V)</li></ul><h3 id="4-错误的停止方法"><a href="#4-错误的停止方法" class="headerlink" title="4. 错误的停止方法"></a>4. 错误的停止方法</h3><ol><li><p>被弃用的stop()、suspend()和resume()。</p><p>stop()方法会直接中断线程，不管在执行什么程序,会结束所有未结束的方法。</p><p>suspend()方法会将线程挂起，且不会释放锁，容易造成死锁。</p><p>resume()方法是将线程唤醒，但是也不会释放锁，容易造成死锁。</p></li><li><p>用volatile设置Boolean标志位</p></li></ol><h3 id="5-如何分析native方法"><a href="#5-如何分析native方法" class="headerlink" title="5. 如何分析native方法"></a>5. 如何分析native方法</h3><ol><li>进GitHub（open JDK）<ul><li>点搜索文件，搜索对应的c代码类</li><li>找到native方法对应的方法名</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10.文件上传下载.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/10.%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/10.%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<h2 id="文件上传下载"><a href="#文件上传下载" class="headerlink" title="文件上传下载"></a>文件上传下载</h2><h3 id="1-文件上传"><a href="#1-文件上传" class="headerlink" title="1.文件上传"></a>1.文件上传</h3><p>1.需要导入两个jar包</p><pre><code>apache: 1.commons-fileupload.jar组件        2.commons-fileupload.jar依赖 commons-io.jar</code></pre><p>2.代码</p><p>代码：<br>前台jsp：<br>    <input type="file"  name="spicture"/><br>    表单提交方式必须为post<br>    在表单中必须增加一个属性 enctype=”multipart/form-data”</p><p>后台servlet：</p><ul><li><p> 首先判断前台jsp是否有multipart这个字段(ServletFileUpload.isMultipartContent(request);)</p></li><li><p> 拿到upload对象(ServletFileUpload upload = new ServletFileUpload(factory);)</p></li><li><p> 通过parseRequest解析form表单的所有请求字段，并保存到items集合中,即前台传递的sno sname,spicture此时就保存在了items中）</p></li><li><p> ​    upload.parseRequest(request);</p></li><li><p>遍历items中的数据</p><p> ​    Iterator<FileItem> iter = items.iterator();</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while (iter.hasNext())&#123;</span><br><span class="line">    FileItem item &#x3D; iter.next();</span><br><span class="line">    String itemName &#x3D; item.getFieldName();</span><br></pre></td></tr></table></figure></li><li><p>根据item.getFieldName拿到字段名，然后用字段名对比拿到item中的数据</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (itemName.equals(<span class="string">&quot;sno&quot;</span>)) &#123;<span class="comment">// 根据name属性 判断item是sno sname 还是spicture?</span></span><br><span class="line">sno = Integer.parseInt(item.getString(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (itemName.equals(<span class="string">&quot;sname&quot;</span>)) &#123;</span><br><span class="line">sname = item.getString(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;其他字段xxx.....&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>判断表单字段是普通字段还是文件字段，如果是文件，进行文件上传处理</p><p> ​    item.isFormField()</p></li><li><p>文件上传处理：</p><ul><li><p> 先拿文件名(String fileName = item.getName();)</p></li><li><p>获取文件内容并上传，定义文件路径，指定上传位置（服务器路径）。</p><p> ​    // String path =request.getSession().getServletContext().getRealPath(“upload”) ;</p><p> ​                        String path = “D:\study\upload”;</p></li><li><p>上传</p><p> ​    item.write(file);// 上传</p></li></ul></li></ul><p>3.注意的问题：<br>    上传的目录  upload ：<br>    1.如果修改代码，则在tomcat重新启动时 会被删除<br>        原因：当修改代码的时候,tomcat会重新编译一份class 并且重新部署（重新创建各种目录）</p><pre><code>2.如果不修改代码，则不会删除    原因： 没有修改代码，class仍然是之前的class</code></pre><p>因此，为了防止 上传目录丢失： a.虚拟路径    b.直接更换上传目录 到非tomcat目录</p><h3 id="2-限制上传"><a href="#2-限制上传" class="headerlink" title="2.限制上传"></a>2.限制上传</h3><pre><code>限制上传：类型、大小注意 对文件的限制条件 写再parseRequest之前限制类型方法步骤：1.首先拿到文件后缀2.根据</code></pre><p>代码：</p><p>UploadServlet：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;Servlet2&quot;, urlPatterns = &quot;/Servlet2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//设置编码</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//先判断前台jsp是否有multipart这个字段</span></span><br><span class="line">        <span class="keyword">boolean</span> isMultipart = ServletFileUpload.isMultipartContent(request);</span><br><span class="line">        <span class="keyword">if</span> (isMultipart) &#123;</span><br><span class="line">            FileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">            ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">            <span class="comment">//设置上传文件时 用到的临时文件的大小DiskFileItemFactory</span></span><br><span class="line">            ((DiskFileItemFactory) factory).setSizeThreshold(<span class="number">10240</span>);<span class="comment">//设置临时的缓冲文件大小为10</span></span><br><span class="line">            ((DiskFileItemFactory) factory).setRepository(<span class="keyword">new</span> File(<span class="string">&quot;E:\\IDEA-code\\uploadtemp&quot;</span>));<span class="comment">//设置临时文件的目录</span></span><br><span class="line">            <span class="comment">//限制文件大小</span></span><br><span class="line">            upload.setFileSizeMax(<span class="number">20480</span>);<span class="comment">//字节B</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                List&lt;FileItem&gt; items = upload.parseRequest(request);<span class="comment">//items中有sno、sname、spicture三个参数</span></span><br><span class="line">                <span class="keyword">int</span> sno = -<span class="number">1</span>;</span><br><span class="line">                String sname = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">for</span> (FileItem item : items) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (item.isFormField()) &#123;</span><br><span class="line">                        String itemName = item.getFieldName();</span><br><span class="line">                        <span class="keyword">if</span> (itemName.equals(<span class="string">&quot;sno&quot;</span>))&#123;</span><br><span class="line">                            sno = Integer.parseInt(item.getString());</span><br><span class="line">                            System.out.println(sno);</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (itemName.equals(<span class="string">&quot;sname&quot;</span>))&#123;</span><br><span class="line">                            sname = item.getString();</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;其他字段..&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">//先获取文件名</span></span><br><span class="line">                        String fileName = item.getName();</span><br><span class="line">                        <span class="comment">//限制文件类型</span></span><br><span class="line">                        String ext  = fileName.substring(fileName.indexOf(<span class="string">&quot;.&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">if</span> (!(ext.equals(<span class="string">&quot;png&quot;</span>)|| ext.equals(<span class="string">&quot;png&quot;</span>) || ext.equals(<span class="string">&quot;png&quot;</span>)))&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;文件上传失败，只允许格式为png、jpg、gif!&quot;</span>);</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//获取文件内容，上传，指定上传路径</span></span><br><span class="line">                        <span class="comment">//String path = request.getSession().getServletContext().getRealPath(&quot;upload&quot;);</span></span><br><span class="line">                        String path = <span class="string">&quot;E:\\IDEA-code\\upload&quot;</span>;</span><br><span class="line">                        File file = <span class="keyword">new</span> File(path,fileName);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//上传</span></span><br><span class="line">                        item.write(file);</span><br><span class="line">                        System.out.println(fileName + <span class="string">&quot;上传成功！&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileUploadBase.SizeLimitExceededException e) &#123;<span class="comment">//SizeLimitExceededException是FileUploadException的一个子类</span></span><br><span class="line">                System.out.println(<span class="string">&quot;上传文件大小超过限制！最大20KB&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (FileUploadException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-下载"><a href="#3-下载" class="headerlink" title="3.下载"></a>3.下载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">步骤：</span><br><span class="line">a.请求（地址a  form），请求Servlet</span><br><span class="line">b.Servlet通过文件的地址  将文件转为输入流 读到Servlet中</span><br><span class="line">c.通过输出流 将 刚才已经转为输入流的文件  输出给用户</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意：下载文件 需要设置2个 响应头：</span><br><span class="line">response.addHeader(&quot;content-Type&quot;,&quot;application&#x2F;octet-stream&quot; );&#x2F;&#x2F;MIME类型:二进制文件（任意文件）</span><br><span class="line">response.addHeader(&quot;content-Disposition&quot;,&quot;attachement;filename&#x3D;&quot;+fileName );&#x2F;&#x2F;fileName包含了文件后缀：abc.txt</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">过程：</span><br><span class="line"><span class="number">1.</span>获取要下载的文件名</span><br><span class="line"><span class="number">2.</span>设置消息头（处理中文乱码）</span><br><span class="line"><span class="number">3.</span>Servlet通过文件的地址  将文件转为输入流 读到Servlet中</span><br><span class="line"><span class="number">4.</span>通过输出流 将 刚才已经转为输入流的文件  输出给用户</span><br><span class="line"></span><br><span class="line">下载文件中文乱码处理：</span><br><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> +</span><br><span class="line">                <span class="keyword">new</span> String(fileName.getBytes(<span class="string">&quot;GBK&quot;</span>),<span class="string">&quot;ISO8859_1&quot;</span>));</span><br></pre></td></tr></table></figure><p>代码：</p><p>index.jsp:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;Servlet2&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">        学号：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;sno&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;sname&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        上传照片：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;spicture&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;注册&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;a href=&quot;DownloadServlet?filename=谷歌登录.png&quot;&gt;谷歌登录&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>DownloadServlet:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;DownloadServlet&quot;,urlPatterns = &quot;/DownloadServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取要下载的文件名</span></span><br><span class="line">        String fileName = request.getParameter(<span class="string">&quot;filename&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置消息头</span></span><br><span class="line">        response.addHeader(<span class="string">&quot;content-Type&quot;</span>, <span class="string">&quot;application/octet-stream&quot;</span>);<span class="comment">//MIME类型:二进制文件（任意文件）</span></span><br><span class="line">        <span class="comment">//fileName包含了文件后缀：abc.txt    解决中文乱码</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> +</span><br><span class="line">                <span class="keyword">new</span> String(fileName.getBytes(<span class="string">&quot;GBK&quot;</span>),<span class="string">&quot;ISO8859_1&quot;</span>));</span><br><span class="line">        <span class="comment">//Servlet通过文件的地址  将文件转为输入流 读到Servlet中</span></span><br><span class="line">        InputStream in = getServletContext().getResourceAsStream(<span class="string">&quot;/res/谷歌登录.png&quot;</span>);</span><br><span class="line">        System.out.println(in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过输出流 将 刚才已经转为输入流的文件  输出给用户</span></span><br><span class="line">        ServletOutputStream out = response.getOutputStream() ;</span><br><span class="line">        <span class="keyword">byte</span>[] bs = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">int</span> len=-<span class="number">1</span> ;</span><br><span class="line">        <span class="keyword">while</span>(  (len=in.read(bs)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            out.write(bs,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        out.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>启动线程的正确和错误方式以及原理解析</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89--%E5%90%AF%E5%8A%A8%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%92%8C%E9%94%99%E8%AF%AF%E6%96%B9%E5%BC%8F%E4%BB%A5%E5%8F%8A%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89--%E5%90%AF%E5%8A%A8%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%92%8C%E9%94%99%E8%AF%AF%E6%96%B9%E5%BC%8F%E4%BB%A5%E5%8F%8A%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（二）–启动线程的正确和错误方式以及原理解析"><a href="#Java并发（二）–启动线程的正确和错误方式以及原理解析" class="headerlink" title="Java并发（二）–启动线程的正确和错误方式以及原理解析"></a>Java并发（二）–启动线程的正确和错误方式以及原理解析</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-start-和-run-方法比较"><a href="#1-start-和-run-方法比较" class="headerlink" title="1. start() 和 run() 方法比较"></a>1. start() 和 run() 方法比较</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartThreadTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Runnable runnable = () -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName());</span><br><span class="line">        &#125;;</span><br><span class="line">        runnable.run();</span><br><span class="line">        <span class="keyword">new</span> Thread(runnable).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200330183914659.png" alt="1585552881113"></p><p>直接调用run()方法是由主线程执行，而通过start（）方法才是我们创建的线程进行执行的。</p><h3 id="2-start-方法原理解析"><a href="#2-start-方法原理解析" class="headerlink" title="2. start() 方法原理解析"></a>2. start() 方法原理解析</h3><h4 id="2-1-start（）方法含义"><a href="#2-1-start（）方法含义" class="headerlink" title="2.1 start（）方法含义"></a>2.1 start（）方法含义</h4><ol><li>启动新线程，通知JVM在有空闲情况下启动新线程。具体启动时间有线程调度器决定。</li><li>准备工作<ul><li>线程处于就绪状态</li></ul></li><li>不能重复调用start（）方法。</li></ol><h4 id="2-2-start-源码解析"><a href="#2-2-start-源码解析" class="headerlink" title="2.2 start() 源码解析"></a>2.2 start() 源码解析</h4><ol><li><p>启动新线程检查线程状态</p><p>首先会判断线程状态，如果线程状态不等于0，就会抛出IllegalThreadStateException()，</p><p>而线程调用start方法后，线程状态就会改变。</p></li><li><p>加入线程组</p></li><li><p>调用start0()方法</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        零状态值对应于状态<span class="keyword">new</span></span><br><span class="line">        <span class="keyword">if</span> (threadStatus != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalThreadStateException();</span><br><span class="line"></span><br><span class="line">       添加线程组</span><br><span class="line">        group.add(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> started = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            start0();</span><br><span class="line">            started = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!started) &#123;</span><br><span class="line">                    group.threadStartFailed(<span class="keyword">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ignore) &#123;</span><br><span class="line">                <span class="comment">/* do nothing. If start0 threw a Throwable then</span></span><br><span class="line"><span class="comment">                  it will be passed up the call stack */</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="3-run-方法原理解析"><a href="#3-run-方法原理解析" class="headerlink" title="3. run() 方法原理解析"></a>3. run() 方法原理解析</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (target != <span class="keyword">null</span>) &#123;</span><br><span class="line">            target.run();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>两种情况：</p><ul><li>第一种直接调用，就相当于调用普通方法</li><li>第二种，通过start方法来间接调用run()，来执行新线程的任务。</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wait()、notify()等方法详解</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%BA%94%EF%BC%89--wait()%E3%80%81notify()%E5%92%8CnotifyAll()%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E4%BA%94%EF%BC%89--wait()%E3%80%81notify()%E5%92%8CnotifyAll()%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（五）–wait-、notify-和notifyAll-方法详解"><a href="#Java并发（五）–wait-、notify-和notifyAll-方法详解" class="headerlink" title="Java并发（五）–wait()、notify()和notifyAll()方法详解"></a>Java并发（五）–wait()、notify()和notifyAll()方法详解</h2><p>目录</p><p>[TOC]</p><h3 id="1-重要方法概览"><a href="#1-重要方法概览" class="headerlink" title="1. 重要方法概览"></a>1. 重要方法概览</h3><p>Thread类:</p><ul><li>sleep相关   –线程休眠</li><li>join   —等待其他线程执行完毕</li><li>yield相关  –放弃已经获取到的CPU资源</li><li>currentThread相关 —获取当前执行线程的引用</li><li>start、run相关  –启动线程相关</li><li>interrupt相关  —中断线程</li><li>stop、suspend、resume相关   –弃用方法</li></ul><p>Object类：</p><ul><li>wait、notify、notifyAll相关  —让线程暂时休息和唤醒</li></ul><h3 id="2-wait、notify、notifyAll详解"><a href="#2-wait、notify、notifyAll详解" class="headerlink" title="2.wait、notify、notifyAll详解"></a>2.wait、notify、notifyAll详解</h3><h4 id="2-1-作用、用法"><a href="#2-1-作用、用法" class="headerlink" title="2.1 作用、用法"></a>2.1 作用、用法</h4><p>1.阻塞阶段–调用wait()方法使线程休息。</p><p>注意点：</p><ul><li>执行wait()方法首先要有这个对象的监视器monitor锁。</li><li>调用wait()方法的线程会让出CPU，且会释放锁。</li></ul><p>只有以下四种情况之一发送才可以被唤醒：</p><ol><li>另一个线程调用该对象的notify()方法且刚好被唤醒的是本线程。</li><li>另一个线程调用该对象的notifyAll()方法</li><li>过来wait(long timeout)规定的超时时间，如果传入0就是永久等待。</li><li>线程自身调用了interrupt()。</li></ol><p>2.唤醒阶段</p><p><strong>notify():</strong> 会唤醒单个正在等待某对象monitor的线程，如果执行时，有多个线程正在等待，</p><p>只会唤醒其中的任意一个，具体有JVM自己决定。</p><p><strong>notifyAll():</strong> 会唤醒所有正在等待monitor的线程。</p><p>3.遇到中断</p><p>如果线程执行了wait()方法，遇到了中断，会抛出InterruptedException异常，</p><p>并且会释放当前已经获取的monitor。</p><p><strong>注意：</strong>这三个方法都要在同步代码块中执行。</p><h3 id="3-代码实践"><a href="#3-代码实践" class="headerlink" title="3. 代码实践"></a>3. 代码实践</h3><p><strong>1.展示wait和notify方法的基本用法</strong></p><ol><li>研究代码的执行顺序</li><li>证明wait释放锁</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 17:37</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotifyTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object object = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">T1</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (object)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;开始执行了&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    object.wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;获得锁&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">T2</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (object)&#123;</span><br><span class="line">                object.notify();</span><br><span class="line">                System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;执行了notify()&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        T1 t1 = <span class="keyword">new</span> T1();</span><br><span class="line">        T2 t2 = <span class="keyword">new</span> T2();</span><br><span class="line">        t1.start();</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200401160846837.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585703533771"></p><p>从运行结果就可以证明以上两点。</p><p><strong>2.展示notify和notifyAll()的区别：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/1 9:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>  1. 三个线程，线程1和线程2首先被阻塞，</span></span><br><span class="line"><span class="comment"> * 线程3通过notifyAll唤醒他们。2.证明start先执行不代表线程先启动。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NotifyNotifyAll</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object object = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (object)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;线程&quot;</span>+ Thread.currentThread().getName() + <span class="string">&quot;拿到锁&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;线程&quot;</span>+ Thread.currentThread().getName() + <span class="string">&quot;wait to start&quot;</span>);</span><br><span class="line">                object.wait();</span><br><span class="line">                System.out.println(<span class="string">&quot;线程&quot;</span>+ Thread.currentThread().getName() + <span class="string">&quot;wait to end&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> NotifyNotifyAll());</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> NotifyNotifyAll());</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                    object.notifyAll();</span><br><span class="line">                    <span class="comment">//object.notify();</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;执行了notifyAll&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);<span class="comment">//休眠是为了保证t2线程在t3线程之前执行。</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        t3.start();</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200401160915427.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585705221319"></p><p>如果执行object.notifyAll()，打印结果如上图，线程1和线程2均会唤醒然后执行后续任务。</p><p>而执行object.notify()，线程1和线程2只会唤醒其中一个，且唤醒线程随机。由JVM决定。</p><p><strong>3.只释放当前monitor：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/1 9:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>   证明wait只会释放当前那把锁</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitReleaseOwnTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Object resouceA = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Object resouceB = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (resouceA)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;got resouceA &quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (resouceB)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;got resouceB &quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;release resouceA &quot;</span>);</span><br><span class="line">                    resouceA.wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> WaitReleaseOwnTest());</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);<span class="comment">//sleep1秒是为了等待线程1释放resourceA</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">synchronized</span> (resouceA) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;got resouceA &quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;try to get resouceB &quot;</span>);</span><br><span class="line">                    <span class="keyword">synchronized</span> (resouceB) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;got resouceB &quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://img-blog.csdnimg.cn/20200401160938640.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585706648949"></p><p>可以从运行结果看到线程1执行wait()方法，只释放了resourceA，而resourceB没有释放。线程2一直请求不到resourceB。</p><h3 id="4-wait、notify、notifyAll特点、性质"><a href="#4-wait、notify、notifyAll特点、性质" class="headerlink" title="4.wait、notify、notifyAll特点、性质"></a>4.wait、notify、notifyAll特点、性质</h3><ol><li>用之前必须拥有monitor,需要在同步代码块中执行。</li><li>notify()只能随机唤醒一个，具体由JVM决定。</li><li>都属于Object类，object类是所有类的父类，任何对象都可以调用这三个方法。而且都属于native方法，所以具体实现都在JVM层。</li><li>类似功能Condition。是封装好的类。</li><li>同时持有多把锁。</li></ol><h3 id="5-wait-底层原理"><a href="#5-wait-底层原理" class="headerlink" title="5. wait()底层原理"></a>5. wait()底层原理</h3><p>原理图：</p><p><img src="https://img-blog.csdnimg.cn/20200401161011985.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585707484086"></p><ul><li>EntrySet：入口集</li><li>WaitSet：出口集</li></ul><p>首先线程争夺锁，如果锁被其他线程获取 ，没获取到锁的线程都会放到EntrySet入口集中，然后继续等待获取锁，如果获取锁的线程正常释放则会退出，如果被wait了则会进入左边的等待集中的蓝色部分，知道被notified了，则会进入等待集中的下面的粉色部分，然后来争夺锁。</p><p><strong>生命周期状态转换的特殊情况：</strong></p><ol><li>从Object.wait()状态刚被唤醒时，通常不能立刻抢到monitor锁，就会从Waiting状态转为Blocked状态，抢到锁后转化为Runnable状态。</li><li>如果发送异常，可以直接跳到终止Terminated状态。</li></ol><h3 id="6-手写生产者和消费者设计模式"><a href="#6-手写生产者和消费者设计模式" class="headerlink" title="6. 手写生产者和消费者设计模式"></a>6. 手写生产者和消费者设计模式</h3><p>流程图：</p><p><img src="https://img-blog.csdnimg.cn/202004011610300.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585709327956"></p><p>用代码实现用wait/notify来实现生产者消费者模式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     用wait/notify来实现生产者消费者模式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerConsumerModel</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        EventStorage eventStorage = <span class="keyword">new</span> EventStorage();</span><br><span class="line">        Producer producer = <span class="keyword">new</span> Producer(eventStorage);</span><br><span class="line">        Consumer consumer = <span class="keyword">new</span> Consumer(eventStorage);</span><br><span class="line">        <span class="keyword">new</span> Thread(producer).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(consumer).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EventStorage storage;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            EventStorage storage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.storage = storage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            storage.put();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EventStorage storage;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            EventStorage storage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.storage = storage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            storage.take();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventStorage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxSize;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Date&gt; storage;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EventStorage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        maxSize = <span class="number">10</span>;</span><br><span class="line">        storage = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (storage.size() == maxSize) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        storage.add(<span class="keyword">new</span> Date());</span><br><span class="line">        System.out.println(<span class="string">&quot;仓库里有了&quot;</span> + storage.size() + <span class="string">&quot;个产品。&quot;</span>);</span><br><span class="line">        notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">take</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (storage.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;拿到了&quot;</span> + storage.poll() + <span class="string">&quot;，现在仓库还剩下&quot;</span> + storage.size());</span><br><span class="line">        notify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-小例子"><a href="#7-小例子" class="headerlink" title="7.小例子"></a>7.小例子</h3><p><strong>1.两个线程交替打印0-100</strong><br>两种方法：</p><ul><li>使用synchronized，缺点会比较浪费</li><li>使用wait()、notify()。</li></ul><p>synchronized实现代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     两个线程交替打印0~100的奇偶数，用synchronized关键字实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotifyPrintOddEvenSyn</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="comment">//新建2个线程</span></span><br><span class="line">    <span class="comment">//1个只处理偶数，第二个只处理奇数（用位运算）</span></span><br><span class="line">    <span class="comment">//用synchronized来通信</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (count &lt; <span class="number">100</span>) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                        <span class="keyword">if</span> ((count &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + count++);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;偶数&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (count &lt; <span class="number">100</span>) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                        <span class="keyword">if</span> ((count &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">                            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + count++);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;奇数&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>wait()和notify()实现代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     两个线程交替打印0~100的奇偶数，用wait和notify</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotifyPrintOddEveWait</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> TurningRunner(), <span class="string">&quot;偶数&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> TurningRunner(), <span class="string">&quot;奇数&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 拿到锁，我们就打印</span></span><br><span class="line">    <span class="comment">//2. 打印完，唤醒其他线程，自己就休眠</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TurningRunner</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (count &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                    <span class="comment">//拿到锁就打印</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + count++);</span><br><span class="line">                    lock.notify();</span><br><span class="line">                    <span class="keyword">if</span> (count &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">//如果任务还没结束，就让出当前的锁，并休眠</span></span><br><span class="line">                            lock.wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线程安全问题详解</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%85%AB%EF%BC%89--%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E8%AF%A6%E8%A7%A3/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%85%AB%EF%BC%89--%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（八）–线程未捕获异常处理详解"><a href="#Java并发（八）–线程未捕获异常处理详解" class="headerlink" title="Java并发（八）–线程未捕获异常处理详解"></a>Java并发（八）–线程未捕获异常处理详解</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-为什么需要UncaughtExceptionHandler"><a href="#1-为什么需要UncaughtExceptionHandler" class="headerlink" title="1. 为什么需要UncaughtExceptionHandler?"></a>1. 为什么需要UncaughtExceptionHandler?</h3><p><strong>1.主线程可以轻松发现异常，而子线程不可以。</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/7 14:15</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionChildThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> ExceptionChildThread()).start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面代码中，子线程抛出异常，但是主线程却丝毫不受影响。</p><p><strong>2.子线程异常无法用传统方法捕获</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/7 14:20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> 1. 不加try catch抛出4个异常，都带线程名字</span></span><br><span class="line"><span class="comment"> * 2. 加了try catch,期望捕获到第一个线程的异常，线程234不应该运行，希望看到打印出Caught Exception</span></span><br><span class="line"><span class="comment"> * 3. 执行时发现，根本没有Caught Exception，线程234依然运行并且抛出异常</span></span><br><span class="line"><span class="comment"> * 说明线程的异常不能用传统方法捕获</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChildeThreadTryCatch</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> ChildeThreadTryCatch(),<span class="string">&quot;Thread-1&quot;</span>).start();</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> ChildeThreadTryCatch(),<span class="string">&quot;Thread-2&quot;</span>).start();</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> ChildeThreadTryCatch(),<span class="string">&quot;Thread-3&quot;</span>).start();</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> ChildeThreadTryCatch(),<span class="string">&quot;Thread-4&quot;</span>).start();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (RuntimeException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught Exception&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p> 1.不加try catch抛出4个异常，都带线程名字</p><ul><li><ol start="2"><li>加了try catch,期望捕获到第一个线程的异常，线程234不应该运行，希望看到打印出Caught Exception</li></ol></li><li><ol start="3"><li>执行时发现，根本没有Caught Exception，线程234依然运行并且抛出异常</li></ol></li><li>说明线程的异常不能用传统方法捕获</li></ul></li></ul><p><strong>3. 提高健壮性</strong></p><h3 id="2-两种解决方案"><a href="#2-两种解决方案" class="headerlink" title="2. 两种解决方案"></a>2. 两种解决方案</h3><p>1.直接在run()方法中进行Try Catch操作</p><p>缺点：需要在每一个run方法里都进行Try Catch操作，而且可能还不知道抛出的异常类型。</p><p>2.使用UncaughtExceptionHandler</p><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UncaughtExceptionHandler</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Method invoked when the given thread terminates due to the</span></span><br><span class="line"><span class="comment">         * given uncaught exception.</span></span><br><span class="line"><span class="comment">         * &lt;p&gt;Any exception thrown by this method will be ignored by the</span></span><br><span class="line"><span class="comment">         * Java Virtual Machine.</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> t the thread</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> e the exception</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread t, Throwable e)</span></span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>异常处理调用策略：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread t, Throwable e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//parent默认也为空</span></span><br><span class="line">        <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">            parent.uncaughtException(t, e);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Thread.UncaughtExceptionHandler ueh =</span><br><span class="line">                Thread.getDefaultUncaughtExceptionHandler();</span><br><span class="line">            <span class="keyword">if</span> (ueh != <span class="keyword">null</span>) &#123;</span><br><span class="line">                ueh.uncaughtException(t, e);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!(e <span class="keyword">instanceof</span> ThreadDeath)) &#123;</span><br><span class="line">                System.err.print(<span class="string">&quot;Exception in thread \&quot;&quot;</span></span><br><span class="line">                                 + t.getName() + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">                e.printStackTrace(System.err);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>自己实现：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     自己的MyUncaughtExceptionHanlder</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUncaughtExceptionHandler</span> <span class="keyword">implements</span> <span class="title">Thread</span>.<span class="title">UncaughtExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyUncaughtExceptionHandler</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread t, Throwable e)</span> </span>&#123;</span><br><span class="line">        Logger logger = Logger.getAnonymousLogger();</span><br><span class="line">        logger.log(Level.WARNING, <span class="string">&quot;线程异常，终止啦&quot;</span> + t.getName());</span><br><span class="line">        System.out.println(name + <span class="string">&quot;捕获了异常&quot;</span> + t.getName() + <span class="string">&quot;异常&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     使用刚才自己写的UncaughtExceptionHandler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseOwnUncaughtExceptionHandler</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread.setDefaultUncaughtExceptionHandler(<span class="keyword">new</span> MyUncaughtExceptionHandler(<span class="string">&quot;捕获器1&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> UseOwnUncaughtExceptionHandler(), <span class="string">&quot;MyThread-1&quot;</span>).start();</span><br><span class="line">        Thread.sleep(<span class="number">300</span>);</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> UseOwnUncaughtExceptionHandler(), <span class="string">&quot;MyThread-2&quot;</span>).start();</span><br><span class="line">        Thread.sleep(<span class="number">300</span>);</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> UseOwnUncaughtExceptionHandler(), <span class="string">&quot;MyThread-3&quot;</span>).start();</span><br><span class="line">        Thread.sleep(<span class="number">300</span>);</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> UseOwnUncaughtExceptionHandler(), <span class="string">&quot;MyThread-4&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586242769075.png" alt="1586242769075"></p><p>可以看到，子线程的异常信息通过自己实现的UncaughtExceptionHandler通过日志形式打印出来了。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sleep()、join()、yield()等方法详解</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%85%AD%EF%BC%89--sleep()%E3%80%81join()%E3%80%81yield()%E7%AD%89%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%85%AD%EF%BC%89--sleep()%E3%80%81join()%E3%80%81yield()%E7%AD%89%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（六）–sleep-、join-、yield-等方法详解"><a href="#Java并发（六）–sleep-、join-、yield-等方法详解" class="headerlink" title="Java并发（六）–sleep()、join()、yield()等方法详解"></a>Java并发（六）–sleep()、join()、yield()等方法详解</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-sleep-方法详解"><a href="#1-sleep-方法详解" class="headerlink" title="1.sleep()方法详解"></a>1.sleep()方法详解</h3><p>作用：让线程在预期的时间执行，其他时候不要占用CPU资源。</p><p>性质：</p><ol><li>sleep方法不会释放锁</li><li>sleep方法响应中断</li></ol><p>代码实现：</p><p>1.sleep方法不会释放锁</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/1 17:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>   证明sleep不释放锁，等到sleep时间到了以后，</span></span><br><span class="line"><span class="comment"> * 正常结束才释放锁</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepDonotReleaseLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;获得锁&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;开始苏醒&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> SleepDonotReleaseLock());</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> SleepDonotReleaseLock());</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1585733189795.png" alt="1585733189795"></p><p>2.sleep方法响应中断</p><ol><li>抛出InterruptException</li><li>清除中断状态</li></ol><p>展示sleep的第二种写法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/1 17:29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>   1.每隔1秒打印当前时间，然后中断，观察</span></span><br><span class="line"><span class="comment"> * 2.使用sleep第二种写法：TimeUnit.SECONDS.sleep()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepInterruptTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> Date());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;线程被中断了！&quot;</span>);</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> SleepInterruptTest());</span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1585733656883.png" alt="1585733656883"></p><p>可以看出，sleep方法可以响应中断，且中断后可以继续运行，表面sleep方法可以清除中断状态。</p><p><strong>TimeUnit.SECONDS.sleep()的优点：</strong></p><ol><li>Thread.sleep()只接受参数毫秒，而TimeUnit可以接受小时、分钟、秒等多种参数。</li><li>TimeUnit对于时间参数小于等于0，会直接什么都不做，而Thread.sleep会抛出异常。</li></ol><p>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">(<span class="keyword">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timeout &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">long</span> ms = toMillis(timeout);</span><br><span class="line">            <span class="keyword">int</span> ns = excessNanos(timeout, ms);</span><br><span class="line">            Thread.sleep(ms, ns);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>总结：</strong>sleep方法可以让线程进入Waiting状态，并且不占用CPU资源，但是不释放锁，直到规定的时间后再执行，休眠期间如果被中断，会抛出异常并清除中断状态。</p><p><strong>wait()/notify和sleep异同：</strong></p><ul><li>相同<ol><li>阻塞</li><li>响应中断</li></ol></li><li>不同<ol><li>同步方法中</li><li>释放锁</li><li>参数指定时间</li><li>所属类</li></ol></li></ul><h3 id="2-join-方法详解"><a href="#2-join-方法详解" class="headerlink" title="2. join()方法详解"></a>2. join()方法详解</h3><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1585739898163.png" alt="1585739898163"></p><p>作用：等待相应线程运行结束。如果线程A调用线程B的join()方法，那么线程A的运行会被暂停，直到线程B运行结束。</p><p>用法：</p><ol><li>普通用法</li><li>遇到中断</li><li>join期间线程状态</li></ol><p><strong>1.普通用法代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     演示join，注意语句输出顺序，会变化。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Join</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;执行完毕了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;线程1&quot;</span>);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;执行完毕&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;线程2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;开始等待子线程运行完毕&quot;</span>);</span><br><span class="line">        thread.join();</span><br><span class="line">        thread2.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;所有子线程执行完毕&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">打印结果：</span><br><span class="line">开始等待子线程运行完毕</span><br><span class="line">线程<span class="number">1</span>执行完毕了</span><br><span class="line">线程<span class="number">2</span>执行完毕</span><br><span class="line">所有子线程执行完毕</span><br></pre></td></tr></table></figure><p>可以看到 打印结果：线程1调用join()方法，线程2要等待线程1执行完成，线程2调用join()方法，要等待线程2执行完毕。</p><p><strong>2.遇到中断的代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/1 19:29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>   演示join期间被中断的效果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JoinThreadInterruptTest</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            Thread mainThread = Thread.currentThread(); <span class="comment">//获取主线程的引用</span></span><br><span class="line">            Thread thread1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        mainThread.interrupt();</span><br><span class="line">                        Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread1 finished.&quot;</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;子线程中断&quot;</span>);</span><br><span class="line">                      <span class="comment">// e.printStackTrace();</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            thread1.start();</span><br><span class="line">            System.out.println(<span class="string">&quot;等待子线程运行完毕&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                thread1.join();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;线程中断了&quot;</span>);</span><br><span class="line">                <span class="comment">//thread1.interrupt();</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;子线程已运行完毕&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码逻辑：</p><p>首先线程1开始启动，然后进入Thread1的run()方法中，在子线程中用主线程的引用中断主线程，而此时主线程正在等待子线程执行中，被中断，就会抛出异常，然后执行Thread1下面catch中的内容，然后打印子线程执行完毕，子线程执行完成，但是过几秒打印出Thread1 finished，说明子线程还没有完全结束，一旦join期间被打断，我们应该在处理中断异常的时候把子线程的内容都给停止，否则就会出现不一致的情况。我们在主线程获得中断的同时，把中断传递给子线程，这样子线程就会在sleep期间获得中断，抛出异常，执行catch中的内容。这时子线程的catch内容和主线程catch中的内容并行执行。</p><p><strong>3.join期间线程状态</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     先join再mainThread.getState()</span></span><br><span class="line"><span class="comment"> * 通过debugger看线程join前后状态的对比</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JoinThreadState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread mainThread = Thread.currentThread();</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                    System.out.println(mainThread.getState());</span><br><span class="line">                    System.out.println(<span class="string">&quot;Thread-0运行结束&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;等待子线程运行完毕&quot;</span>);</span><br><span class="line">        thread.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;子线程运行完毕&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1585743041831.png" alt="1585743041831"></p><p>可以看到，在join期间，线程处于Waiting状态。</p><p><strong>join注意点</strong>：</p><ul><li>CountDownLatch或CyclicBarry类可以实现join</li></ul><h4 id="2-1-join原理"><a href="#2-1-join原理" class="headerlink" title="2.1 join原理"></a>2.1 join原理</h4><p>1.源码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">long</span> millis)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> base = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> now = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (millis &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;timeout value is negative&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (millis == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">                wait(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">                <span class="keyword">long</span> delay = millis - now;</span><br><span class="line">                <span class="keyword">if</span> (delay &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                wait(delay);</span><br><span class="line">                now = System.currentTimeMillis() - base;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>我们可以发现最终还是调用wait()方法。但是我们看不到唤醒操作notify方法，这个在于JVM层，在run方法执行完后会自动执行notify方法。</p><p>2.Thread.join()等价写法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (thread) &#123;</span><br><span class="line">    thread.wait();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-yield-方法详解"><a href="#3-yield-方法详解" class="headerlink" title="3. yield()方法详解"></a>3. yield()方法详解</h3><p>作用：释放自己的CPU时间片，但是此时线程状态仍为Runnable状态，不会释放自己的锁，也不会进入阻塞。JVM不一定会遵循yield方法。</p><p>yield()和sleep()的区别：是否随时可能再次被调度。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>volatile关键字</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89--volatile%E5%85%B3%E9%94%AE%E5%AD%97/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89--volatile%E5%85%B3%E9%94%AE%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（十一）–volatile关键字"><a href="#Java并发（十一）–volatile关键字" class="headerlink" title="Java并发（十一）–volatile关键字"></a>Java并发（十一）–volatile关键字</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-什么是volatile？"><a href="#1-什么是volatile？" class="headerlink" title="1. 什么是volatile？"></a>1. 什么是volatile？</h3><p>​    volatile是一种同步机制，比synchronized或者Lock相关类更轻量，因为使用volatile并不会发生上下文切换等开销很大的行为。</p><h3 id="2-volatile的适用场合"><a href="#2-volatile的适用场合" class="headerlink" title="2. volatile的适用场合"></a>2. volatile的适用场合</h3><p>不适合场景：a++；</p><p>代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/9 15:45</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileMutil</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> a ;</span><br><span class="line">    AtomicInteger atomicInteger = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            a++;</span><br><span class="line">            atomicInteger.incrementAndGet();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        VolatileMutil volatileMutil = <span class="keyword">new</span> VolatileMutil();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(volatileMutil);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(volatileMutil);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">        System.out.println(volatileMutil.a);</span><br><span class="line">        System.out.println(volatileMutil.atomicInteger.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：可以看到a++的结果小于等于20000，且每次结果不一样。</p><p>适合场景：</p><p>​    某个属性被多个线程共享，其中有一个线程修改了此属性，其他线程可以立即得到修改后的值。或者作为触发器。</p><h3 id="3-volatile的作用"><a href="#3-volatile的作用" class="headerlink" title="3. volatile的作用"></a>3. volatile的作用</h3><ol><li><strong>可见性：</strong>读一个volatile变量之前，需要先使相应的本地缓存失效，这样就必须到主内存读取最新值，写一个volatile变量会立即刷新到主内存。</li><li><strong>保证有序性，禁止指令重排序优化。</strong></li></ol><h3 id="4-volatile和synchronized的关系"><a href="#4-volatile和synchronized的关系" class="headerlink" title="4. volatile和synchronized的关系"></a>4. volatile和synchronized的关系</h3><p>​    volatile可以看作是轻量版的synchronized，如果一个共享变量自始至终只能被各个线程赋值，而没有其他操作，那么就可以用volatile来代替synchronized或者代替原子变量，因为赋值本身是有原子性的，而volatile又保证了可见性，所以足以保证线程安全。</p><h3 id="5-用volatile解决重排序的问题"><a href="#5-用volatile解决重排序的问题" class="headerlink" title="5. 用volatile解决重排序的问题"></a>5. 用volatile解决重排序的问题</h3><h3 id="6-volatile特点"><a href="#6-volatile特点" class="headerlink" title="6. volatile特点"></a>6. volatile特点</h3><ol><li>volatile属性的读写操作都是无锁的，不能替代synchronized，不能提供原子性和互斥性。但是因为无锁，所以也不需要花费时间在获取锁和释放锁上，成本低。</li><li>volatile只能作为属性，用volatile修饰属性可以禁止指令重排序。</li><li>volatile提供可见性，任何一个线程对其的修改将立马对其他线程可见。volatile属性不会被线程缓存，始终从主存中读取。</li><li>volatile提供了happens-before保证，对volatile变量v的写入happens-before所有其他线程后续对v的读操作。</li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>死锁、活锁和饥饿</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89--%E6%AD%BB%E9%94%81%E3%80%81%E6%B4%BB%E9%94%81%E5%92%8C%E9%A5%A5%E9%A5%BF/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89--%E6%AD%BB%E9%94%81%E3%80%81%E6%B4%BB%E9%94%81%E5%92%8C%E9%A5%A5%E9%A5%BF/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（十二）–死锁、活锁和饥饿"><a href="#Java并发（十二）–死锁、活锁和饥饿" class="headerlink" title="Java并发（十二）–死锁、活锁和饥饿"></a>Java并发（十二）–死锁、活锁和饥饿</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-死锁概念以及危害"><a href="#1-死锁概念以及危害" class="headerlink" title="1. 死锁概念以及危害"></a>1. 死锁概念以及危害</h3><p>​      两个或者更多的线程因竞争资源而造成相互等待的情况，叫做死锁。 </p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586510295018.png" alt="1586510295018"></p><p>死锁的影响：</p><p>死锁的影响在不同系统中是不一样的，取决于系统对死锁 的处理能力。</p><ul><li>数据库中：检测并放弃事务</li><li>JVM：无法自动处理</li></ul><p>死锁的4个必要条件：</p><ol><li>互斥条件</li><li>请求与保持条件</li><li>不剥夺条件</li><li>循环等待条件</li></ol><h3 id="2-死锁例子"><a href="#2-死锁例子" class="headerlink" title="2. 死锁例子"></a>2. 死锁例子</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lemon.practice.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiedLockDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object A = <span class="keyword">new</span> Obeject();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object B = <span class="keyword">new</span> Obeject();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        DiedLockDemo.diedLockTest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">diedLockTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (A)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.currentThread().sleep(<span class="number">2000</span>);<span class="comment">//等待2000ms等线程T2锁定B</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">synchronized</span> (B)&#123;</span><br><span class="line">                        System.out.println(<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (B) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.currentThread().sleep(<span class="number">2000</span>);<span class="comment">//等待2000ms等线程T1锁定A</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">synchronized</span> (A)&#123;</span><br><span class="line">                        System.out.println(<span class="number">2</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-死锁排除及分析方法"><a href="#3-死锁排除及分析方法" class="headerlink" title="3. 死锁排除及分析方法"></a>3. 死锁排除及分析方法</h3><h4 id="3-1-jstack方法"><a href="#3-1-jstack方法" class="headerlink" title="3.1 jstack方法"></a>3.1 jstack方法</h4><p>1.在命令提示符CMD中输入jps -l，找到当前Java进程的进程号pid,通过包路径很容易区分出自己开发的程序进程。　</p><p>2.使用jstack -l pid,查看当前进程的错误信息。</p><p><img src="https://img-blog.csdnimg.cn/20200325161642208.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585123359526"></p><h4 id="3-2-JConsole方法"><a href="#3-2-JConsole方法" class="headerlink" title="3.2 JConsole方法"></a>3.2 JConsole方法</h4><p>1.使用win+R 打开运行对话框，输入JConsole</p><p><img src="https://img-blog.csdnimg.cn/20200325161659824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585123493836"></p><p>2.连接自己要选择的进程。</p><p>3.检测死锁。</p><p><img src="https://img-blog.csdnimg.cn/20200325161715363.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585123556011"></p><h3 id="4-死锁修复策略"><a href="#4-死锁修复策略" class="headerlink" title="4. 死锁修复策略"></a>4. 死锁修复策略</h3><ol><li><p><strong>避免策略</strong>：哲学家就餐的换手方案。</p><p>思路:避免相反的获取锁的顺序。比如转账时为了避免死锁，可以采用hashcode来决定获取锁的顺序，冲突时再添加其他操作。</p><p>哲学家就餐问题：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586510590498.png" alt="1586510590498"></p><p>哲学家就餐问题可以这样表述，假设有五位哲学家围坐在一张圆形餐桌旁，做以下两件事情之一：吃饭，或者思考。吃东西的时候，他们就停止思考，思考的时候也停止吃东西。餐桌中间有一大碗意大利面，每两个哲学家之间有一只餐叉。因为用一只餐叉很难吃到意大利面，所以假设哲学家必须用两只餐叉吃东西。他们只能使用自己左右手边的那两只餐叉。哲学家就餐问题有时也用米饭和筷子而不是意大利面和餐叉来描述，因为很明显，吃米饭必须用两根筷子。</p><p>哲学家从来不交谈，这就很危险，==可能产生死锁==，每个哲学家都拿着左手的餐叉，永远都在等右边的餐叉（或者相反）。即使没有死锁，==也有可能发生资源耗尽==。例如，假设规定当哲学家等待另一只餐叉超过五分钟后就放下自己手里的那一只餐叉，并且再等五分钟后进行下一次尝试。这个策略消除了死锁（系统总会进入到下一个状态），但仍然有可能发生“<a href="https://baike.baidu.com/item/%E6%B4%BB%E9%94%81">活锁</a>”。如果五位哲学家在完全相同的时刻进入餐厅，并同时拿起左边的餐叉，那么这些哲学家就会等待五分钟，同时放下手中的餐叉，再等五分钟，又同时拿起这些餐叉。</p><p>流程：</p><pre><code> 1. 先拿起左手的筷子 2. 然后拿起右手的筷子 3. 如果筷子被人使用了，等待别人用完 4. 吃完，把筷子放回原位</code></pre><p>代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/10 17:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PhilosopherTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Philosopher</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Object leftChopstick;</span><br><span class="line">        <span class="keyword">private</span> Object rightChopstick;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Philosopher</span><span class="params">(Object leftChopstick, Object rightChopstick)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.leftChopstick = leftChopstick;</span><br><span class="line">            <span class="keyword">this</span>.rightChopstick = rightChopstick;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    doAction(<span class="string">&quot;think;&quot;</span>);</span><br><span class="line">                    <span class="keyword">synchronized</span> (leftChopstick) &#123;</span><br><span class="line">                        doAction(<span class="string">&quot;get left;&quot;</span>);</span><br><span class="line">                        <span class="keyword">synchronized</span> (rightChopstick) &#123;</span><br><span class="line">                            doAction(<span class="string">&quot;get right;&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        doAction(<span class="string">&quot;put down left and right&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAction</span><span class="params">(String action)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &quot;</span> + action);</span><br><span class="line">            Thread.sleep((<span class="keyword">long</span>) (Math.random() * <span class="number">10</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Philosopher[] philosophers = <span class="keyword">new</span> Philosopher[<span class="number">5</span>];</span><br><span class="line">        Object[] chopsticks = <span class="keyword">new</span> Object[philosophers.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; chopsticks.length; i++) &#123;</span><br><span class="line">            chopsticks[i] = <span class="keyword">new</span> Object();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; philosophers.length; i++) &#123;</span><br><span class="line">            Object leftchopstick = chopsticks[i];</span><br><span class="line">            Object rightchopstick = chopsticks[(i+<span class="number">1</span>) % chopsticks.length];</span><br><span class="line">            philosophers[i] = <span class="keyword">new</span> Philosopher(leftchopstick , rightchopstick);</span><br><span class="line">            <span class="keyword">new</span> Thread(philosophers[i], <span class="string">&quot;哲学家&quot;</span>+ (i+<span class="number">1</span>) +<span class="string">&quot;号&quot;</span>).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586512736810.png" alt="1586512736810"></p><p>所有哲学家都在拿到了左边的筷子，都在等待右边的筷子而陷入了死锁。</p><p>解决方案：</p><ol><li><p>服务员检查（避免策略）</p></li><li><p>改变一个哲学家拿叉子的顺序（避免策略）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(i == philosophers.length-<span class="number">1</span>)&#123;</span><br><span class="line">                philosophers[i] = <span class="keyword">new</span> Philosopher(rightchopstick , leftchopstick);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                philosophers[i] = <span class="keyword">new</span> Philosopher(leftchopstick , rightchopstick);</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></li><li><p>餐票（避免策略）</p></li><li><p>领导调节（检测和恢复策略）</p></li></ol></li></ol><ol start="2"><li><p><strong>检测与恢复策略</strong>：一段时间检测是否有死锁，如果有就剥夺某一个资源，来打开死锁。</p><p>检测算法：锁的调用链路图。</p><ul><li>允许发生死锁</li><li>每次调用锁都记录</li><li>定期检查“锁的调用链路图”中是否存在环路。</li><li>一旦发生死锁，就用死锁恢复机制进行恢复。</li></ul><p>恢复方法：</p><pre><code> 1. 逐个终止进程，知道死锁消除。 2. 资源抢占，把已经分发出去的锁给收回来或者让线程回退几步。</code></pre></li><li><p><strong>鸵鸟策略</strong>：如果发生死锁的概率极其低，那我们就直接忽略它，直到死锁发生的时候，再人工修复。</p></li></ol><h3 id="5-实际项目中避免死锁方法"><a href="#5-实际项目中避免死锁方法" class="headerlink" title="5. 实际项目中避免死锁方法"></a>5. 实际项目中避免死锁方法</h3><ol><li><p>设置超时时间：Lock的tryLock(long timeout, TimeUnit timeUnit),如果超时获取锁失败就进行日志打印、警告、重启等操作。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/13 10:15</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryLockDiedLock</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock lock1 = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock lock2 = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TryLockDiedLock.diedLockTest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">diedLockTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (lock1.tryLock(<span class="number">800</span>, TimeUnit.MILLISECONDS)) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;线程1获取到了锁1&quot;</span>);</span><br><span class="line">                        Thread.sleep(<span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>));</span><br><span class="line">                        <span class="keyword">if</span> (lock2.tryLock(<span class="number">800</span>, TimeUnit.MILLISECONDS)) &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;线程1获取到了锁2&quot;</span>);</span><br><span class="line">                            System.out.println(<span class="string">&quot;线程1成功获取到了两把锁&quot;</span>);</span><br><span class="line">                            lock2.unlock();</span><br><span class="line">                            lock1.unlock();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;线程1尝试获取锁2失败，已重试&quot;</span>);</span><br><span class="line">                            lock1.unlock();</span><br><span class="line">                            Thread.sleep(<span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;线程1获取锁1失败，已重试&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (lock2.tryLock(<span class="number">3000</span>, TimeUnit.MILLISECONDS)) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;线程2获取到了锁2&quot;</span>);</span><br><span class="line"></span><br><span class="line">                        Thread.sleep(<span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>));</span><br><span class="line">                        <span class="keyword">if</span> (lock1.tryLock(<span class="number">3000</span>, TimeUnit.MILLISECONDS)) &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;线程2获取到了锁1&quot;</span>);</span><br><span class="line">                            System.out.println(<span class="string">&quot;线程2成功获取到了两把锁&quot;</span>);</span><br><span class="line">                            lock1.unlock();</span><br><span class="line">                            lock2.unlock();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;线程2尝试获取锁1失败，已重试&quot;</span>);</span><br><span class="line">                            lock2.unlock();</span><br><span class="line">                            Thread.sleep(<span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;线程2获取锁2失败，已重试&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>多使用并发类。</p></li><li><p>尽量降低锁的使用粒度：用不同的锁而不是一个锁。</p></li><li><p>如果可以使用同步代码块，就不使用同步方法。</p></li><li><p>给线程取名清晰一点，比较好排查。</p></li><li><p>避免锁的嵌套。</p></li></ol><h3 id="6-活锁"><a href="#6-活锁" class="headerlink" title="6. 活锁"></a>6. 活锁</h3><p>​    虽然线程没有阻塞，也始终在运行，但是程序得不到进展，因为线程始终重复做同样的事。一直谦让，导致资源一直在线程间跳动。</p><p>解决活锁的办法：</p><ol><li><p> 以太网的指数退避算法</p></li><li><p><strong>加入随机因素</strong></p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lemon.practice.jmm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     演示活锁问题</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LiveLock</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Spoon</span> </span>&#123;  <span class="comment">//勺</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Diner owner;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Spoon</span><span class="params">(Diner owner)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.owner = owner;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Diner <span class="title">getOwner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> owner;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOwner</span><span class="params">(Diner owner)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.owner = owner;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">use</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%s吃完了!&quot;</span>, owner.name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Diner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> isHungry;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Diner</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">            isHungry = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eatWith</span><span class="params">(Spoon spoon, Diner spouse)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (isHungry) &#123;</span><br><span class="line">                <span class="keyword">if</span> (spoon.owner != <span class="keyword">this</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                Random random = <span class="keyword">new</span> Random();</span><br><span class="line">                <span class="keyword">if</span> (spouse.isHungry &amp;&amp; random.nextInt(<span class="number">10</span>) &lt; <span class="number">9</span>) &#123;</span><br><span class="line">                    System.out.println(name + <span class="string">&quot;: 亲爱的&quot;</span> + spouse.name + <span class="string">&quot;你先吃吧&quot;</span>);</span><br><span class="line">                    spoon.setOwner(spouse);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                spoon.use();</span><br><span class="line">                isHungry = <span class="keyword">false</span>;</span><br><span class="line">                System.out.println(name + <span class="string">&quot;: 我吃完了&quot;</span>);</span><br><span class="line">                spoon.setOwner(spouse);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Diner husband = <span class="keyword">new</span> Diner(<span class="string">&quot;牛郎&quot;</span>);</span><br><span class="line">        Diner wife = <span class="keyword">new</span> Diner(<span class="string">&quot;织女&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Spoon spoon = <span class="keyword">new</span> Spoon(husband);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                husband.eatWith(spoon, wife);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                wife.eatWith(spoon, husband);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="7-饥饿"><a href="#7-饥饿" class="headerlink" title="7. 饥饿"></a>7. 饥饿</h3><p>当线程需要某些资源比如CPU，却始终得不到。</p><p>原因：</p><p>线程优先级设置过低，或者有线程持有锁同时又无限循环从而不释放锁，或者某程序始终占用某文件的写锁。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ThreadLocal详解</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E5%9B%9B%EF%BC%89--ThreadLocal%E8%AF%A6%E8%A7%A3/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%E5%9B%9B%EF%BC%89--ThreadLocal%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（十四）–ThreadLocal详解"><a href="#Java并发（十四）–ThreadLocal详解" class="headerlink" title="Java并发（十四）–ThreadLocal详解"></a>Java并发（十四）–ThreadLocal详解</h2><h3 id="一、两大使用场景"><a href="#一、两大使用场景" class="headerlink" title="一、两大使用场景"></a>一、两大使用场景</h3><p> 1.每个线程需要一个独享的对象（通常是工具类，典型需要使用的类有SimpleDateFormat和Random）。</p><p>​    每个Thread内有自己的实例副本，不共享。</p><p>2.每个线程内需要保存全局变量（例如拦截器中获取用户信息），可以让不同方法直接使用，避免参数传递的麻烦。</p><h3 id="二、ThreadLocal的两个作用"><a href="#二、ThreadLocal的两个作用" class="headerlink" title="二、ThreadLocal的两个作用"></a>二、ThreadLocal的两个作用</h3><p>1.让某个需要用到的对象在线程间隔离（每个线程都有自己的独立的对象）。</p><p>2.在任何方法中都可以轻松获取到该对象。</p><h3 id="三、ThreadLocal的好处"><a href="#三、ThreadLocal的好处" class="headerlink" title="三、ThreadLocal的好处"></a>三、ThreadLocal的好处</h3><p>1.达到线程安全</p><p>2.不需要加锁，提高执行效率</p><p>3.更高效的利用内存、节省开销。</p><p>4.避免了传参的麻烦。</p><p>5.</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java内存模型</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%EF%BC%89--Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%8D%81%EF%BC%89--Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（十）–Java内存模型"><a href="#Java并发（十）–Java内存模型" class="headerlink" title="Java并发（十）–Java内存模型"></a>Java并发（十）–Java内存模型</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-底层原理"><a href="#1-底层原理" class="headerlink" title="1. 底层原理"></a>1. 底层原理</h3><p>Java代码—-&gt;CPU指令过程：</p><ul><li>首先是.java文件</li><li>编译后变成字节码.class文件</li><li>JVM将字节码文件转为机器指令</li><li>机器指令就可以直接在CPU上运行。</li></ul><p>由于JVM会带来不同的“翻译”， 不同的CPU平台的机器指令又各有不同，所以无法保证并发安全的效果一致。</p><p>所以就出现了Java内存模型这一套规范。</p><p>分清楚三个概念：</p><p>1.JVM内存模型</p><p>​    和Java虚拟机的运行时区域有关。</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586328202831.png" alt="1586328202831"></p><p>2.Java内存模型</p><p>​    和Java的并发编程有关。</p><p>3.Java对象模型</p><p>​    和Java对象在虚拟机中的表现形式有关。Java对象自身的存储模型。</p><h3 id="2-Java内存模型介绍"><a href="#2-Java内存模型介绍" class="headerlink" title="2. Java内存模型介绍"></a>2. Java内存模型介绍</h3><pre><code> 1. Java Memory Model,JMM是一种规范，需要各个JVM的实现来遵守JMM规范，以便于开发者可以利用这些规范，更方便地开发多线程程序。 2. 因为没有这种规范的话，程序很可能经过了不同JVM的不同规则的重排序之后，导致不同的虚拟机上运行的结果不一样，产生一些问题。 3. JMM是工具类和关键字的原理。</code></pre><p>JMM最重要的三点内容：</p><p>1.原子性</p><p>2.可见性</p><p>3.有序性（重排序）</p><h3 id="3-原子性"><a href="#3-原子性" class="headerlink" title="3. 原子性"></a>3. 原子性</h3><h3 id="4-可见性"><a href="#4-可见性" class="headerlink" title="4. 可见性"></a>4. 可见性</h3><h4 id="4-1-关于可见性"><a href="#4-1-关于可见性" class="headerlink" title="4.1 关于可见性"></a>4.1 关于可见性</h4><p>概念：可见性就是指一个线程对共享变量的更新的结果对于读取相应共享变量的线程而言是否可见的问题。</p><p>代码演示：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述：     演示可见性带来的问题</span></span><br><span class="line"><span class="comment"> * 会出现： 2，1   3，3   2，3  3，1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldVisibility</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a = <span class="number">3</span>;</span><br><span class="line">        b = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;b=&quot;</span> + b + <span class="string">&quot;;a=&quot;</span> + a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            FieldVisibility test = <span class="keyword">new</span> FieldVisibility();</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    test.change();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    test.print();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-2-可见性问题产生的原因"><a href="#4-2-可见性问题产生的原因" class="headerlink" title="4.2 可见性问题产生的原因"></a>4.2 可见性问题产生的原因</h4><p>CPU有多级缓存，导致读的数据过期。</p><ul><li>高速缓存的容量比主内存小，但是速度仅次于寄存器，所以在CPU和主内存之间就多了Cache层。</li><li>线程间对于共享变量的可见性问题不是直接由多核引起的，而是由多缓存引起的。</li><li>每个核心都会将自己需要的数据读到独占缓存中，数据修改后也是写到缓存中，然后等待刷入到主内存中。所以导致有些核心读取的指是一个过期的值。</li></ul><p>所有的共享变量存在于主内存，每个线程有自己的本地内存，而且线程读写共享数据也是通过本地内存交换的，所以才导致了可见性问题。</p><h4 id="4-3-JMM的抽象：主内存和本地内存"><a href="#4-3-JMM的抽象：主内存和本地内存" class="headerlink" title="4.3 JMM的抽象：主内存和本地内存"></a>4.3 JMM的抽象：主内存和本地内存</h4><p>​    Java作为高级语言，屏蔽了这些底层细节，用JMM定义了一套读写内存数据的规范，我们不再需要关心一级缓存、二级缓存，而是JMM抽象了主内存和本地内存。</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1586414990348.png" alt="1586414990348"></p><p>JMM的规定：</p><ol><li>所有的变量都存储在主内存中，同时每个线程也由自己独立的工作内存，工作内存中的变量内容是主内存中的拷贝。</li><li>线程不能直接读写主内存中的变量，而是只能操作自己工作内存的变量，然后再同步到主内存中。</li><li>主内存是多个线程共享的，但线程间不共享工作内存，如果线程间需要通信，必须借助主内存中转来完成。 </li></ol><p>共享变量可见性的实现原理：</p><ol><li>.线程A在自己的工作内存中修改变量之后，需要将变量的值刷新到主内存中</li><li>线程B要把主内存中变量的值更新到工作内存中</li></ol><h4 id="4-4-Happens-Before原则"><a href="#4-4-Happens-Before原则" class="headerlink" title="4.4 Happens-Before原则"></a>4.4 Happens-Before原则</h4><p>解释：happens-before规则是用来解决可见性问题的：在时间上，动作A发生在动作B之前，B保证能看见A，这就是happens-before.</p><p>happens-before规则：</p><ol><li>单线程规则</li><li><strong>锁操作（synchronized和Lock）</strong></li><li><strong>volatile变量</strong></li><li>线程启动</li><li>线程join：join后面的语句一定可以看到前面的语句。</li><li>传递性。</li><li>中断</li><li>构造方法</li><li>工具类的Happens-Before原则：<ol><li>线程安全的容器get一定能看到在此之前的put等存入动作。</li><li>CountDownLatch</li><li>Semaphore</li><li>Future</li><li>线程池</li><li>CyclicBarry</li></ol></li></ol><h4 id="4-5-解决可见性问题的方法"><a href="#4-5-解决可见性问题的方法" class="headerlink" title="4.5 解决可见性问题的方法"></a>4.5 解决可见性问题的方法</h4><pre><code> 1. volatile 2. synchronized 3. Lock锁</code></pre><h3 id="5-有序性"><a href="#5-有序性" class="headerlink" title="5. 有序性"></a>5. 有序性</h3><h4 id="5-1-重排序的概念"><a href="#5-1-重排序的概念" class="headerlink" title="5.1 重排序的概念"></a>5.1 重排序的概念</h4><p>重排序：在线程内部的Java代码实际执行顺序和代码在Java文件中的顺序不一致，代码指令并不是严格按照代码语句顺序执行的，它们的顺序被改变的情况就叫做重排序。</p><p>重排序例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/8 15:37</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span>  重排序的现象,根据执行顺序，可以出现四种情况：</span></span><br><span class="line"><span class="comment"> * 1，0   0，1   1，1   0，0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutOfOrderExecution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (; ; ) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            x = <span class="number">0</span>;</span><br><span class="line">            y = <span class="number">0</span>;</span><br><span class="line">            a = <span class="number">0</span>;</span><br><span class="line">            b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">            Thread one = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        latch.countDown();</span><br><span class="line">                        latch.await();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    a = <span class="number">1</span>;</span><br><span class="line">                    x = b;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            Thread two = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        latch.countDown();</span><br><span class="line">                        latch.await();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    b = <span class="number">1</span>;</span><br><span class="line">                    y = a;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            two.start();</span><br><span class="line">            one.start();</span><br><span class="line">            latch.countDown();</span><br><span class="line">            one.join();</span><br><span class="line">            two.join();</span><br><span class="line"></span><br><span class="line">            String result = <span class="string">&quot;第&quot;</span> + i + <span class="string">&quot;次（&quot;</span> + x + <span class="string">&quot;,&quot;</span> + y + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (x == <span class="number">0</span> &amp;&amp; y == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(result);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(result);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>重排序的好处：</strong>提高处理速度。</p><p><strong>重排序的3种情况：</strong></p><ul><li>编译器优化：包括JVM，JIT编译器等。</li><li>CPU指令重排</li><li>内存的“重排序”：线程A的修改线程B看不到，引出可见性的问题。</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线程的生命周期状态</title>
      <link href="2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89--%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%8A%B6%E6%80%81/"/>
      <url>2020/12/17/java%E5%B9%B6%E5%8F%91/Java%E5%B9%B6%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89--%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%8A%B6%E6%80%81/</url>
      
        <content type="html"><![CDATA[<h2 id="Java并发（四）–线程的生命周期状态"><a href="#Java并发（四）–线程的生命周期状态" class="headerlink" title="Java并发（四）–线程的生命周期状态"></a>Java并发（四）–线程的生命周期状态</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>[TOC]</p><h3 id="1-六种生命周期介绍"><a href="#1-六种生命周期介绍" class="headerlink" title="1. 六种生命周期介绍"></a>1. 六种生命周期介绍</h3><p>​    Java线程的状态可以使用监控工具查看，也可以通过Thread.getState()调用来获取。返回值是一个枚举类型。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">线程状态。线程可以处于以下状态之一：</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">        尚未启动的线程处于此状态。</span><br><span class="line">        NEW,</span><br><span class="line"></span><br><span class="line">        Java虚拟机中执行的线程处于此状态。</span><br><span class="line">        RUNNABLE,</span><br><span class="line"></span><br><span class="line">        等待监视器锁定而被阻塞的线程处于这种状态。</span><br><span class="line">        BLOCKED,</span><br><span class="line"></span><br><span class="line">        无限期等待另一个线程执行特定操作处于此状态。</span><br><span class="line">        WAITING,</span><br><span class="line"></span><br><span class="line">        等待另一线程执行操作的线程在指定的等待时间内处于此状态。</span><br><span class="line">        TIMED_WAITING,</span><br><span class="line"></span><br><span class="line">        已退出的线程处于此状态。</span><br><span class="line">        TERMINATED;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    返回此线程的状态。</span><br><span class="line">    <span class="function"><span class="keyword">public</span> State <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// get current thread state</span></span><br><span class="line">        <span class="keyword">return</span> sun.misc.VM.toThreadState(threadStatus);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol><li><p><strong>NEW</strong>:</p><p>一个已创建但是没有启动的线程处于这个状态，由于一个线程实例只能被启动一次，因此一个线程只可能有一次处于该状态。</p></li><li><p><strong>Runnable</strong>:</p><p>该状态可以看作是一个复合状态，包括两个子状态：Ready和Running。前者表示该状态的线程可以被线程调度器进行调度使之处于Running状态。后者表示处于该状态的线程正在运行，即相应线程对象的run()方法所对应的指令正在由处理器执行。执行Thread.yield()的线程，其状态可能有Running转换位Ready。处于Ready子状态的线程也被称为活跃线程。</p></li><li><p><strong>Blocked：</strong></p><p>一个线程发起一个阻塞式I/O操作后，或者申请一个由其他线程持有的独占资源（比如锁）时，相应的线程会处于该状态。处于Blocked状态的线程不会占用处理器资源。当阻塞式I/O操作完成或者线程申请到了资源，该线程的状态又可以转换为Runnable。</p></li><li><p><strong>Waiting：</strong></p><p>一个线程执行了某些特定的方法之后会处于这种等待其他线程执行另外一些特定操作的状态。具体方法以及转换看下图。</p></li><li><p><strong>Timed_Waiting:</strong></p><p>该状态与Waiting相似，差别在于处于该状态的线程并非无限制的等待其他线程执行特定操作，而是处于带有时间限制的等待状态。当其他线程没有在指定时间内执行该线程所期望的特定操作时，该线程的状态自动转换为Runnable。</p></li><li><p><strong>Terminated：</strong></p><p>已经执行结束的线程处于这个状态，由于一个线程实例只能被启动一次，因此一个线程只可能有一次处于该状态。Thread.run()正常返回或者由于抛出异常而提前终止都会导致相应线程处于该状态。</p></li></ol><h3 id="2-状态转换图"><a href="#2-状态转换图" class="headerlink" title="2. 状态转换图"></a>2. 状态转换图</h3><p><img src="https://img-blog.csdnimg.cn/20200331154727784.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDg5OTA3,size_16,color_FFFFFF,t_70" alt="1585638239035"></p><h3 id="3-阻塞状态"><a href="#3-阻塞状态" class="headerlink" title="3. 阻塞状态"></a>3. 阻塞状态</h3><p>一般Blocked、Waiting、Timed_Waiting都称为阻塞状态。</p><h3 id="4-代码实践"><a href="#4-代码实践" class="headerlink" title="4. 代码实践"></a>4. 代码实践</h3><p>1.实现NEW、Runnable、Terminated三种状态：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 15:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> 实现NEW、Runnable、Terminated三种状态：</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewRunnableTerminatedTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        NewRunnableTerminatedTest runnable = <span class="keyword">new</span> NewRunnableTerminatedTest();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        <span class="comment">//打印出NEW</span></span><br><span class="line">        System.out.println(t1.getState());</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//打印出Runnable</span></span><br><span class="line">        System.out.println(t1.getState());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//打印出Terminated</span></span><br><span class="line">        System.out.println(t1.getState());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.实现BLOCKED、Waiting、Timed_Waiting</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/3/31 15:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span> 实现BLOCKED、Waiting、Timed_Waiting</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlockedWaitingTimedWaitingTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        syn();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">syn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            wait();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BlockedWaitingTimedWaitingTest runnable = <span class="keyword">new</span> BlockedWaitingTimedWaitingTest();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="comment">//打印出TIMED_WAITING，因为Thread.sleep(1000)处于休眠中</span></span><br><span class="line">        System.out.println(t1.getState());</span><br><span class="line">        <span class="comment">//打印出BLOCKED，因为想要执行syn()方法却拿不到锁</span></span><br><span class="line">        System.out.println(t2.getState());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//打印出WAITING,因为执行syn()方法中的wait()。</span></span><br><span class="line">        System.out.println(t1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 并发编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java并发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.IDEA创建JSP项目步骤.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/2.IDEA%E5%88%9B%E5%BB%BAJSP%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A4/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/2.IDEA%E5%88%9B%E5%BB%BAJSP%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="IDEA创建JSP项目步骤"><a href="#IDEA创建JSP项目步骤" class="headerlink" title="IDEA创建JSP项目步骤"></a>IDEA创建JSP项目步骤</h2><p><strong>参考博客:<a href="https://blog.csdn.net/a145127/article/details/84893355">https://blog.csdn.net/a145127/article/details/84893355</a></strong></p><h3 id="1-创建"><a href="#1-创建" class="headerlink" title="1.创建"></a>1.创建</h3><h4 id="1-创建步骤"><a href="#1-创建步骤" class="headerlink" title="1.创建步骤"></a>1.创建步骤</h4><p>1.新建项目</p><p>2.在web-INF下新建classes、lib两个目录</p><p>classes：保持编译后的.class文件</p><p>lib：存放jar包的文件夹</p><p>3.设置classes、设置lib</p><p>4.设置Artifacts（系统自动设置，如果没有则自己创建）</p><p>5.设置Facets（系统自动设置，如果没有则自己创建）</p><p>6.引入tomcat</p><p>7.如果需要使用JDBC，需导入JDBC驱动</p><p>8.配置tomcat</p><h5 id="1-创建项目，选择Web-Application"><a href="#1-创建项目，选择Web-Application" class="headerlink" title="1.创建项目，选择Web Application"></a>1.创建项目，选择Web Application</h5><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815108116.png" alt="1588815108116"></p><p>2.填写项目名称</p><p>3.点击Finnish，创建完成，项目结构如图：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815249526.png" alt="1588815249526"></p><h5 id="2-设置classes："><a href="#2-设置classes：" class="headerlink" title="2.设置classes："></a>2.设置classes：</h5><p>新建文件夹之后的目录：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364109723.png" alt="1589364109723"></p><p>设置编译输出目录为classes文件夹：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364218474.png" alt="1589364218474"></p><h5 id="3-设置lib"><a href="#3-设置lib" class="headerlink" title="3.设置lib:"></a>3.设置lib:</h5><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364271760.png" alt="1589364271760"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364302116.png" alt="1589364302116"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364319205.png" alt="1589364319205"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364343848.png" alt="1589364343848"></p><h5 id="4-设置Artifacts（系统自动设置，如果没有则自己创建）"><a href="#4-设置Artifacts（系统自动设置，如果没有则自己创建）" class="headerlink" title="4.设置Artifacts（系统自动设置，如果没有则自己创建）"></a>4.设置Artifacts（系统自动设置，如果没有则自己创建）</h5><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815885822.png" alt="1588815885822"></p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815893262.png" alt="1588815893262"></p><p>然后选上我们的Test项目：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815908901.png" alt="1588815908901"></p><h5 id="5-设置Facets（系统自动设置，如果没有则自己创建）"><a href="#5-设置Facets（系统自动设置，如果没有则自己创建）" class="headerlink" title="5.设置Facets（系统自动设置，如果没有则自己创建）"></a>5.设置Facets（系统自动设置，如果没有则自己创建）</h5><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815922445.png" alt="1588815922445"></p><p>手动创建如下：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815936029.png" alt="1588815936029"></p><p>也是选择Test项目</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815948926.png" alt="1588815948926"></p><p>然后点ok</p><h5 id="6-引入tomcat（如果不引入，在编写内置对象request、response等IDEA不会提示且会变红）"><a href="#6-引入tomcat（如果不引入，在编写内置对象request、response等IDEA不会提示且会变红）" class="headerlink" title="6.引入tomcat（如果不引入，在编写内置对象request、response等IDEA不会提示且会变红）"></a>6.引入tomcat（如果不引入，在编写内置对象request、response等IDEA不会提示且会变红）</h5><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364844569.png" alt="1589364844569"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364861006.png" alt="1589364861006"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589364895045.png" alt="1589364895045"></p><h5 id="7-如果需要使用JDBC，需导入JDBC驱动"><a href="#7-如果需要使用JDBC，需导入JDBC驱动" class="headerlink" title="7.如果需要使用JDBC，需导入JDBC驱动"></a>7.如果需要使用JDBC，需导入JDBC驱动</h5><p>把数据库驱动复制到lib文件中</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589427426934.png" alt="1589427426934"></p><h5 id="8-配置Tomcat-服务器"><a href="#8-配置Tomcat-服务器" class="headerlink" title="8.配置Tomcat 服务器"></a>8.配置Tomcat 服务器</h5><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815961420.png" alt="1588815961420"></p><p>如下</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815975902.png" alt="1588815975902"></p><p>添加后如下：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588815992847.png" alt="1588815992847"></p><p>基本设置如下</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589365217897.png" alt="1589365217897"></p><p>创建：</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588816025958.png" alt="1588816025958"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589365188141.png" alt="1589365188141"></p><p>说明：此处的/test 是项目在 服务器的 路径即：<code>localhost:8080/</code>就是我们服务器主页的路径，默认访问index.jsp。</p><p>然后点ok</p><p>会自动创建如下</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1588816058525.png" alt="1588816058525"></p><p>然后启动tomcat，访问index.jsp</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1588816509860.png" alt="1588816509860"></p><p>浏览器显示</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1588816555974.png" alt="1588816555974"></p><p>项目创建完成！</p><h3 id="2-问题"><a href="#2-问题" class="headerlink" title="2.问题"></a>2.问题</h3><p>1.引入jstl标签变红：</p><p>​    原因：缺少了两个架包，jstl.jar和 standard.jar。</p><p>​    解决办法：</p><p>​    第一种：1.在tomcat\webapps\examples\WEB-INF\lib目录下找到那两个架包：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589446920690.png" alt="1589446920690"></p><p>​            2.把这两个包复制粘贴到tomcat\lib目录下，重新打开IDEA或者刷新项目。</p><p>​    第二种：把tomcat\webapps\examples\WEB-INF\lib目录下的两个架包直接复制到项目的WebContent目录下的WEB-INF下的lib里面：</p><p>​    <img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589446989569.png" alt="1589446989569"></p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>16.连接MySQL数据库url报错问题.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/16.%E8%BF%9E%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93url%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/16.%E8%BF%9E%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93url%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<hr><p>title:<br>date:<br>updated:<br>type:<br>comments:<br>description:<br>keywords:<br>top <em>img:<br>mathjax:<br>katex:<br>aside:<br>aplayer:<br>highlight</em> shrink: </p><hr><p>1.在.properties文件中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;lemon?useUnicode&#x3D;true&amp;useJDBCCompliantTimezoneShift&#x3D;true&amp;useLegacyDatetimeCode&#x3D;false&amp;serverTimezone&#x3D;UTC</span><br></pre></td></tr></table></figure><p>2.在.xml中：</p><p>&amp;要用变蓝的部分替换：具体参考博客：<a href="https://www.cnblogs.com/softidea/p/5765624.html">https://www.cnblogs.com/softidea/p/5765624.html</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url=&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true<span class="symbol">&amp;amp;</span>useJDBCCompliantTimezoneShift=true<span class="symbol">&amp;amp;</span>useLegacyDatetimeCode=false<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在mysql5中，jdbc连接mysql5是com.mysql.jdbc.Driver，而mysql6以及以上是com.mysql.cj.jdbc.Driver，并且在url之后要指定时区。</p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4.JDBC.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/4.JDBC/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/4.JDBC/</url>
      
        <content type="html"><![CDATA[<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="1-JDBC的功能图和过程图"><a href="#1-JDBC的功能图和过程图" class="headerlink" title="1.JDBC的功能图和过程图"></a>1.JDBC的功能图和过程图</h3><p>JDBC的API：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1588990948236.png" alt="1588990948236"></p><p>JDBC架构图：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1588990988323.png" alt="1588990988323"></p><h3 id="2-JDBC介绍以及使用过程"><a href="#2-JDBC介绍以及使用过程" class="headerlink" title="2.JDBC介绍以及使用过程"></a>2.JDBC介绍以及使用过程</h3><p>1.JDBC:Java DataBase Connectivity  可以为多种关系型数据库DBMS 提供统一的访问方式，用Java来操作数据库<br>2.JDBC API 主要功能：<br>三件事，具体是通过以下类/接口实现：</p><ol><li><p>DriverManager ： 管理jdbc驱动</p></li><li><p>Connection： 连接（通过DriverManager产生）</p></li><li><p>Statement（） ：增删改查  （通过Connection产生 ）</p><p>PreparedStatement():增删改查  （通过Connection产生 ）</p><p>CallableStatement  ： 调用数据库中的 存储过程/存储函数  （通过Connection产生 ）</p></li><li><p>Result ：返回的结果集  （上面的Statement等产生 ）</p></li></ol><p>Connection产生操作数据库的对象：</p><p>Connection产生Statement对象：createStatement()<br>Connection产生PreparedStatement对象：prepareStatement()<br>Connection产生CallableStatement对象：prepareCall();</p><p>Statement操作数据库：<br>增删改：executeUpdate()<br>查询：executeQuery();</p><p>ResultSet：保存结果集 select * from xxx<br>next():光标下移，判断是否有下一条数据；true/false<br>previous():  true/false<br>getXxx(字段名|位置):获取具体的字段值 </p><p>PreparedStatement操作数据库：<br>public interface PreparedStatement extends Statement </p><p>增删改：executeUpdate()<br>查询：executeQuery();<br>–此外<br>赋值操作 setXxx();</p><h3 id="3-PreparedStatement与Statement在使用时的区别："><a href="#3-PreparedStatement与Statement在使用时的区别：" class="headerlink" title="3.PreparedStatement与Statement在使用时的区别："></a>3.PreparedStatement与Statement在使用时的区别：</h3><p>1.Statement:<br>sql<br>executeUpdate(sql)</p><p>2.PreparedStatement:<br>sql(可能存在占位符?)<br>在创建PreparedStatement 对象时，将sql预编译 prepareStatement(sql)<br>executeUpdate()<br>setXxx()替换占位符？</p><p>推荐使用PreparedStatement：原因如下：<br>1.编码更加简便（避免了字符串的拼接）<br>String name = “zs” ;<br>int age = 23 ;</p><p>stmt:<br>String sql =” insert into student(stuno,stuname) values(‘“+name+”‘,  “+age+” )    “ ;<br>stmt.executeUpdate(sql);</p><p>pstmt:<br>String sql =” insert into student(stuno,stuname) values(?,?) “ ;<br>pstmt = connection.prepareStatement(sql);//预编译SQL<br>pstmt.setString(1,name);<br>pstmt.setInt(2,age);</p><p>executeUpdate()</p><p>2.提高性能(因为 有预编译操作，预编译只需要执行一次)<br>需要重复增加100条数<br>stmt:<br>String sql =” insert into student(stuno,stuname) values(‘“+name+”‘,  “+age+” )    “ ;<br>for(100)<br>stmt.executeUpdate(sql);</p><p>pstmt:<br>String sql =” insert into student(stuno,stuname) values(?,?) “ ;<br>pstmt = connection.prepareStatement(sql);//预编译SQL<br>pstmt.setString(1,name);<br>pstmt.setInt(2,age);<br>for( 100){<br>pstmt.executeUpdate();<br>}</p><p>3.安全（可以有效防止sql注入）<br>sql注入： 将客户输入的内容  和 开发人员的SQL语句 混为一体</p><p>stmt:存在被sql注入的风险<br>(例如输入  用户名：任意值 ‘ or 1=1 –<br>       密码：任意值)<br>分析：<br>select count(<em>) from login where uname=’任意值 ‘ or 1=1 –’ and upwd =’任意值’  ;<br>select count(</em>) from login where uname=’任意值 ‘ or 1=1 ;<br>select count(*) from login ;</p><p>select count(*) from login where uname=’”+name+”‘ and upwd =’”+pwd+”‘ </p><p>pstmt:有效防止sql注入</p><p>推荐使用pstmt</p><h3 id="4-jdbc访问数据库的具体步骤："><a href="#4-jdbc访问数据库的具体步骤：" class="headerlink" title="4.jdbc访问数据库的具体步骤："></a>4.jdbc访问数据库的具体步骤：</h3><p>a.导入驱动，加载具体的驱动类<br>b.与数据库建立连接<br>c.发送sql，执行<br>d.处理结果集 （查询）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String password = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//导入驱动 加载驱动</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="comment">//建立连接对象</span></span><br><span class="line">            connection = DriverManager.getConnection(URL,username, password);</span><br><span class="line">            <span class="comment">//创建SQL  执行</span></span><br><span class="line">            stmt = connection.createStatement();</span><br><span class="line">            String sql = <span class="string">&quot;insert into user VALUES (&#x27;lisi&#x27;,&#x27;123&#x27;);&quot;</span>;</span><br><span class="line">            <span class="comment">//执行SQL</span></span><br><span class="line">            <span class="keyword">int</span> count = stmt.executeUpdate(sql);  <span class="comment">// 返回值表示 增删改 几条数据</span></span><br><span class="line">            <span class="comment">// 处理结果</span></span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;操作成功&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">                        stmt.close();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (connection != <span class="keyword">null</span>)</span><br><span class="line">                        connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//导入驱动 加载驱动</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="comment">//建立连接对象</span></span><br><span class="line">            connection = DriverManager.getConnection(URL,username, password);</span><br><span class="line">            <span class="comment">//创建SQL  执行</span></span><br><span class="line">            String sql = <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//执行SQL</span></span><br><span class="line">            rs = pstmt.executeQuery();  <span class="comment">// 返回值表示 增删改 几条数据</span></span><br><span class="line">            <span class="comment">// 处理结果</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                String upwd = rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                String uname = rs.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">                System.out.println(uname+<span class="string">&quot; &quot;</span> + upwd);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)</span><br><span class="line">                    rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>)</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>)</span><br><span class="line">                    connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//update();</span></span><br><span class="line">        query();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCLogin</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String password = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//导入驱动 加载驱动</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="comment">//建立连接对象</span></span><br><span class="line">            connection = DriverManager.getConnection(URL,username, password);</span><br><span class="line">            <span class="comment">//创建SQL  执行</span></span><br><span class="line"></span><br><span class="line">            Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">            String name = input.nextLine() ;</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入密码：&quot;</span>);</span><br><span class="line">            String pwd = input.nextLine() ;</span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;select count(*) from userss where username= ? and password = ? &quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">            pstmt.setString(<span class="number">2</span>,pwd);</span><br><span class="line">            <span class="comment">//执行SQL</span></span><br><span class="line">            rs = pstmt.executeQuery();  <span class="comment">// 返回值表示 增删改 几条数据</span></span><br><span class="line">            <span class="comment">// 处理结果</span></span><br><span class="line">           <span class="keyword">int</span> count = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                count = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;登录成功！&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;登录失败！&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)</span><br><span class="line">                    rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>)</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>)</span><br><span class="line">                    connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//update();</span></span><br><span class="line">        query();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-不同数据库的连接方式："><a href="#5-不同数据库的连接方式：" class="headerlink" title="5.不同数据库的连接方式："></a>5.不同数据库的连接方式：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">数据库驱动 ：Oracle</span><br><span class="line">驱动jar:  ojdbc-x.jar</span><br><span class="line">具体驱动类：oracle.jdbc.OracleDriver</span><br><span class="line">连接字符串：jdbc:oracle:thin:<span class="meta">@localhost</span>:<span class="number">1521</span>:ORCL</span><br><span class="line"></span><br><span class="line">数据库驱动 ：MySQL</span><br><span class="line">驱动jar:  mysql-connector-java-x.jar</span><br><span class="line">具体驱动类：com.mysql.cj.jdbc.Driver</span><br><span class="line">连接字符串：jdbc:mysql:<span class="comment">//localhost:3306/数据库实例名</span></span><br><span class="line"></span><br><span class="line">数据库驱动 ：SqlServer</span><br><span class="line">驱动jar:  sqljdbc-x.jar</span><br><span class="line">具体驱动类：com.microsoft.sqlserver.jdbc.SQLServerDriver</span><br><span class="line">连接字符串：jdbc:microsoft:sqlserver:localhost:<span class="number">1433</span>;databasename=数据库实例名</span><br><span class="line"></span><br><span class="line">使用jdbc操作数据库时，如果对数据库进行了更换，只需要替换：驱动、具体驱动类、连接字符串、用户名、密码</span><br></pre></td></tr></table></figure><h3 id="6-JSP访问数据库"><a href="#6-JSP访问数据库" class="headerlink" title="6.JSP访问数据库"></a>6.JSP访问数据库</h3><p>JSP就是在html中嵌套的java代码，因此 java代码可以写在jsp中（&lt;%  … %&gt;）</p><p>导包操作：java项目 ：1 Jar复制到工程中 2.右键该Jar :build path -&gt;add to build Path<br>          Web项目：jar复制到WEB-INF/lib</p><p>核心：就是将 java中的JDBC代码，复制到 JSP中的&lt;% … %&gt;</p><p>注意：如果jsp出现错误：The import Xxx cannot be resolved</p><p>尝试解决步骤：<br>    a.(可能是Jdk、tomcat版本问题) 右键项目-&gt;build path，将其中 报错的 libary或Lib 删除后 重新导入<br>    b.清空各种缓存：右键项目-&gt;Clean tomcat… clean  （Project -clean或者 进tomcat目录 删除里面work的子目录）<br>    c.删除之前的tomcat，重新解压缩、配置tomcat，重启计算机<br>    d.如果类之前没有包，则将该类加入包中</p><p>Demo：登录</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: dell</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">5</span>/<span class="number">9</span></span><br><span class="line">  Time: <span class="number">17</span>:<span class="number">10</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;check2.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;upwd&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;util.JDBCDao&quot;</span> %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: dell</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">5</span>/<span class="number">13</span></span><br><span class="line">  Time: <span class="number">11</span>:<span class="number">20</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        String uname = request.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        String upwd = request.getParameter(<span class="string">&quot;upwd&quot;</span>);</span><br><span class="line">        JDBCDao jdbcDao = <span class="keyword">new</span> JDBCDao();</span><br><span class="line">        <span class="keyword">int</span> result = jdbcDao.login(uname, upwd);</span><br><span class="line">        <span class="keyword">if</span> (result &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            out.println(<span class="string">&quot;登录成功！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (result == <span class="number">0</span>)&#123;</span><br><span class="line">            out.println(<span class="string">&quot;用户名和密码有误！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            out.println(<span class="string">&quot;系统异常！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/5/13 10:41</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String USERNAME = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PWD = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DRIVER = <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">login</span><span class="params">(String uname, String upwd)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// a.导入驱动，加载具体的驱动类</span></span><br><span class="line">            Class.forName(DRIVER);<span class="comment">// 加载具体的驱动类</span></span><br><span class="line">            <span class="comment">// b.与数据库建立连接</span></span><br><span class="line">            connection = DriverManager.getConnection(URL, USERNAME, PWD);</span><br><span class="line">            <span class="comment">// c.发送sql，执行(增删改、【查】)</span></span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;select count(*) from userss where username= ? and password =?&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, uname);</span><br><span class="line">            pstmt.setString(<span class="number">2</span>, upwd);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行SQL(增删改executeUpdate()，查询executeQuery())</span></span><br><span class="line">            rs = pstmt.executeQuery(); <span class="comment">// 返回值表示 增删改 几条数据</span></span><br><span class="line">            <span class="comment">// d.处理结果</span></span><br><span class="line">            <span class="keyword">int</span> count = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                count = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (rs != <span class="keyword">null</span>) rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3.JSP页面元素和九大隐式对象.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/3.JSP%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E5%92%8C%E4%B9%9D%E5%A4%A7%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/3.JSP%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E5%92%8C%E4%B9%9D%E5%A4%A7%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="JSP页面元素和九大隐式对象"><a href="#JSP页面元素和九大隐式对象" class="headerlink" title="JSP页面元素和九大隐式对象"></a>JSP页面元素和九大隐式对象</h2><h3 id="1-jsp页面元素"><a href="#1-jsp页面元素" class="headerlink" title="1.jsp页面元素"></a>1.jsp页面元素</h3><p>1.脚本程序：&lt;%    局部变量、Java语句    %&gt;</p><p>2.JSP声明：&lt;%!          全局变量、方法定义                    %&gt;</p><p>3.JSP表达式：&lt;%= 输出表达式    %&gt;    </p><p>4.指令</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page ... %&gt;   定义页面的依赖属性，比如脚本语言、error页面、缓存需求等等</span><br><span class="line">    language:jsp页面使用的脚本语言</span><br><span class="line">    <span class="keyword">import</span>:导入类</span><br><span class="line">    pageEncoding:jsp文件自身编码  jsp -&gt;java</span><br><span class="line">    contentType:浏览器解析jsp的编码</span><br><span class="line">    &lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>  <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">    </span><br><span class="line">&lt;%@ include ... %&gt;      包含其他文件</span><br><span class="line"></span><br><span class="line">&lt;%@ taglib ... %&gt;       引入标签库的定义，可以是自定义标签</span><br></pre></td></tr></table></figure><p>5.注释</p><p>​    html注释<!-- -->  ,可以被客户 通过浏览器查看源码 所观察到<br>​    java注释//     /<em>…</em>/<br>​    jsp注释&lt;%– –%&gt;</p><h3 id="2-小知识点"><a href="#2-小知识点" class="headerlink" title="2.小知识点"></a>2.小知识点</h3><p>1.out.println不能回车，需要＋</br>，out.print() 、&lt;%= %&gt;可以直接解析html代码。</p><p>2.修改web.xml、配置文件、Java  需要重启tomcat服务</p><p>​    修改jsp、html、css、js，不需要重启</p><p>3.并不是 任何的内部跳转都能访问WEB-INF；原因是 跳转有2种方式：请求转发 、重定向</p><p>4.如果在jsp中写request等对象的方法时，没有提示且变红，需要在project Structure–modules–dependencies–+号–libraries–添加tomcat。</p><p>5.get提交方式:  method=”get” 和 地址栏 、超链接(<a href="xx">)请求方式 默认都属于get提交方式</p><p>6.get与post请求方式的区别：<br>    a.   get方式 在地址栏显示 请求信息  (但是地址栏能够容纳的 信息有限，4-5KB；如果请求数据存在大文件，图片等  会出现地址栏无法容纳全部的数据而出错) ；post不会显示<br>    b.   文件上传操作，必须是post<br>推荐使用post</p><p>7.统一请求的编码 request<br>get方式请求 如果出现乱码，解决：<br>    a.统一每一个变量的 编码 （不推荐）<br>        new String(  旧编码，新编码);<br>        name = new String(name.getBytes(“iso-8859-1”),”utf-8”);</p><p>​    b. 修改server.xml ，一次性的 更改tomcat默认get提交方式的编码 （utf-8）<br>​    建议 使用tomcat时， 首先在server.xml中 统一get方式的编码.. URIEncoding=”UTF-8”</p><p>post方式请求：<br>    request.setCharacterEncoding(“utf-8”) ;</p><h3 id="3-jsp九大内置对象"><a href="#3-jsp九大内置对象" class="headerlink" title="3.jsp九大内置对象"></a>3.jsp九大内置对象</h3><p>1.out：输出对象，向客户端输出内容。<br>2.request：请求对象；存储“客户端向服务端发送的请求信息”。<br>request对象的常见方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getParameter</span><span class="params">(String name)</span> :根据请求的字段名key （input标签的name属性值） ，返回字段值value （input标签的value属性值）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String[] <span class="title">getParameterValues</span><span class="params">(String name)</span>: 根据请求的字段名key ，返回多个字段值value  （checkbox）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setCharacterEncoding</span><span class="params">(<span class="string">&quot;编码格式utf-8&quot;</span>)</span> ：设置post方式的请求编码  （tomcat7以前默认iso-8859-1，tomcat8以后改为了utf-8）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">getRequestDispatcher</span><span class="params">(<span class="string">&quot;b.jsp&quot;</span>)</span>.<span class="title">forward</span><span class="params">(request,response)</span> </span>;  ：请求转发 的方式跳转页面   A - &gt; B</span><br><span class="line"></span><br><span class="line"><span class="function">ServletContext <span class="title">getServerContext</span><span class="params">()</span>:获取项目的ServletContext对象</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure><p>示例：注册、显示</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;show.jsp&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=&quot;text&quot; name=&quot;uname&quot;&gt;&lt;/br&gt;</span><br><span class="line">        密码：&lt;input type=&quot;password&quot; name=&quot;upassword&quot;&gt;&lt;/br&gt;</span><br><span class="line">        年龄：&lt;input type=&quot;text&quot; name=&quot;uage&quot;&gt;&lt;/br&gt;</span><br><span class="line">        爱好：&lt;/br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;uhobbies&quot;</span> value=<span class="string">&quot;篮球&quot;</span>&gt;篮球</span><br><span class="line">            &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;uhobbies&quot;</span> value=<span class="string">&quot;足球&quot;</span>&gt;足球</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; name=&quot;uhobbies&quot; value=&quot;台球&quot;&gt;台球&lt;/br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;注册&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        String uname = request.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        String upassword = request.getParameter(<span class="string">&quot;upassword&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> uage = Integer.parseInt(request.getParameter(<span class="string">&quot;uage&quot;</span>));</span><br><span class="line">        String[] uhobbies = request.getParameterValues(<span class="string">&quot;uhobbies&quot;</span>);</span><br><span class="line">    %&gt;</span><br><span class="line">    注册成功！&lt;/br&gt;</span><br><span class="line">    信息显示：&lt;/br&gt;</span><br><span class="line">    姓名：&lt;%=uname %&gt;&lt;/br&gt;</span><br><span class="line">    密码：&lt;%=upassword %&gt;&lt;/br&gt;</span><br><span class="line">    年龄：&lt;%=uage %&gt;&lt;/br&gt;</span><br><span class="line">    爱好：&lt;/br&gt;&lt;%</span><br><span class="line">        <span class="keyword">if</span> (uhobbies != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(String uhobbie : uhobbies)&#123;</span><br><span class="line">                out.print(uhobbie+<span class="string">&quot;&amp;nbsp&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>3.response：响应对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">提供的方法：</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addCookie</span><span class="params">( Cookie cookie )</span></span>; 服务端向客户端增加cookie对象</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendRedirect</span><span class="params">(String location )</span> <span class="keyword">throws</span> IOException</span>; :页面跳转的一种方式（重定向）</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setContetType</span><span class="params">(String type)</span>:设置服务端响应的编码（设置服务端的contentType类型）</span></span><br></pre></td></tr></table></figure><p>示例：登陆</p><p>login.jsp  -&gt; check.jsp  -&gt;success.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;check.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户登录：&lt;/br&gt;</span><br><span class="line">        用户名：&lt;input type=&quot;text&quot; name=&quot;uname&quot;&gt;&lt;/br&gt;</span><br><span class="line">        密码：&lt;input type=&quot;password&quot; name=&quot;upassword&quot;&gt;&lt;/br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        String uname = request.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        String upassword = request.getParameter(<span class="string">&quot;upassword&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (uname.equals(<span class="string">&quot;zs&quot;</span>)  &amp;&amp; upassword.equals(<span class="string">&quot;123&quot;</span>))&#123;</span><br><span class="line">            <span class="comment">//response.sendRedirect(&quot;success.jsp&quot;);</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            out.print(<span class="string">&quot;用户名或密码有误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">登录成功！&lt;/br&gt;</span><br><span class="line">    欢迎：</span><br><span class="line">    &lt;%</span><br><span class="line">        String uname = request.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        out.print(uname);</span><br><span class="line">    %&gt;</span><br></pre></td></tr></table></figure><pre><code>                   请求转发                  重定向</code></pre><p>地址栏是否改变        不变(check.jsp)        改变(success.jsp)</p><p>是否保留第一次           保留                           不保留        –4种范围对象<br>请求时的数据</p><p>请求的次数                      1                                  2</p><p>跳转发生的位置          服务端             客户端发出的第二次跳转</p><p>转发和重定向的跳转图：</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1588901345688.png" alt="1588901345688">4</p><p>4.session(服务端)<br>Cookie（客户端，不是内置对象）:Cookie是由 服务端生成的 ，再发送给客户端保存。<br>相当于 本地缓存的作用： 客户端(hello.mp4,zs/abc)-&gt;服务端(hello.mp4；zs/abc)<br>作用：提高访问服务端的效率，但是安全性较差。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Cookie：name=value   </span><br><span class="line">javax.servlet.http.Cookie</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Cookie</span><span class="params">(String name,String value)</span></span></span><br><span class="line"><span class="function">String <span class="title">getName</span><span class="params">()</span>：获取name</span></span><br><span class="line"><span class="function">String <span class="title">getValue</span><span class="params">()</span>:获取value</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMaxAge</span><span class="params">(<span class="keyword">int</span> expiry)</span></span>;最大有效期 （秒）</span><br><span class="line"></span><br><span class="line">服务端准备Cookie：</span><br><span class="line">response.addCookie(Cookie cookie)</span><br><span class="line">页面跳转（转发，重定向）</span><br><span class="line">客户端获取cookie:  </span><br><span class="line">request.getCookies();</span><br></pre></td></tr></table></figure><p>a.服务端增加cookie :response对象；客户端获取对象：request对象<br>b.不能直接获取某一个单独对象，只能一次性将 全部的cookie拿到</p><p>通过F12可以发现  除了自己设置的Cookie对象外，还有一个name为 JSESSIONID的cookie</p><p>建议 cookie只保存  英文数字，否则需要进行编码、解码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实践：使用Cookie实现  记住用户名  功能</span><br></pre></td></tr></table></figure><p>session机制：</p><p>客户端第一次请求服务端时，（jsessionid-sessionid）服务端会产生一个session对象（用于保存该客户的信息）；<br>并且每个session对象 都会有一个唯一的 sessionId( 用于区分其他session);<br>服务端由会 产生一个cookie，并且 该cookie的name=JSESSIONID ,value=服务端sessionId的值；<br>然后 服务端会在 响应客户端的同时 将该cookie发送给客户端，至此 客户端就有了 一个cookie(JSESSIONID)；<br>因此，客户端的cookie就可以和服务端的session一一对应（JSESSIONID - sessionID）</p><p>客户端第二/n次请求服务端时:服务端会先用客户端cookie种的JSESSIONID  去服务端的session中匹配sessionid,如果匹配成功（cookie  jsessionid和sesion sessionid），说明此用户 不是第一次访问,无需登录；</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">session方法：</span><br><span class="line"><span class="function">String <span class="title">getId</span><span class="params">()</span> :获取sessionId  </span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isNew</span><span class="params">()</span> :判断是否是 新用户（第一次访问）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">invalidate</span><span class="params">()</span>:使session失效  （退出登录、注销）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">()</span></span></span><br><span class="line"><span class="function">Object <span class="title">getAttribute</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMaxInactiveInterval</span><span class="params">(秒)</span> ：设置最大有效 非活动时间 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMaxInactiveInterval</span><span class="params">()</span>:获取最大有效 非活动时间 </span></span><br></pre></td></tr></table></figure><p>示例：<br>登录</p><p>客户端在第一次请求服务端时，如果服务端发现 此请求没有 JSESSIONID,则会创建一个 name=JSESIONID的cookie  并返回给客户端</p><p>Cookie：<br>a.不是内对对象，要使用必须new<br>b.但是，服务端会 自动生成一个(服务端自动new一个cookie) name=JSESIONID的cookie  并返回给客户端</p><p>cookie和session的区别：<br>        session        cookie<br>保存的位置    服务端        客户端<br>安全性        较安全        较不安全<br>保存的内容    Object        String    </p><p>5.appliation 全局对象<br>String getContextPath()    虚拟路径<br>String getRealPath(String name): 绝对路径（虚拟路径 相对的绝对路径）</p><p>6.pageContext   JSP页面容器</p><p>7.config   配置对象（服务器配置信息）</p><p>8.page  当前JSP页面对象</p><p>9.exception   异常对象</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">以上4个对象共有的方法：</span><br><span class="line">Object getAttribute(String name):根据属性名，或者属性值</span><br><span class="line">void setAttribute(String name,Object obj) :设置属性值（新增，修改）</span><br><span class="line">setAttribute(&quot;a&quot;,&quot;b&quot;) ;&#x2F;&#x2F;如果a对象之前不存在，则新建一个a对象 ；</span><br><span class="line"> 如果a之前已经存在，则将a的值改为b</span><br><span class="line">void removeAttribute(String name)：根据属性名，删除对象</span><br></pre></td></tr></table></figure><p>a.<br>pageContext 当前页面有效 (页面跳转后无效)</p><p>b.<br>request   同一次请求有效；其他请求无效 （请求转发后有效；重定向后无效）</p><p>c.<br>session  同一次会话有效  （无论怎么跳转，都有效；关闭/切换浏览器后无效 ； 从 登陆-&gt;退出 之间 全部有效）</p><p>d.<br>application<br>    全局变量；整个项目运行期间 都有效 (切换浏览器 仍然有效)；关闭服务、其他项目 无效</p><p>-&gt;多个项目共享、重启后仍然有效 ：JNDI</p><p>1.以上的4个范围对象，通过 setAttribute()复制，通过getAttribute()取值；<br>2.以上范围对象，尽量使用最小的范围。因为 对象的范围越大，造成的性能损耗越大。</p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.Javabean.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/5.Javabean/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/5.Javabean/</url>
      
        <content type="html"><![CDATA[<h2 id="Javabean"><a href="#Javabean" class="headerlink" title="Javabean"></a>Javabean</h2><h3 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h3><p>将 jsp中 登录操作的代码  转移到了LoginDao.java；其中LoginDao类 就称之为JavaBean。</p><p>JavaBean的作用：</p><p>​    a.减轻的jsp复杂度  </p><p>​    b.提高代码复用（以后任何地方的 登录操作，都可以通过调用LoginDao实现）</p><p>JavaBean（就是一个Java类）的定义：满足一下2点 ，就可以称为JavaBean<br>    a.public 修饰的类  ,public 无参构造<br>    b.所有属性(如果有) 都是private，并且提供set/get   (如果boolean 则get 可以替换成is)</p><p>使用层面，Java分为2大类：<br>    a.封装业务逻辑的JavaBean (LoginDao.java封装了登录逻辑)            逻辑<br>        可以将jsp中的JDBC代码，封装到Login.java类中 （Login.java）</p><p>​    b.封装数据的JavaBean   （实体类，Student.java  Person.java  ）        数据<br>​        对应于数据库中的一张表<br>​        Login login = new Login(uname,upwd) ;//即用Login对象 封装了2个数据（用户名 和密码）</p><p>封装数据的JavaBean 对应于数据库中的一张表   (Login(name,pwd))<br>封装业务逻辑的JavaBean 用于操作 一个封装数据的JavaBean  </p><p>可以发现，JavaBean可以简化 代码(jsp-&gt;jsp+java)、提供代码复用(LoginDao.java)</p><h3 id="2-Demo"><a href="#2-Demo" class="headerlink" title="2.Demo"></a>2.Demo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javabean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/5/13 11:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Login</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Login</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: dell</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">5</span>/<span class="number">9</span></span><br><span class="line">  Time: <span class="number">17</span>:<span class="number">10</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;check2.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;upwd&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;dao.JDBCDao&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javabean.Login&quot;</span> %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: dell</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">5</span>/<span class="number">13</span></span><br><span class="line">  Time: <span class="number">11</span>:<span class="number">20</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        String uname = request.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        String upwd = request.getParameter(<span class="string">&quot;upwd&quot;</span>);</span><br><span class="line">        Login login  = <span class="keyword">new</span> Login(uname, upwd);</span><br><span class="line"></span><br><span class="line">        JDBCDao jdbcDao = <span class="keyword">new</span> JDBCDao();</span><br><span class="line">        <span class="keyword">int</span> result = jdbcDao.login(login);</span><br><span class="line">        <span class="keyword">if</span> (result &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            out.println(<span class="string">&quot;登录成功！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (result == <span class="number">0</span>)&#123;</span><br><span class="line">            out.println(<span class="string">&quot;用户名和密码有误！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            out.println(<span class="string">&quot;系统异常！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javabean.Login;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/5/13 10:41</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@describe</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String USERNAME = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PWD = <span class="string">&quot;107462&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DRIVER = <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">login</span><span class="params">(Login login)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// a.导入驱动，加载具体的驱动类</span></span><br><span class="line">            Class.forName(DRIVER);<span class="comment">// 加载具体的驱动类</span></span><br><span class="line">            <span class="comment">// b.与数据库建立连接</span></span><br><span class="line">            connection = DriverManager.getConnection(URL, USERNAME, PWD);</span><br><span class="line">            <span class="comment">// c.发送sql，执行(增删改、【查】)</span></span><br><span class="line"></span><br><span class="line">            String sql = <span class="string">&quot;select count(*) from userss where username= ? and password =?&quot;</span>;</span><br><span class="line">            pstmt = connection.prepareStatement(sql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, login.getUsername());</span><br><span class="line">            pstmt.setString(<span class="number">2</span>, login.getPassword());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行SQL(增删改executeUpdate()，查询executeQuery())</span></span><br><span class="line">            rs = pstmt.executeQuery(); <span class="comment">// 返回值表示 增删改 几条数据</span></span><br><span class="line">            <span class="comment">// d.处理结果</span></span><br><span class="line">            <span class="keyword">int</span> count = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                count = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (rs != <span class="keyword">null</span>) rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="keyword">null</span>) pstmt.close();<span class="comment">// 对象.方法</span></span><br><span class="line">                <span class="keyword">if</span> (connection != <span class="keyword">null</span>) connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.MVC和Servlet介绍.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/6.MVC%E5%92%8CServlet%E4%BB%8B%E7%BB%8D/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/6.MVC%E5%92%8CServlet%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="MVC和Servlet介绍"><a href="#MVC和Servlet介绍" class="headerlink" title="MVC和Servlet介绍"></a>MVC和Servlet介绍</h2><h3 id="1-MVC模式"><a href="#1-MVC模式" class="headerlink" title="1.MVC模式"></a>1.MVC模式</h3><p>M：Model    ，模型  ：一个功能。用JavaBean实现。</p><p>V:View，视图： 用于展示、以及与用户交互。使用html  js  css jsp jquery等前端技术实现</p><p>C:Controller，控制器 ：接受请求，将请求跳转到模型进行处理；模型处理完毕后，再将处理的结果<br>            返回给 请求处 。 可以用jsp实现，  但是一般建议使用 Servlet实现控制器。</p><p>Jsp-&gt;Java(Servlet)-&gt;JSP</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589352618512.png" alt="1589352618512"></p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589352645160.png" alt="1589352645160"></p><h3 id="2-Servlet介绍以及初步使用"><a href="#2-Servlet介绍以及初步使用" class="headerlink" title="2.Servlet介绍以及初步使用"></a>2.Servlet介绍以及初步使用</h3><p>Servlet：<br>Java类必须符合一定的 规范：<br>    a.必须继承  javax.servlet.http.HttpServlet<br>    b.重写其中的 doGet()或doPost()方法</p><p> doGet()： 接受 并处理 所有get提交方式的请求<br> doPost()：接受 并处理 所有post提交方式的请求</p><p>Servlet要想使用，必须配置<br>Serlvet2.5：web.xml<br>Servle3.0： @WebServlet</p><p>Serlvet2.5：web.xml:</p><p>项目的根目录：WebContent 、src</p><p><a href="WelcomeServlet">所在的jsp是在 WebContent目录中，因此 发出的请求WelcomeServlet  是去请求项目的根目录。</p><p>Servlet流程：<br>请求 -&gt;<url-pattern> -&gt; 根据<servlet-mapping>中的<servlet-name> 去匹配  <servlet> 中的<servlet-name>，然后寻找到<servlet-class>，求中将请求交由该<servlet-class>执行。</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589352756607.png" alt="1589352756607"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Web.xml文件配置：</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;WelcomeServlet（servlet名字，与Servlet-mapping中的servlet-name一致就行，没有其他要求）&lt;&#x2F;servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;lemon.WelcomeServlet（servlet的包路径）&lt;&#x2F;servlet-class&gt;</span><br><span class="line">    &lt;&#x2F;servlet&gt;</span><br><span class="line"></span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;WelcomeServlet（servlet名字，与Servlet中的servlet-name一致就行，没有其他要求）&lt;&#x2F;servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;&#x2F;WelcomeServlet（相对路径）&lt;&#x2F;url-pattern&gt;</span><br><span class="line">    &lt;&#x2F;servlet-mapping&gt;</span><br></pre></td></tr></table></figure><p>1.回顾纯手工方法创建第一个Servlet<br>步骤：<br>编写一个类，继承HttpServlet<br>重写doGet()、doPost()方法<br>编写web.xml 中的servlet映射关系</p><p>2.借助于Eclipse快速生成Servlet<br>直接新建Servlet即可！（继承、重写、web.xml  可以借助Eclipse自动生成）</p><p>servlet4.0是生成@WebServlet(name = “WelcomeServlet2”)注解，但是会报404，需要加上, urlPatterns = “/WelcomeServlet2”。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(name &#x3D; &quot;WelcomeServlet2&quot;, urlPatterns &#x3D; &quot;&#x2F;WelcomeServlet2&quot;)</span><br></pre></td></tr></table></figure><p>###　３.Servlet生命周期：5个阶段 </p><p>加载<br>初始化： init()  ，该方法会在 Servlet被加载并实例化的以后 执行<br>服务  ：service() -&gt;doGet()  doPost<br>销毁  ：destroy()，  Servlet被系统回收时执行<br>卸载</p><p>init():<br>    a.默认第一次访问 Servlet时会被执行 （只执行这一次）<br>    b.可以修改为 Tomcat启动时自动执行<br>        i.Servlet2.5：  web.xml<br>              <servlet><br>                …<br>                   <load-on-startup>1</load-on-startup><br>                </servlet><br>            其中的“1”代表第一个。<br>        ii.Servlet3.0<br>            在注解里加：@WebServlet( value=”/WelcomeServlet” ,<strong>loadOnStartup=1</strong>  )</p><p>service() -&gt;doGet()  doPost ：调用几次，则执行几次<br>destroy()：关闭tomcat服务时，执行一次。</p><p><img src="E:\待办\Java-Butterfly-Transform\学习笔记\Servlet和JSP\assets\1589359080910.png" alt="1589359080910"></p><h3 id="4-servlet传递数据到JSP方法："><a href="#4-servlet传递数据到JSP方法：" class="headerlink" title="4.servlet传递数据到JSP方法："></a>4.servlet传递数据到JSP方法：</h3><p>1.传递字段或者对象：</p><p>在servlet中：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">字段：</span><br><span class="line">request.setAttribute(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">对象:</span><br><span class="line">UserInfo u = <span class="keyword">new</span> UserInfo（）；</span><br><span class="line">request.setAttribute(<span class="string">&quot;u&quot;</span>,u);</span><br></pre></td></tr></table></figure><p>在jsp中：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">request.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line">&lt;%UserInfo u = request.getAttribute(<span class="string">&quot;u&quot;</span>);%&gt;</span><br><span class="line">页面显示它的属性的话用表达答式 ,姓名&lt;%=u.getName()%&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.传递集合：比如list</p><p>两种方法：</p><p>1.jsp表达式</p><p>2.jstl</p><p>在servlet中：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">request.setAttribute(<span class="string">&quot;studentList&quot;</span>, studentList);</span><br><span class="line"><span class="comment">//也可以通过session、pageContext、application</span></span><br><span class="line"><span class="comment">//但是域范围越小越好，pageContext&lt;request&lt;session&lt;application,因此选择request。</span></span><br><span class="line"><span class="comment">//因为request域中有数据，因此需要通过请求转发来跳转（重定向会丢失数据）           request.getRequestDispatcher(&quot;studentShow.jsp&quot;).forward(request,response);</span></span><br></pre></td></tr></table></figure><p>在JSP中：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">第一种：jsp表达式</span><br><span class="line">&lt;%</span><br><span class="line">            ArrayList&lt;Student&gt; studentList = (ArrayList&lt;Student&gt;) request.getAttribute(<span class="string">&quot;studentList&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Student student : studentList)&#123;</span><br><span class="line">        %&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSno() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSname() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSage() %&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=student.getSaddr() %&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            &#125;</span><br><span class="line">     %&gt;</span><br><span class="line"></span><br><span class="line">第二种：jstl</span><br><span class="line">导jstl需要的两个jar包到lib文件夹下</span><br><span class="line">导标签：</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">        ArrayList studentList = (ArrayList) request.getAttribute(<span class="string">&quot;studentList&quot;</span>);</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;table&quot;</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;学号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;地址&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">        &lt;c:forEach items=<span class="string">&quot;$&#123;studentList&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;student&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;$&#123;student.sno&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;student.sname&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;student.sage&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;student.saddr&#125;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>14.连接池.md</title>
      <link href="2020/12/17/JSP%E5%92%8CServlet/14.%E8%BF%9E%E6%8E%A5%E6%B1%A0/"/>
      <url>2020/12/17/JSP%E5%92%8CServlet/14.%E8%BF%9E%E6%8E%A5%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<p>#　连接池</p><p>参考链接：<a href="https://www.cnblogs.com/xdp-gacl/p/4002804.html">https://www.cnblogs.com/xdp-gacl/p/4002804.html</a></p><p>学习视频：B站–Java Web视频教程–颜群</p><h2 id="一、应用程序直接获取数据库连接的缺点"><a href="#一、应用程序直接获取数据库连接的缺点" class="headerlink" title="一、应用程序直接获取数据库连接的缺点"></a>一、应用程序直接获取数据库连接的缺点</h2><p>用户每次请求都需要向数据库获得链接，而数据库创建连接通常需要消耗相对较大的资源，创建时间也较长。假设网站一天10万访问量，数据库服务器就需要创建10万次连接，极大的浪费数据库的资源，并且极易造成数据库服务器内存溢出、拓机。如下图所示：</p><p><img src="data:image/png;base64,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"></p><h2 id="二、使用数据库连接池优化程序性能"><a href="#二、使用数据库连接池优化程序性能" class="headerlink" title="二、使用数据库连接池优化程序性能"></a>二、使用数据库连接池优化程序性能</h2><h3 id="2-1、数据库连接池的基本概念"><a href="#2-1、数据库连接池的基本概念" class="headerlink" title="2.1、数据库连接池的基本概念"></a>2.1、数据库连接池的基本概念</h3><p>数据库连接是一种关键的有限的昂贵的资源,这一点在多用户的网页应用程序中体现的尤为突出.对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性,影响到程序的性能指标.数据库连接池正式针对这个问题提出来的.<strong>数据库连接池负责分配,管理和释放数据库连接,它允许应用程序重复使用一个现有的数据库连接,而不是重新建立一个</strong>。如下图所示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4AAAAHqCAIAAADaprcVAAAgAElEQVR4nOydeVwT1/r/8721gkASCGEHQUABF9wo4IILirghigruC4iKIi4oQlU2C4iAApVgXXDfV1BRca07EFrv91pvv63+bGurdanXpXpBlPn9kTYiJCFMJjmT5PN+ff6oAWaec55z8nx6ZuYMhwIAAAAAAECDcEgHAAAAAAAA9IvmGdDuM2dCEARBEARBEAwoBEEQ1IQ4AACgQWBAIQiCoJkcDqewSgxBEKQBwYBCEARBM7vDgEIQpEExbEABAABoKTCgEARpTDCgAAAAKAoGFIIgDQoGFAAAAEXBgEIQpEHBgAIAAKAoGFAIgjQoGFAAAAAUBQMKQZAGBQMKAACAorTEgOZfu5p4YH90fv74hIRhkZG9Ro3q3K9f265d7du6WtjZ8QQCQ2NjAyOjTw0MDAwNW5mY8AQCgbW1ZevW9u3auXt7ewUG9g8LC4qaPXHZ5zGigpUlxQUV5cQbpV1CCtDVjAgGFAAAAEWx0oCKKisSD+yfvjI1YPKk9j17CGxsOByOEZ/v2KGDV0BAv7CwoKjZ4xPiIzMzF274aun2bcv27E46eGBlSXHGydJVp06ml55YWVKSdPBAws4dCzd8NTsne0pS4qiYmAETJ3gNGuTs6ckXClu0aGHp4NChZ8/A6dMjMzNXlpSIxJXEG84eIQXoajUJBhQAAABFscaA5l+/tnDDV0GzZ7l7exsaGxvz+R6+PoHTpkWkpyfs3LHm4gVmT5d39cryvXtmrMoYMmOGZx8/U0tLIx7Pw8cneM6cuG1bWbVihBTonvS5q2FAAQAAUBRpA5p24njokiUdevUyMDS0adOmX1hoZGZmeukJza/QZJwsnZm12n/CeAe3dq243E59/MbFL80sO02wc5ACHUsBuroQBhQAAIAEIgY0vbR09IL5rd3dWxkbfzY4MDwtjVU+I+vc2Yj0dO+hQ034/LZdu4YuWZxxspR4VEgB8ajQ1aoLBhQAAABFadaAfnnj+oxVGe19fY15vJ4jRszNy/3y+jXiBViBCirK54tEPYODjXm8Tn5+c3LXFlRWEI8KKSAeFbqatmBAAQAAUJSmDGj2+XPDZ83iCYXOnp5TU5Lzrl4hXm6bpfxrVyPS0928vATW1sFzonIunCceElJAPCR0NQ3BgAIAAKAo9RvQzDNlAyZOaMXl9ho5csX+fcSLq4pKOnjAb3QIV2A2ODw8+/w54vEgBcTjQVc3SzCgAAAAKEqdBnTt5UuDw8ON+fx+oaFpJ44Tr6YMKrPsdMCUyVyBYEhERO6Vy8TjQQqIx4OuVlIwoAAAAChKPQZUJK6ckpzEMzfvERS06tRJ4hVUTVp1+lSvUaMENjYzMjLYtoclUoCuZmdXw4ACAACgKDUY0NTio+26d3fs0D5u21biVVMDWr53j3Pnzu0+81pZUkI8GKQAXc3yroYBBQAAQFGMGlCRuHLSiuXGfP7Y2EUiLXlUmZmGV1aMWxrHFwrD074gHAlSoKkUoKvpdTUMKAAAAIpizoDmXb3iPXSIravr8n17iddIIko5ctjB3b1HUFD+tatEAkAKNJYCdDXtroYBBQAAQFEMGdBVp046tm/vPXQIKe/FEuVfv9YjKMilc2fNP52NFGgsBehqVboaBhQAAABFMWFAV5YUm9vaDomIYNuDOEQkElcGR8+1buP0xTHN3Y+IFGgsBehqFbsaBhQAAABFqWxA044fM7OyGh8fT7wWskoTli0zt7XVzDPRSIHGUoCuVr2rYUABAABQlGoGNPvCecvWDsHR0cRLIAsVFrfEvm3bNV9fVOtZkAKNpQBdzUhXw4ACAACgKBUMaEFlhbu3d7+wUFyLlKeAyZM9fHzU9+5ypEBjKUBXM9XVMKAAAAAoSgUDOnzmTGdPz4KKcuKVj7UqqKxw8/IavXCBmo6PFGgsBehqproaBhQAAABF0TWgy/fuaWViknLkMPGyx3JlnCzlCgSJB/YzfmSkQGMpQFcz2NUwoAAAACiKlgEViSvbdus2NjaWeMHTCoUtjWvn1Z3ZYyIFGksBuprZroYBBQAAQFG0DGhMwTq+UJh//RrxaqcVWld+Q2hnt2RLEYPHRAo0lgJ0NbNdDQMKAACAomgZ0A69eo5euJB4qdMijVu6tJOfH4MHRAo0lgJ0NbNdDQMKAACAoppvQFedPtWiRYs1Fy8Qr3Oq6miss2dsyl//PDLWk8MJyVPTudZevtTS0JCpd/MgBRpLAbqa8a6GAQUAAEBRzTegE5cva9utK/mCqrKiQzicDyVZ7fLs0yciPZ2RQyEFGksBuprxroYBBQAAQFHNN6DeQ4eOnBdNvKBqXUkevXBhj+HDGTkUUqCxFKCrGe9qGFAAAAAU1XwD2trdbU7uWqV+OT+EI6V+8ZP3eVVebw7HOfZI9Iefe4492uSPmjxs4x8dGev54YPe+WIZFyVlH02JMORovkjk7OnJSHVHCjSWAnQ1413NgQEFAABANd+AmpiZxW/f3uSvpcR6/l3t/qpkksL28eeS0hgSXa/gyfmpgh81Pt2RsZ4f6qi8SD5eE/qoJMsPsokwFHXIkcNCW9tmdTVSQDwF6GrGuxoGFAAAAEU134C2NDRMO36sqV/7a+3kwyf5IRyO59ijjT4/Guv84ZO83pzGCzOSRRcFP5L10w+HlReJgpKsIEjFYSjSqtOnDAwNm9XVSAHxFKCrGe9qGFAAAAAU1XwDyhcKV5aUNPFrR2OdPyycKP5cYS38uCTL+dFfFxBlH1ZeJArWhBQFqTAMhUo6dNDQyKhZXY0UEE8BuprxroYBBQAAQFHNN6AO7m5Lt29r4tdk1Mimaqfckiz5fQU/+vgOtvqE5MmNREFJVhSkwjAUauGGr8xtbJrV1UgB8RSgqxnvahhQAAAAFNV8A9qpj9/0lak0SzKdNSElS7KchRkaJbnZa0JKleSpKSkePXyb1dVIAfEUoKsZ72oYUAAAABTVfAMaEhPTZ+zYpn5N9o1lvfMV3L6mQklu/NMPn8iLpIm74ppzj51SJdl3+LBhkZHN6mqkgHgK0NWMdzUMKAAAAIpqvgFdvm+vwMZGJK5U/GvyHtRt8rlgWiW5wWHF0SEfDqswEumpm/FcMI2SLKqs4AkEi4s2N6urkQLiKUBXM97VMKAAAAAoqvkGVCSuNLezi920selfVmZnxI/eB0i/JCs6nbwfHY115nA4fx1W4c6IHz6nWZIXbdhgZmUlqqxoVlcjBcRTgK5mvKs5MKAAAACo5hvQwipx2NKlXf39m/tX+qz2vr7MvlAHKdBYCtDVzHY1DCgAAACKomVA869d5Zmbf757F/FSpxWK377dmMdb8/VFBo+JFGgsBehqZrsaBhQAAABF0TKghVXi8fFLXTp3Zuqasg6roKLcqUOH0MWxjB8ZKdBYCtDVDHY1DCgAAACKomtARZUV7t7eYxYtJF7zWK6gqCinjh0L1OBdkAKNpQBdzWBXw4ACAACgKLoGtLBKnHbiuImpadzWLcTLHmu1ZEuRMY+XWnxUTcdHCjSWAnQ1U10NAwoAAICiVDCghVXimIJ1ppaWTb+rUC+VdPCAiZlZ1No1aj0LUqCxFKCrGelqGFAAAAAUpZoBLawST1uZamFvn3GylHgJZJXSS0sF1tbjE+I1cC6kQGMpQFer3tUwoAAAAChKZQNaWCUeuzjWwt5+ZUkx8ULIEiUdPCC0tdXkLYNIgcZSgK5WsathQAEAAFAUEwa0sEocnvaFmZXVki1FxMshcS3auMHE1HTSiuUaPi9SoLEUoKtV6WoYUAAAABTFkAEtrBIvWF/IEwjGx8c3+d5CXZVIXBm6OJYnMIspWEckAKRAYylAV9PuahhQAAAAFMWcAS2sEqcdP+bSuXNXf/+ss2eIF0gNK7PsdIdePVt7eJC9OIsUaCwF6Gp6XQ0DCgAAgKIYNaCFVeKCivKg2bNMLSwi0tP0ZHFIVFkxLSWFZ24+ODz8yxvXiceDFKCr2dzVMKAAAAAoimkDKtGy3btdunRx8/Zetmc38ZKpViXs3OHs6dna3T1h5w7iwSAF6Gr2dzUMKADaRFlZ2YIFCxp/XlhYeP78+Sb//P79+y9evGA8qtzcXJlRNZfbt2+PGTNGyV8uKysbNGiQzIMkJSWpHoweog4DWlglFokrp6Wm8IVCn2HD1LcTO0ElHTroO2wYVyCYuGyZOl50hBRoUQrQ1coLBhQAtnP37t2qqirJf9++fZvP50vcXllZ2caNGyWfR0ZGcjicJl1gWVkZh8OR+rbbt2/36NFDpiUtKytr37698m41MjLSwMCgSROs2GLm5uZyOBwlzytpi8wm5+bm8ni8X375RcGfv3z5snXr1jItbP1gpD2sD6jJgEq09vKlUTHzeEKhz7BhK/bvI15HGdGyPbu7DxxozOcHRUWtvfQ18XiQAuLxoKuVFwwoAGynpqbG399fYpVu377t4OAgsVZSzyfxUsqsQZaVldV3ZhI7y5GP8vbr5cuXrq6ujQ1odHR0gw9zc3NlWsz6zVSGBm1pEEzr1q2bDF7ya/L8bm5urvLB6AZqNaAS5V65PGbhAr6Fhftnn83KziqoKCdeVmnoy+vXwtPS2nXvzhMKR82PWfP1ReIhIQXEQ0JXN1cwoABoAdKFT6kBrb94efv2bUtLS2Uuwdf3r43/WR95K6CSdcFm0WBltP4iboPYGrdCsswp00oqCL5xW+QdRMFaKQyoGkvajeuRmZnuPt58oTBgyuRlu3drxXMbInFlws4dAydNNOHznbt0Dk9LY8OTRkgB8ajQ1fQEAwqAFiBZHdy4caPEdd25c2fu3LlSd6i8VVLdgMpcd1R8vb6mpubHH39s3BbJf9S3qn379m3wiaRdsbGxjYOs78V37NjR4A8bH2Tt2rUKruzv37+foqjIyEhpT8KAakApRw4HTpsqtLOzdHQMnD4tbusWEfvuoRRVViwpKho4aZK5ra3A2nrQ1ClJhw4SjwopIB4VulpFwYACoE1IDeiPP/4oWb27c+eOxM/V/7WysjKZd2RK/9zf35/H450+fVrBJXjlDaiSN4Aqbpcyi7iNPasUSQ9ERkbWX1tV8tbYly9fnjp1SvL7PXr0kLSugQHNzc3VmftBJT0m83MyNU9c+fnuXYPDwy0dHbmmpl6BgZMTE1OLjxJcKBKJK5MPHxqfEN9t4EATU1MLB4eAKZOXbClioWNACrRL6GqpYEABYDWSy8eNL2q3bdt2wYIFkrsYJf9ssOZXU1MjWSWV/E6DP5fcObp27VrVV0AV3HBZ/zEpxUiXHhVcLm9Ag+XbW7duSYOROE55t6U2vmX266+/lvxaff8qNaDSFDT5YJO2UH8wNPiceHleWVI8cfkyr4AArpkZXyjs4u8/cl50TMG6zDNl6q7BGSdLo9auCZo9q3Pfvjyh0JjH69K//7ilcalHjxDvFqSAeLegqxkXDCgAWkNkZKSDg4NkzVJq0XJzc0eMGCF9TF7x8zeKL8ErfihHgsSAxsbGyls3lbc22SCM+jsl1V/+lBjfTZs2Ndkb8u4fiIyMlJyx/pZVL1++XLNmjfR3JCup0pZKr85LDWj9pVaJDW2wtqrVNM6R9HPiJflDjaysWLF/35TkpH5hYc6dPQ1ateKamrp26dIzODg4em54WtqSoqKVJSX51642t/SuuXgh5cjhxUWbp6WmDpsZ6TN0aBvPTiampp8aGDi2b987JGTSihUr9u/T9pU2pECLpJ9dDQMKgHYgWZBrcA39zp07wcHBp0+f3rdvn+TXFF/LbtKAylwyrE/jldEmnZlkbbLx1fP6Vk96sbv+8WtqajIyMuQdtv49oIqf5W9wRumJJCvBUjdc/zgGBgbBwcH1L8HXb6by5lvrIF6J5amgsiL58KG5ebljF8f2Cwvr0LOnlaOjEZfL4XAMWrUys7K0c3V19vR09/bu1KdPF//+3QcO7DrA39PPz8PXx7VbV6eOHe1cXXlC4SctWnA4HENjYytHR48ePr1DRo2KiZmdk5N06KCWPqSMFOie9KSrOTCgALAf6RVqqeuqqakJDg7evHmz5NF46YKigs2JqEb3gG7evLm+m2xgQGXul9TAgNb/E4mBU+bqufTICu7plCLvSSBpV7x8+TIiIkL6uYJNqSRWWIKkA3/55ZfCwsLi4mLJ0m9YWFjjS/ASdN6AUixbAVVS68pvZJadXr5v74L1hXPzcmeuXh2e9sWUpMTxCQnj4pdOXPb5pBUrwtPSZufkzC8Ufb57V9rxY7lXLhMPW5eEFKCr6YkDAwoAm5E+My75Z/3dl6QLhPUdmOIH0iUeUfrAkMwbTKU0sLYyj1/fpUnM6IgRI5rcRr6+tW1wcbxx/PLe3iRdsGxguCVLm/Hx8crsZi+9U1byT5n3gFJ/Z0FXL8HX/5x4TYIgSE8EAwoAe6mpqRkyZIh0SbLBnYvS7Y2ki3nUxxsJNTiUZK2xvl1rsMinzCX4xo5T+vsN/im9F1PmQeS5ZGXewCSzLfV/1OTyp5QGb2ZSbEB17Cn4xt/+MKAQBGlMMKAAaA2SNb+kpCTJxesGS3fSnTUb2C/pU/Dt27e/fv16/Zs+G9y+2VwDKtnkSDHytn9X3oDW94jStkhvh21gQOU9mSTZP7+xMW2wuZL+GFB5nxOvSRAE6YlgQAFgNYrfPFT/2R2JJ5P5BJLkp9TH/kyyvHrq1Cnpgz71DWiDGyulKHjkSBn/Km1U+/bt79+/32B/KMX3A0j+9u7du5JH/iVt+e677xocxNfXt/FhJX++efPmBhtIdejQof4nDQxo/Y3xVdzoVCuAAYUgSGOCAQVAO2h8gbvB1fMOHTrExsYqvn5d34BK/1vBQmaDNT/FC4HNNaDNugTf+AJ648XOxg9gybwhof7GqA1+KnMFVLLwrA9vRYIBhSBIY4IBBUA7yM3NlXojmSudyrz1p75pkx5Q5qKmTCOo2GI2/qnkIafG1k3Fe0Abt4WSZY7lvQ5K+ueNX0kv7xK89BQKtoXSAWBAIQjSmGBAAdACampqiouL61+Ob+CcpM/lKL5Psf4uTtLHm5Q3oJJn8B8/ftzk3kn11xcbvA+pwZP4ypxXcVukPfDjjz9KV3NzcnLkbcYk/f3Gq7n1uyI6OrpBhA3uu9U9YEAhCNKYYEAB0CYavFdT6p8iIyPbt2+fmpqq2INKTZv0rlCqOQZU8fvQlbkEHxkZKblK3mD/ecXnVdyWxj+qv72oghsGGr8ySvGm+srfY6ClwIBCEKQxwYACoDXk5ubWXziUXMiWrEdKnZxklVTeDYuSuyQl70+S9yy89DcbGMH6mz3JpEl/FhkZ2WDhU7qm2+QD5tLXtUuRZ0Dr37Ip3StUZgMbn1feJlb1/0RJf6yNwIBCEKQxwYACoAVIrE9jFyXzZlCpq5M+kdPgsZvGew/JvIDeeDukBpvSKxNMA2Ruxqn4Sf/6V/MbtKVBhJIfNd4cVKYpl3kPaJNv9VTwlikdAAYUgiCNCQYUAPYivZTc+GkYyefyVuMarxdSf++s1NhHylsBrX9SZW5/VMaAMoV0B6X6L3NS4A6Vv7Kvz8CAQhCkMcGAAgAAoCgYUAiCNCgYUAAAABQFAwpBkAYFAwoAAICiYEAhCNKgtNWAPn369Pr163v37l29enX0vHljQkP79O/fsbOnk7Oz0NKSx+cbGRsbGBoaGBoaGRvz+HwLKysnZ+dOXbr09fcfGxYWM39+VlbWvn37bty48ccff5BuDQAAkAcGFIIgjUk7DGhtbe0333zz1VdfzYqK+szXl29m1qJFC3tn5869evUJCRk2c+a4+KUzVmXMF4nitm1NPLB/ZUlxeumJVadOrjp1Mr30xMqS4sT9++O2bY0RFURkpI9bGjcsMtJv1EjPnj3tnJw+adHCTCDw6dkzas6cjRs33rx5s7a2lnSLAQBA08CAQhCkMbHXgFZXV1+8eHHFihW+vXq1MjKydnDwCRwUPHdO1No1qcVHCyrKmeqCgorylCOHo9asGTEnyjsgwNLWtpWRUa8+fZKTky9dulRTU0OqBwAAQJPAgEIQpDGxzoA+evRo48aNQ4OCjIyNndzcBk6cMDsnZ/WZMk12SmbZ6ZlZqweMH+/Yrp0JlxsUHLx58+YnT55ouCsAAECTwIBCEKQxscWAPn/+fOPGjX79+hmZmHgHBExJTsosO028dwqrxBknSyetWOHl729kbNxvwICioqKXL19qpk8AAECTwIBCEKQxETagdXV1ly9fDh03zoTH+2zAgJmrV+ddvUK8U2Rq7eVLEenp3fv1MzYxmThp0vXr1+vq6tTaOQAAoElgQCEI0piIGdCampotW7Z4dOxo16ZN6OLY7PPniPeFklp9pmz0/Pk2Dg4dO3fevn3727dv1dRFAACgSWBAIQjSmAgY0Ddv3qxZu9bKxqZL714xBetE4krivUBDosqKufl5nXx9bezs8vPzq6urGe8oAADQJDCgEARpTBo1oLW1tevXr7eysfEOGLhsz27ijWdE8Tu2d+vXz8bObtOmTe/evWOwuwAAQJNotQHNv3Y18cD+6Pz88QkJwyIje40a1blfv7Zdu9q3dbWws+MJBIbGxgZGRp8aGBgYGrYyMeEJBAJra8vWre3btXP39vYKDOwfFhYUNXviss9jRAUrS4oZ3GtFT4QUQM2S5gzomTNn2rq5dfL1/Xz3LuLNZlxLt29r7+Xl0aHDhQsXmOoxAADQJFpkQEWVFYkH9k9fmRoweVL7nj0ENjYcDseIz3fs0MErIKBfWFhQ1OzxCfGRmZkLN3y1dPu2ZXt2Jx08sLKkOONk6d/7Q5ckHTyQsHPHwg1fzc7JnpKUOComZsDECV6DBjl7evKFwhYtWlg6OHTo2TNw+vTIzMyVJSVaer0OKYDYKU0Y0IcPH44JDbVp3XpuXq4Ojx6RuHJ2Tra1vf24CRMePXqker8BAIAmYbkBzb9+beGGr4Jmz3L39jY0Njbm8z18fQKnTYtIT0/YuWPNxQvMni7v6pXle/fMWJUxZMYMzz5+ppaWRjyeh49P8Jw5cdu26ufiHFIAMSj1GtC6urrdu3ebW1gMmzEj/9pV4q3VgPKuXhkyfbrQ0nL//v2qdB0AAGgYdhrQtBPHQ5cs6dCrl4GhoU2bNv3CQiMzM9NLT2h+OSPjZOnMrNX+E8Y7uLVrxeV26uM3Ln4pS3YMRAogrZMaDejLly9Dx41zcnPTyWvuihW/fbuDi8uESZP+/PNP2h0IAACahFUGNL20dPSC+a3d3VsZG382ODA8LY1VPiPr3NmI9HTvoUNN+Py2XbuGLlmccbKUeFRIAfGoIOWlLgN669YtJxdn/7Cw/OvXiDeSiPKuXukTMsrVze3777+n14cAAKBJ2GBAv7xxfcaqjPa+vsY8Xs8RI+bm5X7J7iJSUFE+XyTqGRxszON18vObk7u2oLKCeFRIAfGooCalFgNaXFxsZm4ekfYF8eYR15TkJIFQWFpaSqscAACA5iBrQLPPnxs+axZPKHT29Jyakszal5LIU/61qxHp6W5eXgJr6+A5UTkXzhMPCSkgHhKkQMwbUFFhodDaOmHXTuJtY4mWbCkyt7TYvHkz3aIAAACagJQBzTxTNmDihFZcbq+RI1fs30f8S1tFJR084Dc6hCswGxweri3vWEEKIM2LYQOakZFh5+S0sqSEeMNYpeTDh63s7desXatCaQAAAPWieQO69vKlweHhxnx+v9DQtBPHiX9XM6jMstMBUyZzBYIhERG5Vy4TjwcpIB4P1EBMGtCMjAx7Z+dVp08RbxULlXb8mLWDw9rcXNUKBAAAqAtNGlCRuHJKchLP3LxHUNCqUyeJf0WrSatOn+o1apTAxmZGRgbbdiFECiCyYsyAbty40drBHu5TgdKOHxNaW+/cuVPlMgEAAMyjMQOaWny0Xffujh3ax23bSvybWQNavnePc+fO7T7zYs/lQaQAIi5mDOiZM2fMhMKUI4eJt4flWr5vr6lAcOnSJSaKBQAAMIkGDKhIXDlpxXJjPn9s7CKRPj2qLKqsGLc0ji8UhpN+PBcpIJ4CSCIGDOi9e/eEFhYLv1pPvDFaobl5uRZWVr/++itDJQMAAJhB3QY07+oV76FDbF1dl+/bS/yrmIhSjhx2cHfvERRE6s0sSAHxFEBSqWpAa2trP/P1DYmJId4SLdLwmZG9+/Z9//49c4UDAABURa0GdNWpk47t23sPHaLnhT//+rUeQUEunTtr/ulspIB4CqD6UtWApqWnd/D21qtlfNVVUFHe1tMzJyeHucIBAACqoj4DurKk2NzWdkhEBJ4CKawSi8SVwdFzrds4fXFMc/cjIgXEUwA1kEoG9O7duzxT09Tio8SboXVK3L+fy+f/8ssvjJYPAACgj5oMaNrxY2ZWVuPj44l/8bJKE5YtM7e11czj50gB8RRAjaWSAQ0KDh4xexbxNiip6BCOc+wR4mFINXjq1NBx4xgtHwAAQB91GNDsC+ctWzsER0cT/8plocLilti3bbvm64tqPQtSQDwFkEzRN6AVFRUCC4vcy5dUiuBorLNnbEoz/yo6hMPhhEQ3+3RHxnpyOBzPsUfJ93thlTjnwnmuqek///lPposIAADQgXEDWlBZ4e7t3S8sFJd95Slg8mQPHx/1vbscKSCeAkie6BvQoODg0QvmqxrB0VhnDk3oLGf+dToa5lUtCpo9C4ugAACWwLgBHT5zprOnZ0FFOfEvW9aqoLLCzctr9MIFajo+UkA8BZA80TSg9+7dMzYxWXPxgqoRHI11lmMlU2I9ObIXR4+M9eRwQvLonTE6RNVF0JRYT5r2t5FWnykzMjb+7bff1FBKAACgeTBrQJfv3dPKxAT7QzepjJOlXIEg8cB+xo+MFBBPAaRANA1oSmqq38hgBiJQnwHND5HtEY/G9m78+dFYZyVd6d9LtkzdTuoTOGj16tVqKCUAANA8GDSgInFl2x9t8/oAACAASURBVG7dxsbGMnVA3VbY0rh2Xt2ZPSZSQDwFkGLRNKBt3dxiRAUMRKA+A0rn4n5Tl+brHZMpAzo7J6dj585qKCUAANA8GDSgMQXr+EJh/vVraipdOqZ15TeEdnZLthQxeEykgHgKIMWiY0B//vnnVsbGX964zkQEeb3VaUCVtYn5IRwOp3d+07+j0h2ospR7+dKnLVs+fPhQPQUFAACUhUED2qFXz9ELFzJ1NH3QuKVLO/n5MXhApIB4CiDFomNAt23b1oWxJGmFAc3rLTWenp7MXoIvrBJ7eHnt2bNHPQUFAACUhSkDuur0qRYtWjDwkABxfbRPi0qPHzSptZcvtTQ0ZOrdPEgB8RRATYqOAY2Ojh4WGclQBOw3oPXcZ0ie9J8MGtCASZNiY2PVU1AAAEBZmDKgE5cva9utK1PfkAQVHcKRU4bUIs8+fSLS05EC3UgB1KToGNC+/ftHZDCVoXr2rnm3a2rWgH6YAMwb0ClJiQGDB6unoAAAgLIwZUC9hw4dOS9aTUVLk9Kw+xm9cGGP4cORAt1IAdSk6BhQJ2dnxm7UVfNDSEzeA/qXmDegC9YXtvPwUE9BAQAAZWHKgLZ2d5uTu1b5796/b3Cq94Uv7/O/L5pFf/i5dAMTBT9q8rCNfyR5cclf9M6XVXpkH02JMORovkjk7OmJFOhGCqAmxaFhQE0FAsb2FTsa6yzH+emPAV2+d4+FlZV6CgoAACgLhyEDamJmFr99e5O/JtlT+e8v3g/Xmj7+XOJCpFuU/PUNLOunCn7U+HRHxnp+sCzyIvl4+e2j0iM/yCbCUNQhRw4LbW2RAt1IAdSk6BhQA0PD9NJSZiJQswFtFqQMaOrRI8ZcrnoKCgAAKAtTBrSloWHa8WPKfJd+9EWaH8LheI492ujzj1YT8npzGq+BSda3FPxI1k8/HFZeJArcj4IgFYehSKtOnzIwNEQKdCMFUJOiY0CNTUzSThxnJgI1G1DlPCXhFdBZ2dkmPJ56CgoAACgLUwaULxSuLCmh+RUt43OFtuNj9yPnRzK/5P8+rPxiIdf9KApSYRgKlXTooKGREVKgGymAmhQdA2puYcHYG6vkOz/V34Sk4is35Yh5Azpo6pQWn35aU1OjnpoCAABKwZQBdXB3W7p9G80vfwU25e9v4EbeQvL7Cn7UcCPnD4TkKShDct2PoiAVhqFQCzd8ZW5jgxToRgqgJkXHgHbw9JxfKGImAnkjskmaMqApsZ5K3vPRTDFvQGfnZBubmKSmpqqnpgAAgFIwZUA79fGbvjJVmS9/hpbflHQ/cpYkaLifZi+/KeV+pqakePTwRQp0IwVQk6JjQIcFBU1asZyR06fEesobkSqugKpt7wbmDWjoksUBgYEmJia3b99WT1kBAICmYcqAhsTE9Bk7Vpnv0sb38PXOV3CnoKy/UtL9yNhzWvqJvEiauAGxObczKuV+fIcPY2qPbaSAeAqgJkXHgCYmJfmPC2Pk9ApsomoGVO7+9iqLeQPaOzg4PT09KSmpV69e79+/V09lAQCAJmDKgC7ft1dgYyMSVyr+NXnPRDf5CDYt99PgsOLokA+HVRiJ9NTNeASbhvsRVVbwBILFRZuRAt1IAdSk6BjQEydOuHbsyMTpFVlJlQyoum4AFavDgNo7O589e7a6utrDw0MkEqmnsgAAQBMwZUBF4kpzO7vYTRub/mVlNqH86NuevvtRdDp5P/p7NxXn2CNNbEL54XOa7mfRhg1mVlaiygqkQDdSADUpOgb01atXLQ0Mss6eUfX0Ch9UV8GAfrS7GNNi2ICmnThuYGj43//+l6Koq1ev8vn8+/fvq6W2AACAQpgyoIVV4rClS7v6+6vhG1hn1d7Xl9l3FyEFxFMAKRYdA0pR1ICAAAZuA80PUfCckPyr800ZUDUuf4oZN6ChSxYPGT5c2rHR0dFBQUF1dXVMVhUAAFACBg1o/rWrPHPzz3fvUs/3sK4pfvt2Yx5vzdcXGTwmUkA8BZBi0TSgO3bs8PDyUvHc0SGKbBxdA6rcJk30xbABde3Y8cCBA9KOffnypb29/f79+5msKgAAoAQMGtDCKvH4+KUunTvjgmaTKqgod+rQIXRxLONHRgqIpwBSIJoG9PXr13wzs+X79tI/99FYZ4XbJNW/PbnRH9K4c5QpMWlA47ZtFVpaVldX1+/bY8eOWVlZ/fHHH4xVFQAAUAJmDaiossLd23vMooVq+zbWEQVFRTl17FigBpuIFBBPAaRANA0oRVHxCQm9goJonzg6pIk7gj82oH/ZPimy/V9TppZt+iwgIEXW9p/jxo0LDw9XtZgAAEBzYNaAFlaJ004cNzE1jdu6hfiXLWu1ZEuRMY+XWnxUTcdHCoinAJIn+gb0yZMnXD4/6eABOic+Guvc5EaesbIWMv96IE6my8zrrVXuM2HXTlMzs+fPnzfu20ePHgkEgrNnz6paTwAAQGkYN6CFVeKYgnWmlpZNvxZSL5V08ICJmVnU2jVqPQtSQDwFkEzRN6AURaWkpnbx82typ7HGSsnPY/wqeXSINrlPkbjSw8srKztbXt9u3brVxcXl9evXNCsJAAA0E3UY0MIq8bSVqRb29hknS4l/8bJK6aWlAmvr8QnxGjgXUkA8BVBjqWRAq6ur27i4zFy9mngztE7TUlPburm9fftWXt/W1dUNHDgwLi6OZiUBAIBmoiYDWlglHrs41sLefmVJMfHvXpYo6eABoa2tJu/ORAqIpwBqIJUMKEVRX3/9tcDCIvNMGfGWaJHSThznm5ldu3ZNcd/evXuXy+VWVVU1r4YAAAAt1GdAC6vE4WlfmFlZLdlSRPwbmLgWbdxgYmrK1ButkQItSgFUX6oaUIqiFsfFde7VC4+PKal15Tfcu3VbkZioTD3Izs7u2rVrbW2tUtUDAABUQK0GtLBKvGB9IU8gGB8fT+PGLd2QSFwZujiWJzCLKVhHJACkgHgKIKkYMKBv377t1afP0Ihw4o3RCvmPCxsQEPDu3Ttl6kFtbW337t0zMzOVqh4AAKAC6jaghVXitOPHXDp37urvz8C79LRNmWWnO/Tq2drDg+x1cKSAeAogiRgwoBRFPXr0qLWT0+TEROLtYbnClix2dnVt1h6f3377LZfL/fHHH5X/EwAAoIEGDGhhlbigojxo9ixTC4uI9DQ9WYcTVVZMS0nhmZsPDg//8sZ14vEgBcTjgQqZMqAURf3www8WVpazsrOJN4m1mv7FSitr63v37jW3KsTHx/fv3x/v5wQAqBXNGFCJlu3e7dKli5u397I9u4l/OatVCTt3OHt6tnZ3T9i5g3gwSAHxYCCpGDOgFEXdvHlTaGk5KyuLeKtYqOlfrLSwsvruu+9oVIU3b960bdt28+bNNP4WAACURJMGtLBKLBJXTktN4QuFPsOG6eQ24EmHDvoOG8YVCCYuW8bOxySQAoigmDSgFEV9++23ltbWk/Fk2ccaFxdnbWt769Yt2oXh4sWLZmZmDx8+pH0EAABQjIYNqERrL18aFTOPJxT6DBu2Yv8+4l/XjGjZnt3dBw405vODoqLWXvqaeDxIAfF4oMZi2IBSFHXnzh3HNm2GzZghwv9tVIkLKsoHTZ7s7Or6008/0S0KfxEZGTl27FgVDwIAAPIgYkAlyr1yeczCBXwLC/fPPpuVnVVQUU7825uGvrx+LTwtrV337jyhcNT8mDVfXyQeElJAPCRInpg3oBRFPX36tHffvt369V1z8QLxFhJU1rmznXr29A8IePbsGa1y8BH/+c9/rK2tjx49qvqhAACgMQQNqERf3rgemZnp7uPNFwoDpkxetnu3VjwiIxJXJuzcMXDSRBM+37lL5/C0NO19zAUpgDQmtRhQiqLevn27YNEiKzu7uK1biDeSiBZt3GBhY7M0Pp7BXTwPHTpka2sr8/XxAACgIsQNqFQpRw4HTpsqtLOzdHQMnD4tbusWFl5SE1VWLCkqGjhpkrmtrcDaetDUKUmHDhKPCikgHhWkpNRlQCUcO3bMwspqWETEl9evEW+qxpR/7eqgyZOtbGxOnTqlSu/JZNSoUVFRUYwfFgAA2GNAJRKJKz/fvWtweLiloyPX1NQrMHByYmJq8VGCa3IicWXy4UPjE+K7DRxoYmpq4eAQMGXyki1FLDRnSAHEcqnXgFIU9fjx4+CQEAcXl4UbviLeWg0oRlRg16bNmNDQp0+fqth1Mvntt99MTU0vX76sjoMDAPQZthnQ+lpZUjxx+TKvgACumRlfKOzi7z9yXnRMwTp1vwhaJK7MOFkatXZN0OxZnfv25QmFxjxel/79xy2NSz16hHi3IAXEuwWiLbUbUAklJSV2Dg49hg5JO36MeJvVpNTio96DBjk4OZWWljLSafL46quv3N3d//vf/6r1LAAAfYPNBlQqUWXFiv37piQn9QsLc+7sadCqFdfU1LVLl57BwcHRc8PT0pYUFa0sKcm/drV5hxVXrrl4IeXI4cVFm6elpg6bGekzdGgbz04mpqafGhg4tm/fOyRk0ooVK/bvw0obUgAxIg0ZUIqiXr9+nZySwjczGzR58mo1/w+ThrXq9KmAiRNMBYK09PQ3b94w1WPyeP/+fZ8+fVasWKHuEwEA9AqtMKANVFBZkXz40Ny83LGLY/uFhXXo2dPK0dGIy+VwOAatWplZWdq5ujp7erp7e3fq06eLf//uAwd2HeDv6efn4evj2q2rU8eOdq6uPKHwkxYtOByOobGxlaOjRw+f3iGjRsXEzM7JSTp0UEufB0cKIJZLcwZUwoMHD+bOm8c3NQ2cOiXjZCnx9quotBPHAyZN5Jmazl+w4NGjR8z2lQK+//57Lpf7v//7vxo7IwBA59FGAypP68pvZJadXr5v74L1hXPzcmeuXh2e9sWUpMTxCQnj4pdOXPb5pBUrwtPSZufkzC8Ufb57V9rxY7lXLhMPW5eEFECKpWkDKuH+/fsx8+fzzcz8gkfEb99OvBeaK5G4csmWoh5Dh/JNTWMXL37w4IE6ekkxaWlpPj4+79690/ypAQA6iS4ZUAiCWC4yBlTCs2fPVmVm2js6unToMD4hPvvCeeLd0aSyzp4JXbzYyc3Nydk5Kzub4I5Ib9++9fT0zM3NJRUAAEDHgAGFIEhjImlAJbx79660tDRkzBhjLtdrgP/0L1ay8NUFORfOT01J7t6vn7GJydiwsNOnT79//17dPdMkFRUVPB7v3r17pAMBAOgCMKAQBGlM5A2olGfPnhUVFQ0cNKiVkZFnjx5jYxcl7t9PcrOxyorl+/aOXrCgo49PKyOjQUOGbNu2jW2bwC9atCgwMLCuro50IAAArQcGFIIgjYlFBlTK8+fPDxw4MGnKFCsbG1OBwCcwcMyiRUuKipq7pwMN5V29Ert50+iFCz4bOJAvENjY2U2dPv3QoUMvX77UfD8ow59//unk5LRz507SgQAAtB4YUAiCNCY2GlApdXV1P/zww4YNG6ZOn97Wza1FixatXV17DBkcFDU7IiM9YdfO7PPnaC+RisSVWefOJuzcEZ6WNnzWLJ/AQAcXl09atHDz8JgeHr5p06Y7d+5oxcri6dOnhULh48ePSQcCANBuYEAhCNKYWG1AG/Dq1atr164VFhbOmzfPPyDA3tHxk08+MTA0tHNycu/atbt/f7+RwQPGjx8SET5izpxR8+aNXrhg9MIFo+bNGzFnzuDw8AHjx/cODvby7+/WtYuto2NLA4MWn37a2slpYGDgvJiY9evX37hx488//yTdSjpMmTJl0qRJpKMAAGg3MKAQBGlM2mRAG/Pu3bvffvutvLz82LFjRUVF2dnZycnJixYtmh0VFREZOWXq1KnTp8+IjJwdFbV48eLk5OScnJwtW7YcP368oqLiwYMHbHiQiBGePn1qYWFx8uRJ0oEAALQYDodT8sP/QRAEaUDabUCBlN27dzs6Or569Yp0IAAAbYUDAAAapIlvJM188QEVqaurGzp06IIFC0gHAgAAzKBMiQJAP9GH2aHjzdMlfv75Zx6Pd+PGDdKBAACAqii5RgKAHqIns0PHm6dj5Ofnd+rUqaamhnQgAACgEspfpwNA39CT2aHLbdM93r175+vr+8UXX5AOBAAA6NOsG8UA0Cv0Z3boctt0klu3bnG53H//+9+kAwEAAJo092EFAPQH/ZkdOtswHSYxMbF37946s8kUAECvoPG0LAB6gl7NDp1tmA5TXV3t4eFRWFhIOhAAAKCPDldWAFREH2aH7rdQJ7l69Sqfz//1119JBwIAADTRhxILAD30YXbofgt1lblz544YMUIrXmcPAACN0YcSCwA99GF26H4LdZUXL17Y29sfOHCAdCAAAEAHfSixANBDH2aH7rdQhzl27JiVldWzZ89IBwIAAM1GH0osAPTQh9mh+y3UbcLCwiIiIkhHAQAAzUYfSiwA9NCH2aH7LdRtfv/9d4FAcO7cOdKBAABA89CHEgsAPfRhduh+C3WeLVu2uLi4vHnzhnQgAADQDPShxAJAD32YHbrfQp2nrq5uwIABS5cuJR0IAAA0A30osQDQQx9mh+63UB+4c+cOl8v95ptvSAcCAADKog8lFgB66MPs0P0W6glZWVndunWrra0lHQgAACiFPpRYAOihD7ND91uoJ9TW1nbv3j0rK4t0IAAAoBT6UGIBoIc+zA7db6H+8O2333K53Dt37pAOBAAAmkYfSiwA9NCH2aH7LdQr4uPj/f398X5OAAD70YcSCwA99GF26H4L9Yo3b964uroWFRWRDgQAAJpAH0osAPTQh9mh+y3UN86fPy8QCB4+fEg6EAAAUIQ+lFgA6KEPs0P3W6iHzJgxIzQ0lHQUAACgCH0osQDQQx9mh+63UA959uyZtbV1cXEx6UAAAEAu+lBiAaCHPswO3W+hfnLw4EE7O7sXL16QDgQAAGSjDyUWAHrow+zQ/RbqJ3V1dSNHjpwzZw7pQAAAQDb6UGIBoIc+zA7db6He8uuvv5qaml65coV0IAAAIAN9KLEA0EMfZofut1CfWb9+vbu7e3V1NelAAACgIfpQYgGghz7MDt1voT7z/v17Pz+/xMRE0oEAAEBD9KHEAkAPfZgdut9CPef777/ncrn/+te/SAcCAAAfoQ8lFgB66MPs0P0WgrS0NB8fn3fv3pEOBAAAPqAPJRYAeujD7ND9FoK3b9926tQpPz+fdCAAAPABfSixANBDH2aH7rcQUBRVXl7O4/F++ukn0oEAAMBf6EOJBYAe+jA7dL+FQMLChQuHDBlSV1dHOhAAAKAo/SixANBDH2aH7rcQSPjzzz+dnJx27dpFOhAAAKAo/SixANBDH2aH7rcQSDl16pRQKHzy5AnpQAAAQC9KLAD00IfZofstBPWZPHny5MmTSUcBAAB6UWIBoIc+zA7dbyGoz5MnTywsLE6dOkU6EACAvqMPJRYAeujD7GBpC58+fXr9+vW9e/euXr06et68MaGhffr379jZ08nZWWhpyePzjYyNDQwNDQwNjYyNeXy+hZWVk7Nzpy5d+vr7jw0Li5k/Pysra9++fTdu3Pjjjz9It4Zd7Nq1y9HR8dWrV6QDAQDoNfpQYgGghz7MDla0sLa29ptvvvnqq69mRUV95uvLNzNr0aKFvbNz5169+oSEDJs5c1z80hmrMuaLRHHbtiYe2L+ypDi99MSqUydXnTqZXnpiZUlx4v79cdu2xogKIjLSxy2NGxYZ6TdqpGfPnnZOTp+0aGEmEPj07Bk1Z87GjRtv3rxZW1tLusUkqaurGzJkyMKFC0kHAgDQRziyIB0UAOxCHyYFsRZWV1dfvHhxxYoVvr16tTIysnZw8AkcFDx3TtTaNanFRwsqygurxIyooKI85cjhqDVrRsyJ8g4IsLS1bWVk1KtPn+Tk5EuXLtXU1JDqAYL89NNPPB6vvLycdCAAAH0EBhQAxejDpNB0Cx89erRx48ahQUFGxsZObm4DJ06YnZOz+kwZU3ZTGWWWnZ6ZtXrA+PGO7dqZcLlBwcGbN2/Wt2fD8/LyOnXq9PbtW9KBAAD0DrhPABSjD/NCQy18/vz5xo0b/fr1MzIx8Q4ImJKclFl2WpOmU54yTpZOWrHCy9/fyNi434ABRUVFL1++1EyfkOXdu3e+vr5paWmkAwEA6CMwoAAoQB/mhXpbWFdXd/ny5dBx40x4vM8GDJi5enXe1SvETadMrb18KSI9vXu/fsYmJhMnTbp+/brOvzTo1q1bXC73+++/Jx0IAEDvgPsEQAH6MDXU1cKampotW7Z4dOxo16ZN6OLY7PPniFtMJbX6TNno+fNtHBw6du68fft23b5InZiY2KdPn/fv35MOBACgd8CAAiAPfZgazLfwzZs3a9autbKx6dK7V0zBOpG4krinpCFRZcXc/LxOvr42dnb5+fnV1dWMdxQbqK6udnd3X79+PelAAAB6hz6UWADooQ+zg8kW1tbWrl+/3srGxjtg4LI9u4mbSEYUv2N7t379bOzsNm3a9O7dOwa7iyVcuXLF1NT0119/JR2IepG58wvQPKQHgvZBOmOgCUgPEKCb6MPQYqyFZ86caevm1snX9/Pdu4i7Rsa1dPu29l5eHh06XLhwgakeYw9z5swJDg7W7XteORwO8VGk57py/xd9+EplHAxd1qr8t98wpIGa0IehxUALHz58OCY01KZ167l5uVp6wV0ZicSVs3Oyre3tx02Y8OjRI9X7jT28ePHCzs7u4MGDpANRI6jixAUDSg8MXdYKBhSoD30YWiq1sK6ubvfu3eYWFsNmzMi/dpX414EGlHf1ypDp04WWlvv372cqB2yguLjY2tr62bNnpANRF6jixAUDSg8MXdYKBhSoD30YWvRb+PLly9Bx45zc3HTymrtixW/f7uDiMmHSpD///JPBZJAlNDR0xowZpKNQF6jixAUDSg8MXdYKBhSoD30YWjRbeOvWLScXZ/+wsPzr14h/CxBR3tUrfUJGubq56cw+mr///rtAIDh//jzpQNQCqjhxwYDSA0OXtYIBBepDH4YWnRYWFxebmZtHpH1BfP4T15TkJIFQWFpaynhiiFBUVOTq6vrmzRvSgTAPqjhxwYDSA0OXtYIBBepDH4ZWs1soKiwUWlsn7NpJfPKzREu2FJlbWmzevFkd6dEwdXV1/v7+8fHxpANhHlRx4oIBpQeGLmsFAwrUhz4Mrea1MCMjw87JaWVJCfGZzyolHz5sZW+/Zu1aNSVJk9y5c4fL5X777bekA2EYVHHiggGlB4YuawUDClSnrq7u8ePHFRUVR44cEYlEiYmJs2fPDhkzhsPhdO7WzbVdO1t7ezNzgQmXa2RkZGBoaGBoyOXxBEKhjZ1d6zZt2nl4dOzc2a9fv9Fjx86ZOzc1NbWwsPDgwYPXrl179OgRy3dXbMbkycjIsHd2XnX6FPFpz0KlHT9m7eCwNjdXfanSGFlZWd27d6+trSUdCJOgihMXDCg9MHRZKxhQ0Fyqq6tv3ry5ffv2+ISEESNHunl4GBgaftKiha2jY0dvb5/AwP6hY4dFRoYuWRKelhZTsC5208a4bVuX7d6ddPBAavHR9NLSVadOppee+OJYScqRw8v37onbumV+oWhm1upJK1aELJgfOHVqr6Agz149Hdu2bWVsbGRs7NGxY9DIkbGLF2/cuFEsFrPqtY7KTp6NGzdaO9jDfSpQ2vFjQmvrnTt3qjVhGqC2trZbt27Z2dmkA2ESVHHiggGlB4YuawUDCprk/fv3t27d2rhxY8SMGR06dfrkk0/MLS279e07aOqUCZ9/Pl8kWllSXFBRro7xKRJX5lw4n7BzR3ha2vBZM30CA1u7uhoYGrb39Jw6fXpBQUFFRQXZlSalJs+ZM2fMhMKUI4eJT3iWa/m+vaYCwaVLl9SdNnXzzTff8Hi8u3fvkg6EMVDFiQsGlB4YuqwVDCiQSV1d3e3bt3Nzc4cFBfFNTQWWlj6DBo2Mjo7+Mj/zTBnZQZt//Vr8ju3jE+J7B4+wb9PGhMsdNHTomjVr/vnPf75//17DHdX05Ll3757QwmLhV+uJz3at0Ny8XAsrKx14tfrSpUsHDhzI8jtIlAdVnLhgQOmBoctawYCC+vz3v/8tLS2NnDnT2tbWTCj0HTx4wuefJx8+xOY3RGadPTMrO8t/XJi9cxszc/OwCROOHDmisZ1wmpg8tbW1n/n6hsTEEO8mLdLwmZG9+/bV/P9MMMubN29cXFy2bNlCOhBmQBUnLhhQemDoslYwoICiqJqamuPHj4+fMMHYxMS5ffvgOXOW79vLZtMpT2knjo9PSOji58c3MwseHbJ3796XL1+qteuamDxp6ekdvL1FlRXEu0aLVFBR3tbTMycnR62Z0wDnz58XCAS///476UAYAFWcuGBA6YGhy1rBgOo5N2/ejJ43TyAUunftOnbRQp3ZIGjtpa+nr0zt3q8fl8ebOn16eXm5mq6FKpo8d+/e5ZmaphYfJd4dWqfE/fu5fP4vv/yijpxpkoiIiLCwMNJRMACqOHHBgNIDQ5e1ggHVT6qrq3fu3Onl42MmFA6ZNk2HH4/JOnsmdPFiZw8Pj44d161b9/z5c2Z7UtHkCQoOHjF7FvEuUFLRIRzn2CPEw5Bq8NSpoePGMZstzfPs2TMrK6uSkhLSgagKqjhxwYDSA0OXtYIB1Tf+85//ZKxaZWlt3blXr5lZq9eV3yA+CDUgkbgybuuWnsOHmQoESxMSHj9+zFR/yp08FRUVAguL3MuXVAr9aKyzZ2xKM/8qOoTD4YREN/t0R8Z6cjgcz7FHySessEqcc+E819T0n//8J1OpIsWBAwfs7e1fvHhBOhCVQBUnLhhQemDoslYwoPrD8+fPE5OSeKamvoGBy/bsJj72iCjjZOngaVPNLS1jFi588OCB6r0qd/IEBQePXjBf1YiPxjpzaEJnOfOv09Ewr2pR0OxZOrAIWldXFxwcPHfuXNKBKC/ZiQAAIABJREFUqASqOHHBgNIDQ5e1ggHVB6qrq3NycswtLHqPGJF06CDxUUdcORfOD5sxw8zcPHbJEhWfUpI9ee7du2dsYrLm4gVVYz0a6yzHSqbEenJkL44eGevJ4YTk0TtjdAi9RdC83g38L90A6mv1mTIjY+PffvtNlQyxgV9//dXU1PTKlSukA6EPqjhxwYDSA0OXtYIB1XmKi4sd27Tp7Nc7+fAh4uONVco6e2bg+PE2dnZbt22jveeP7MmTkprqNzKYgSjVZ0DzQ2QvkR6N7d3486OxzvJdaXSI3FXY3vmq9oBP4KDVq1erMP7ZQmFhoYeHB6ve4tUsUMWJCwaUHhi6rBUMqA7zyy+/DBk+3M7JaW4+A6tRuqrkw4c69ejh5eN98+ZNGp0se/K0dXOLERUwEJ/6DCidi/syLs2nxHrKWPL8cHBV7yidnZPTsXNn1SYCK3j//r2fn19SUhLpQGiCKk5cMKD0wNBlrWBAdZK6urqtW7eaCgQjo+d+eeM68WHGconElRHpaUIrq9VZWc1dCpUxeX7++edWxsYM9Xteb3UaUGXvE80Pkb2cKTWajU+n4EfNUe7lS5+2bPnw4UOGpgZJvv/+ey6Xe+vWLdKB0AFVnLhgQOmBoctawYDqHi9evBg9Zox9mzYJu3YSH2BapMwzZd379+/Tv3+z7jmUMXm2bdvWxc+PobBYbUD/Xv6Uvcz596V5VR9p8vDy2rNnD3MThCRffPGFr6/vu3fvSAfSbFDFiQsGlB4YuqwVDKiO8d133zm5OPuHhuZdvUJ8dGmdROLKsCWLLaytz58/r2SHy5g80dHRwyIjGYqJ1QZUscX8256qakADJk2KjY1ldJoQo6amplOnTl9++SXpQJoNqjhxwYDSA0OXtYIB1SVKS0tNzcympqQQH1darSVFRRY2Njt37VKmz2VMnr79+0dkpDMUTaOny5W9XVMjl+AViqkV0ClJiQGDBzM9WYhRXl7O5/N//vln0oE0D1Rx4oIBpQeGLmsFA6oz7Nixg29mNr9QRHxQ6YDSThx3cHX9Ii2tyRd4ypg8Ts7OS7YUMROKmh9CUqcB/ds6N38j/QZasL6wnYeHemYNGRYsWDB06FA1vRxWTaCKExcMKD0wdFkrGFDdYNOmTRY2Niv27yM+onRG2efPuXbqFLtkieKelzF5TAUCxt5tejTWWY7zY7kBle7NpPpOTMv37rGwslLPxCHDq1evHB0dd+/eTTqQZoAqTlwwoPTA0GWtYEB1gF27dvEFgqSDB4gPJx3TmosXXDp0WJ2draDzZUweA0PD9NJSZoJQswFtFspbSdl7M9HVnNy1BoaG2rVe2CQnT560sLB48uQJ6UCUBVWcuGBA6YGhy1rBgGo7ly5d4vL5cdu2Eh9LOqns8+fs2rTZsWOHvP6XMXmMTUzSThxnJgI1G1BlPWVzVkDr7UvPzCs9Z65e/Y9//GPo0KGMvDuVPUyaNGnKlCmko1AWVHHiggGlB4YuawUDqtXcv3/f3MIiOj+f+EDSYaUcOWxqbn7jxg2ZKZAxecwtLBIP7Gfm9PKdn+pvQlJ9l/jGYtx9FlaJE3busLa1nTt3rrm5+b59+9Q8pzTHkydPhELh6dOnSQeiFKjixAUDSg8MXdYKBlR7qa2t7dGr1+Bp04iPIp3X7JycNq6ur1+/bpwFGZOng6cnY8+C5ct/zaVimjKgKbGeDHrEwirxX8aXafdZWCWOWrumq5cXRVFlZWV2dnbjx4//448/1D69NMLOnTudnJz+/PNP0oE0Dao4ccGA0gNDl7WCAdVesrOz27i7f3n9GvFRpA/qN3bMnOjoxlmQMXmGBQVNWrGckbOmxHrKW6dUcQU0OoSB59Prqd52UUweVlxYJQ5dsnj02LGSvn327NmkSZNsbW1Pnjyp3umlEerq6oYMGbJo0SLSgTQNqjhxwYDSA0OXtYIB1VLu37/P5fOX79tLfAjpidZe+lpobX358uUGiZAxeRKTkvzHhTFyVgU2UTUDKnd/ezqq/zwTE08dNVDv4OD09PT6PXzw4EGhUDhr1qxXr16pcZJphJ9++onH41VUVJAOpAlQxYkLBpQeGLqsFQyoljJt+vQ+o0OIjx+90uSkxD79+zdIhIzJc+LECdeOHZk4pSIrqZIBZfAG0HrukzFH+7HsnZ3Pnj3boJN///33oKAgZ2fnK1euqGuSaYq8vDxPT8+3b9+SDkQRqOLEBQNKDwxd1goGVBv5+eefWxoYrCwpJj5+9EoFFeW2jo4NnkaSMXlevXrV0sAg6+wZVU+p8EF1FQzokbGeTF0o/3Dfp5rcZ9qJ4waGhv/9738b93NdXV1RUZGpqWlcXFx1dbW6Zpv6effunY+PT4NVXraBKk5cMKD0wNBlrWBAtZElcXG9goKIDx49VNjSuKHDh9fPhezJMyAggIHbQPNDFDzNI//qfFMGlLnlT2b3+5Sp0CWLh3zc4w24d+9e3759O3Xq9O233zI5yTTLv/71Ly6X+3//93+kA5ELqjhxwYDSA0OXtYIB1Trev39vbWsbu2kj8cGjh1pz8YKhkdGLFy+k6ZA9eXbs2OHh5aXiyaJDFC0r0jWgym3SpJTqP/auAJXMrmvHjgcOHGhySqxdu5bL5aalpdXW1jI52zTIihUr+vbt+/79e9KByAZVnLhgQOmBoctawYBqHTdu3DDmcgsqyokPHv1U1z59Dh06JE2H7Mnz+vVrvpmZSs+IHY11VriZUXSInN2OJDdlNvvOUXoRqteAxm3bKrS0VPLy+nfffde9e3dfX98ffviBmammWaqrq93d3Tds2EA6ENmgihMXDKgyNO4iDF3WCgZU61i1apVPYCDxkaO3GrNo0dTp06XpkDt54hMSVLlPIjqkiTcPfWxA6+2CpOCOzKZMLdv0WUBASmqq8nPj7du3ycnJPB5v3bp1rF1KVMDly5dNTU1/++030oHIAFWcuGBAlUH6HVj/E+K5g2QKBlTrCB41atzSOOIjR2+1ZEuRc9u20nTInTxPnjzh8vlJBw/QOc3RWOcmN/KMlbWQ+deqpEyXmddbq9xnwq6dpmZmz58/b+4Mqays9PDwGDhw4C+//EJzkpEjKipq1KhRpKOQAao4ccGAKkOD6y8Uhi6LBQOqdXh06DA7J4f4yNFbZZ8/Z8LjSdOhaPKkpKZ28fMTiSube46U/Dxm93IvrBJHh2iT+xSJKz28vLKys+lNkjdv3ixcuNDMzGz79u11dXX0DkKE58+f29nZ1b/JgyWgihOXxIACGhDPHSRTMKBah8DcPG7bVuIjR5/1acuWb968kaRD0eSprq5u4+Iyc/Vq4hFrnaalprZ1c1Nxa8wLFy44OjqGhIQ8fvxYleNomOLiYmtr6//85z+kA/kIVHHiwgqoMsCAapFgQLUOAwODlCOHiY8cfZYJl3v79m1JOpqYPF9//bXAwiLzTBnxoLVIaSeO883Mrl27pvpsefHiRXh4uKWlZXFxsepH0xhjx46NjIwkHcVHoIoTFwyoMtT3ndJPiOcOkikYUK2Dw+HE79hOfOTorUTiSg6Hc+7cub/S0WTCFsfFde7Vq6CygnjoWqF15Tfcu3VbkZjI4JwpKSmxsrKaPn16/Q202MzDhw8FAsGFCxdIB/IBVHHiggFVhvrWU/oJ8dxBMgUDqnX8z//8z4L1hcRHjt4q+/w5DocjfXd305Pn7du3vfr0GRoRTjx0rZD/uLABAQHv3r1jdto8fvw4JCSkdevW58+fZ/bIaqKoqKht27bSWz2IgypOXDCg9MDQZa1gQLWOf/zjH5OTEomPHL3Viv37/vGPfyh7CV7Co0ePWjs5TU5E2ppQ2JLFzq6uf/zxhzpmTl1d3Y4dO8zMzBYsWMAeYyePuro6f3//hIQE0oH8Bao4ccGA0gNDl7WCAdU6Pvnkk0FTpxAfOXqryMzMFp9++u9//1uSDmUnzw8//GBhZTkrO5t4A1ir6V+stLK2vnfvnrqmDkVRFHX//v2AgAB3d3fpIjZruXPnDpfLvXnzJulAKApVnAWCAaUHhi5rBQOqdbRo0aJtt67ER47eqtfIYEMjo2YbUIqibt68KbS0nJWVRbwNLNT0L1ZaWFl999136pk1H1FXV1dQUMDj8RITE1V80F7drF692svLiw3vF0UVJy4YUHpg6LJWMKBaR8uWLQ2NjNZ8fZH44NFDicSVfKGQZ2pKx4BSFPXtt99aWltPXrGceEtYpXFxcda2trdu3VLDfJHLDz/84Ovr261bN824XnrU1tZ27do1JyeHdCCo4uQFA0oPDF3WCgZU62jZsmXbbt2m4DZQEorfvp0rEAgsLGgaUIqi7ty549imzbAZM0R4Lr5KXFBRPmjyZGdX159++onpmdI0tbW16enpXC43JyeHta/urKqq4vF4d+/eJRsGqjhxwYDSA0OXtYIB1Tpatmw5NSW5tYcHjTfsQCqq28CBQ2ZEqGRAKYp6+vRp7759u/Xru+biBeJNIqisc2c79ezpHxDw7NkzRudI8/j22287duzYp0+f//f//h/BMBQQFxcXEBBA9pVOqOLEBQNKDwxd1goGVOto2bLlqtOn7Nq2nS8SER8/eqWkgwdaGhquOn1KVQNKUdTbt28XLFpkZWcXt3UL8YYR0aKNGyxsbJbGx7PhBsfq6uqlS5fy+fxNmzax8NWdr1+/dnFx2bZtG8EYUMWJCwaUHhi6rBUMqNbRsmXLzLLTM1ZltPbwwFVcTeqzwYMDpkwprBIzYEAlHDt2zMLKalhExJfXrxFvnsaUf+3qoMmTrWxsTp06xcSMYIwrV664uLgMGzbs4cOHpGNpyLlz58zNzR89ekQqAFRx4oIBpQeGLmsFA6p1SAxoQWWFS+fO4xPiiQ8hPdG8dV/yzM1zLpwvZNCAUhT1+PHj4JAQBxeXhRu+It5IDShGVGDXps2Y0NCnT5+qPBeY59WrV7NnzxYKhQcOHCAdS0PCw8PHjRtH6uyo4sQFA0oPDF3WCgZU65AY0MIqcWrxUb5QuLKkmPgo0nllXzjPt7CIzMyU/JNJAyqhpKTEzsGhx9AhacePEW+tmpRafNR70CAHJ6fS0lJGOk19nDx50tbWdsKECWRvTm3AH3/8YWVldezYMSJnRxUnLhhQemDoslYwoFqH1IAWVoknLvvcsX17vbp+q3mJxJVegwb1GDFC+gnzBpSiqNevXyenpPDNzAZNnrz6TBnxZjOoVadPBUycYCoQpKWns/8VRBL++OOP8ePH29rasuo+gf3799vb2798+VLzp0YVJy4YUHpg6LJWMKBaR30DKhJXdg8I8Bk2FE/Eq08joqLs27XLvXJZ+olaDKiEBw8ezJ03j29qGjh1SsbJUuKNV1FpJ44HTJrIMzWdv2ABwfsXabNv3z5zc/OoqKg///yTdCwURVF1dXUjRoyIjo7W/KlRxYkLBpQeGLqsFQyo1lHfgBZWib+8fq2dl9eQGRHEx5JOasLnn/MtLNJLT9T/UI0GVML9+/dj5s/nm5n5BY+I376deC80VyJx5ZItRT2GDuWbmsYuXvzgwQN19JJmePDgwdChQ11cXK5evUo6FoqiqF9//dXU1FTzwaCKExcMKD0wdFkrGFCto4EBLawSr/n6or1bu+DoucSHk44pMjOTJxAkHtjf4HO1G1AJz549W5WZae/o6NKhw/iE+OwL54n3SJPKOnsmdPFiJzc3J2fnrOzs58+fq69/NEZdXd2GDRv4fP7SpUurq6tJh0MVFhZ6eHhoOBJUceKCAaUHhi5rBQOqdTQ2oIVV4syy03Zt2w4OD8e1eKY04fPP+ULhst27G/9IQwZUwrt370pLS0PGjDHmcr0G+E//YiULX8Oac+H81JTk7v36GZuYjA0LO336NGtfLESbu3fv+vn5derU6ebNm2Qjef/+fe/evZOTkzV5UlRx4oIBpQeGLmsFA6p1yDSghVXitZe+9vDx6REUhGeSVJSosmLQ1CkCG5vkw4dl/oJGDaiUZ8+eFRUVDRw0qJWRkWePHmNjFyXu30/wfzhElRXL9+0dvWBBRx+fVkZGg4YM2bZtm24secrj3bt32dnZXC43PT2d7P75//73v7lcribfYo8qTlwwoPTA0GWtYEC1DnkGtLBKvK78Ro+gIGdPz1WnThIfWlqqtZcvdQ8IcPb0zJT/JDoZAyrl+fPnBw4cmDRlipWNjalA4BMYOGbRoiVFRfnXrqq7d/KuXondvGn0wgWfDRzIFwhs7OymTp9+6NAhIs9lk+LWrVtdu3bt0aPHDz/8QDCMlStX9ujRQ2MrzajixAUDSg8MXdYKBlTrUGBAC6vEInHl6IULTS0to7/MJz66tE5xW7dY2Nv7jQ7JV7iKTNiASqmrq/vhhx82bNgwdfr0tm5uLVq0aO3q2mPI4KCo2REZ6Qm7dmafP0d7iVQkrsw6dzZh547wtLThs2b5BAY6uLh80qKFm4fH9PDwTZs23blzh4VvrdQMNTU1K1as4PF4BQUFpDqhpqamY8eO69at08zpUMWJCwaUHhi6rBUMqNah2IBKtGz3bhtn5z5jxuRevkR8jGmFCirKh82caWJqGpGR3uQvs8WANuDVq1fXrl0rLCycN2+ef0CAvaPjJ598YmBoaOfk5N61a3f//n4jgweMHz8kInzEnDmj5s0bvXDB6IULRs2bN2LOnMHh4QPGj+8dHOzl39+taxdbR8eWBgYtPv20tZPTwMDAeTEx69evv3HjBkt2I2IJ5eXl7dq1CwgIuH//PpEAbty4wefzf/nlFw2cC1WcuGBA6YGhy1rBgGodyhjQwipx3tUrfceOFdrZzsldS3yYsVxxW7c4tm/foWdPJXfeZKkBbcy7d+9+++238vLyY8eOFRUVZWdnJycnL1q0aHZUVERk5JSpU6dOnz4jMnJ2VNTixYuTk5NzcnK2bNly/PjxioqKBw8e6N6DRIzz+vXrmJgYMzOznTt3ElkKnT9//vDhwzVwalRx4oIBpQeGLmsFA6p1KGlAJVpctLm1u7tn3z7ynqfRc606ddJn2FCeuXl4WpryF6u1xoACzXD27FkHB4fRo0c/efJEw6d+9epV69at9+zZo+4ToYoTFwwoPTB0WSsYUK2jWQa0sEpcUFkxcfkyvlDYf1yYggdr9E1rL18Kjp5rzOcHTJ685uKFZv0tDChoyPPnz6dOnWplZVVSUqLhU5eWllpYWDx9+lStZ0EVJy4YUHpg6LJWMKBaR3MNqEQ5F84PmjaVKxAMnDRp1elTxAceQWWfPye53dN76NDU4qM0jgADCmRz5MgRCwuL8PDwFy9eaPK8EydOnDp1qlpPgSpOXDCg9MDQZa1gQLUOegZUouwL54fNnMkTCHoGj0jc3/AFPzqv9NLSgMmTjXg8n2FDkw8fon0cGFAgl0ePHo0cOdLR0fHChQsaO+njx4+FQmFZWZn6ToEqTlwwoPTA0GWtYEC1DlUMqERrL309cl60wNq6bfduERnpOr9xfUFF+ez/3965x8WU/398vusSXWamdJWSlDYRm8uGKEOlRdkil1oiQ5JEtFhRbEW6TEmhlQ1LsptrYbKEzaXytfv9pf1a7de6X6LNEKWa+f1xdmfHzJnbmTPzOdO8n4/XH2vM+ZzPnPM5+3n6nPP5nPT0QR4eBgzGhJA5SaWnVCwQBBSQBZ/PLywsZDKZK1asePv2rWZ2euDAgX79+qlvmQLoxZEHBJQY0HQpGxBQrUN1AcWyo7pqaXbWEC9PIxMTz+DguMJvO99rPDf+8P2kBQsYpqa2zs4h67/i/HSZlGJBQAH53Lt3j8ViOTs7V1dXa2B3fD5/0qRJsbGxaiofenHkAQElBjRdygYEVOsgS0CFSTld5r9kiVV/+169e3vPnbt6b8GO6irkLZNwcmuq1353wC98gWW/fgxTU9acOeuLDpG7CxBQQCE6Ojqys7ONjIw2btz4/v17de/ujz/+oNPpavJd6MWRBwSUGNB0KRsQUK2DdAEVJqHkh4ClkbYff2xkYjJq6tQFSUnbzpUjb6IKJv3C+Yj0tPGzZppYWRlbWHgGB6/cvVtNJg0CCijBr7/+OmLEiGHDhtXV1al7XxwOZ8iQIeqQXejFkQcElBjQdCkbEFCtQ30CKszmEyeCV68e4uVlQKf3GTDAa2bwwi0pyWVlVLtHv+3Hc5GczImhITZOTl27d3d0c/OPjFx38Dt11xMEFFCOtra2zZs3GxkZZWRkqHV5//b29pEjR6akpJBeMvTiyAMCSgxoupQNCKjWoQEBFWZHddXaA/sDY5a7jB6tT6fTe/VyHTdu8qJFi7albjp2VMN36nNrqpNKT0Wkp09etMjVc5yxhUU3PT2HoUMnLViwLGd7pgZfOgoCChDhxo0bLi4unp6ed+/eVd9e/vOf/xgZGf3222/kFgu9OPKAgBIDmi5lAwKqdWhSQEWTW1P99ckTi7al+oUvcBkzmm5i0rV7d6v+9kPHj58YGjozLm5JZsZXBw9uOXtmR9V1VXa0/drVLWfPrC86FJWdPTMubkLIHFfPcVb97bvp6fUwMHAYOtQzODhk/VdfHTyYc/0akqsGBBQgyLt371atWsVgMPbs2aO+92euX7/e09OT3KFW6MWRBwSUGNB0KRsQUK0DlYBKJqPiwtoD+xduSQmIWjpmWsCAYcPM+vTpYWDwr48+MmQyzW1t+w0aNHDUqE9YrE8nfzY2KHD8rJkTQuZ4f/HFxNBQr5nBHoGB7lOmDPf1GTp+/KAxY/oNHmzWp09PQ0Majdala1djC4t+gwcP9/XxCZs3Z926Fbt3bTl7hiLPAICAAipx8eLFfv36TZ069cmTJ+oo/927d05OTvn5+SSWCb048oCAEgOaLmUDAqp1UEdApWX71Sspp8u+OngwOndHeHLy3ISNc9atC1696vPo6KlLIvzCF/iGhfktDJ+yeJF/ZOSM2JUhX62b//XmpVmc1XsLNv7wfdr5HykimtICAgqoCo/HY7PZpqamR44cUUf5ly5dMjY2fvz4MVkFQi+OPCCgxICmS9mAgGod1BfQTh8QUIAcTp06ZWlpGRIS0tjYSHrhERERQUFBZJUGvTjygIASA5ouZQMCqnWAgCIPCChAGi9evJgxY4a1tfXZs2fJLbmpqal3794lJSWklAa9OPKAgBIDmi5lAwKqdYCAIg8IKEAmfD7/4MGDJiYmkZGR5L5L89ixY1ZWVn/++afqRUEvjjwgoMSApkvZgIBqHSCgyAMCCpDPw4cPfX19HRwcKisrSSx2xowZixYtUr0c6MWRBwSUGNB0KRsQUK0DBBR5QEABtcDn83fu3Emn09euXdvS0kJKmU+ePDE2Nq6oqFCxHOjFkQcElBjQdCkbEFCtAwQUeUBAATVy586d0aNHu7q6/vLLL6QUuGfPHkdHx3fv3qlSCPTiyAMCSgxoupQNCKjWAQKKPCCggHppb2/funWroaHhli1b2tvbVSyNz+ezWKx169apUgj04sgDAkoMaLqUDQio1gECijwgoIAm+OWXX1xdXUePHn3nzh0Vi7pz546RkdHPP/9MuAToxZEHBFQRJA8RNF3KBgRU6wABRR4QUEBDtLa2rlu3zsjIKDc3V8VXd27dunX48OGEx1OhF0ceEFBFoP2N6CfIzx0ENyCgWgcIKPKAgAIa5cqVKw4ODr6+vg8fPiRcSFtb2yeffJKRkUFsc+jFkQcEVBFoHyKgStM9OsOVJhv72KOoK6npgIBqHSCgyAMCCmiaN2/eLF261NjY+LvvviM8FHrjxg06nf6///2PwLbU6MV1OpiAAgRAfu4UEVAMj2zkVdVcQEC1DhBQ5AEBBdDA5XKtra2nT5/e0NBArITVq1f7+PgQUFhq9OI6HRgBVQSqC6hrbCLuF7IDddBBQUC1DhBQ5AEBBZDR2NgYGhpqYWFx8uRJAps3Nzfb29vv27dP2Q2p0YvrdEBAFUHUO4WfID938gX0Rk3ejSyPvyruOuMY8gprIiCgWgcIKPKAgAKI+f77701NTcPDw1+9eqXstufOnevVq9ezZ8+U2ooavbhOBwRUEUTVU/gJ8nOnmIDW5B2Ltcd+QGAW6gprIiCgWgcIKPKAgALoefLkydSpU+3s7Ai85Wj+/PmzZ89WahNq9OI6HRBQYlCj6SomoDdqogKlDoImxuI8Rirzfr34g6dUm+cEAqp1gIAiDwgoQAn4fP6ePXsYDMbKlSuVetHRy5cvLSwsTp06pfgm1OjFdTogoMSgRtNVVECFD4N+YJbCkVFc8MrEtVWq3d8HAdU6QECRBwQUoBB379719PR0dnauqalRfKvi4mIbGxsej6fg96nRi+t0QECJQY2mq7CA/u2aIqOVwmdDA6M++LLwc/GhzX/sU3R3/8xzEisHWUBAtQ4QUOQBAQWoRUdHR2ZmpqGhYWJi4vv37xXZhM/n+/v7L1u2TMFdUKMX1+mAgBKDGk1XYQEVauXfj4H+bZN4I5e4z4zKeJCUYs+YqkNA29vbd+zYER8fT26xWkdhYeHatWubm5vJLRYEFHlAQAEqcuvWrWHDhg0fPlzYOmXz4MEDBoNx5coVRb5MjV5cpwMCSgxqNF3iAqrsl2UJ6z9/S4lBUNIF9Ny5cy6DB9NotAkTJ5JYrDaSlpZGo9Ese/fet29fR0cHWcWCgCIPCChAUd6/f5+QkGBkZJSZmanI/3Ryc3MHDhzY2toq95vU6MV1OiCgxKBG0yVdQD+cYCTy5b+mMUnb0d+DoFRYbZREAb1165avn5+xqWno+vX+S5aEzZ9PSrHay/bt20dP/mxpFqdPf3vXoUMvXLhASrEgoMgDAgpQmurq6o8//tjLy+uPP/6Q/c2Ojo4xY8YkJibKLZMavbhOBwSUGNRouqoL6D9PfOLwz5f/3pE0f+10Avr06VP2okX6hoZTFrEzL1/Ku1EzbVkUCOj27dtHT54kBQZKAAAgAElEQVScd6NmR9X1OevWMnv1+mzKFAVvjskABBR5QEABqvP27dsVK1YwGIyCggLZ7z2qq6szMjK6deuW7AKp0YvrdEBAiUGNpqvKJCTh2kwfYB97FM9W5Qno35tQYUkmFQX07du3XyclGdHpHv7+yWVlwmJBQAUiAool89JFvwXz9Q0MlkRGPn/+nHCxIKDIAwIKaAfnz5+3tbX19/d/+vSpjK9t2rRp9OjRsm/ZU6MX1+mAgBKDGk1XUQEVTmD/Z4RS1ux15QW0U4yAdnR07N+/38raeuDIkesOfidWLAioQEJAsSSVnho1+TMjOj0lJUWplfuEgIAiDwgooDW8evVqwYIFpqam33//vbTvtLa2uri47NixQ0Y51OjFdTogoMSgRtNVUECFT3b+45qynunEm9Uu5xlQ3HVGEYWYgFZUVAz55JM+9vaRnMzcmmrJYkFABVIEFMuaffs+HjbM2sbm4MGDys5PAgFFHhBQQMs4ceKEhYVFaGjon3/+ifuFq1evMhiM+/fvSyuBGr24TgcElBjUaLqEX8Upc0RTODiqG7Pg//vf/342ZQqzV6/Za77MuX5NWrEgoAKZApp3oya3pnpx2rbefft+MmzY5cuXFS8WBBR5QEAB7eP58+eBgYF9+vThcrm4X4iOjp4yZYq0B0ap0YvrdEBAiUGNpquIgAqnGYm6o4wNRaYldfZ1QBsaGiKXLtU3MJgUFpZxsUJ2sdOWRdFotC91GwMDg6Ge42QfqO3XrgavWkVnMgOmTbtz544iJwIEFHm0QEBfvHhx9erVoqKi1NTUqGXLpgcHjxs/ftAQVzt7e1NzczqDoW9goNejh16PHvoGBnQGw8zCws7efvDQoZ4s1oyZM6OXL9+2bdvhw4evXbv28uVL1L8GIAc+n79//34mk7l06dI3b96I/S2Px7O1tT18+DDuttToxXU6IKDEoEbTlSOgom/OFLs5/s9fiVpj9ofzkj4sVt6bkKjyNk5FBPTdu3dbtmyhMxjufn5fnzyhSLErdu/yCZsHCU9OVuRwpV847/PFFz169lwWHf3ixQvZpwMEFHkoJ6BtbW3//ve/d+3atXjJkhHu7gxj465du/axtx8yZsy4wMDJixbNWvPlwi0py3Nz4wq/3XCkePOJ48llpVvOnN5y5nRyWenmE8c3FBfHFX4bnbsjPCV51pdxk9nssZ9Pcx092trOrkvXrsYmJp+OHr0kMjI/P//nn39ua2tD/YsB4ty/f3/ixIkODg6SS9CXlZWZm5vj/pODGr24TgcElBjUaLofLtspHbxHM6Vuax979O8J8uK31HEnzlPKPvPkCSifzz906JC1jY2Tm9uX+wqR17ZzZ/OJ4yN9fOgMRlpaWktLi7STAgKKPJQQ0JaWloqKivj4ePcxY3rq61va2Hzq6xOwNHJJZsam48d2VF0n69fuqLqeeLRkSUaGf+SSkd7e5r1799TXHzNuXEJCwqVLlxRZwxygGh0dHTk5OUZGRuvWrRM7gyEhIWFhYZKbUKMX10xIWqfmWKy9/EUflQgIKDGo0XTlCqgcLxQdIqXRREZD/xrXxN1cfOlQKiy9JBoZAvrTTz+5DR/eu2/fRdtScWcaQdSR1QUFjkOG2NrZFRcX4z6OBQKKPCgF9NmzZ/n5+Z9NnapvYGDn5DQxZE5EenpqOVeTv38r9+yibakTZs/uO2CAoZHR1ICAPXv2NDQ0aPhQACpy+/Ztd3f3IUOG/Oc//xF++Pz5c1NT0/LycuHsyP/9738CqvTimonqAqr4quNKBASUGLrUdLUsuAJaX18/LTDQiMkMXhW7/dpV5JXUteTWVIenJFtYW4/49FPJu2QgoMiDQECbmpry8/PHennpGxqO9Paem7CRIo0g5XRZaHz8cBZL38DAa8KEgoICHo+nmWMCqE5bW1tSUpKhoeGWLVva29uxD/fv329paZmQkNDU1BQREfHxxx8LdKsXBwHtVOhS09WyiAnoy5cvl8fE6BsYeH8Rmn7hPPLq6XKyr14JWhFjSKcHTZ+OjUFggIAij+YElM/nX758OXjWLEM6fcSECYtSU7Mqf0L++3GTeflSeHLyMC8vA0PDkNDQq1evyn4BD0Adbt68OWjQoDFjxtTX1wsEghcvXujp6X300UeWlpY0Gs3AwIDP5+tSLw4C2qnQpaarZREKaEtLS3p6Op3BGOnjven4MeQVg2DZ9uO5CbNn99TXX7FyZWNjowAElALRhIC2trbu3bvXedAg6379glfFpp3/EfnPVjCp5dyg5cutbGwGDRmyb9++9+/fq+kQASTS0tLy5ZdfGhkZ5eXlBQQEiD2e1tTUpEu9OAhop0KXmq6WBRPQI0eO2NrZOQ5xXV1QgLxKEMkklPwwbPx4polJVlYWCCjyqFdA3759m5GZaWFlNdRjTPSOHC19/jq3umppdtZgd3cra+vs7GwZs+oA6nDp0iXc+RG3bt0iuRcXrkeo0PQIiQkc+KsYYuLoOuPYhzM2XPtJn6VRg6ebMgRUfk3EJ4vQaDSS3joDAkoMEFDKpqC09KOPPjK3tg5PSdbSnk53smL3LnuXgTQa7YsNG+BkIYy6BLStrW3nzp0WVlYjvSd+degg8t9JStbs3+fm5WVlbf3NN98InzIEqMmNGzc++ugjSX86e/Ysib24UgvE4PqclC//JaAega4ffC3vL9nFd1ycScT4AqpgTUBAqQYIKGXzVVoajUYbOHLkhuJi5JWByE7K6bIxU6fSaDSv2bO2X72CvD46G7UIaHl5uaOT02B393UHv0P+C0nPl/sKBw4f7uzicuHCBbKOGEAufD7fz88P17AKCgpI68X/Xg37A70TDohKW0/7g4FG3BfG1OC+GCYxOytR1g1x3L/CEVAlawK34CkECChlg92C/+qrr/QNDDyDArdqdjkXiILhXL40ZRG7p77+vLCwbt26wS14tCFZQJ88eTI9ONjK1nZpFqcTj2zn1lRHpKdZ9ukza86cZ8+eqX7cAHJZvHixlBE+WmJiIlm9+F/Dn5JmJjkSeUzGyKUsccR5z7W0tRL/3sWHI5QSAqp0TUBAKQQIKGUjnIT04MGDkC++MDA0DIiMpOxEWx3Mjuqq0Ph4EzOz8SzWzz//LIBJSBQIaQLK5/MPHjzYy8xs8sKF2Vcqkf8wDSSr8ie/+fNNzc2Li4tV71oAEqmqqhIap4mJiZOTU79+/bp160aj0VgsFskCKumIEvlr0FGaw0m/dY73hKjsu+pilRH/svI1AQGlECCglI3YMkw3btwY5+Vlamk5LzExt7oKefV0PNG5O/o6OQ34+OPS0lLhmjYgoMhDjoDyeLzgWbPsnJw65T132Vmzb59N//5zQkMl30gOoKKlpaVr165iY589evQYNGjQxIkTyerFRR+RVGjiEf58oxqhJooMXsqavY438iptF2LlEKgJCCiFAAGlbCQXoufz+SdOnHBwdLQfOHDF7l3Ia6ib2VBc7DpmjImp6c6dO8XevA0CijwkCGhtba1df3vWzJnZuvowb1blT+MCP3dwcvrvf/9L7BgCJPL+/fubN2/SJPjXv/4VGBgYGBhIXi+O905CHFETf4ugNBSbvS7rFr/EDCGxcgjUBASUQoCAUjbSXsX5/v37HTt2GPfq9YmX58YfvkdeT93J1nKuZ1CgvoHBuq++wn2nDAgo8qgqoMePHzfu1Ss86WvkvwR55iZsNDE1LSsrI3AYAVV49erVxYsXORxOWFjYkCFDunfv3rt3bzGj0tPTYzAYNBqNyWSS3Itn48+ElxzOJE1A/5ZC8RvrOA8DgIB2KkBAKRsZ74IXCARNTU1xX37Z00CfNXPmtnPlyGvbuZNV+dO0pUsNDA3nhITcv39f2kkBAUUelQQ0Ny/P1NJy7XcHkP8MimT13oJe5mZ79uxR9kgCSvHgwYOTJ09u2rQpMDCwX79+Xbp0+fjjj2fNmrV169azZ89i08IyMjJw1WrWrFnq6sUlTFRM+5RZDV7OJh8+yinuo9LLIVATEFAKAQJK2cgWUIw//vhj1pw5BkZGn0cvU/CG4YYjxeHJyZDVexVa2D+3uips0yZTS8uxnp43btyQfTpAQJGHuICmpKRY29ltPnEC+W+gVBJKSiz69MnIzFTqYAIyaG9vv3Xr1oEDB1atWjVx4kRTU9OePXuOHDly0aJFeXl5V69ebW5ultxq165duAJ64MABtffiQhP9UBClP3kpGXmm+Nc9d9cZxz78bznlEKgJCCiFAAGlbBQRUIyqqqpRY8aY9+69IClJ7lox05ZF0Wg0lre3LodGow31HCf3FKzcvdveZaDDgAEnTpxQ5O3ZIKDIQ1BAU1JS+tjbbzl7BvkPoGCSTp20tLHJ5HAUP56AKM3NzVevXs3NzV20aNGIESN69uxpamo6ceLE1atXf/fdd7du3VLkLQCNjY09e/bs3r27qH126dLl5cuXJPXismRO7J644vPl/47cocp/Rj1lTmwXL0f5mkhfbUqFgIASAwSUslFcQAUCAZ/PLykpsbO3d3R1XVWwR0ax05ZFhc2fr9ZGRX22b98+evJkGUcpoeQHNy8v4169cnJyFH9jNggo8hAR0Pz8fEubPmCfMpJ06qSppeWBAweIXG26x/Pnz8+ePbtly5ZZs2Y5OTl16dLF3t4+MDBw8+bNJ0+efPjwIbFi//jjj4sXL4oK6Lhx4wTk9eIyZE5c2oSr0+MOPf49YqrgLHgsf3tnoIfU++945ShdExBQCgECStkoJaAYra2tWVlZTBOTERMnbjp+DLdYEFCBTAHd9uO5CbNm9TQwWB0X19TUpFSxIKDIo7SAlpeXG5uaJh4tQV51imf94SKmicmlS5eUvto6O3w+/86dO8XFxevWrfvss8+srKy6d+8+dOjQsLCwrKysixcvKvv/ERmkpaWJCmhqaqqAxF78n7fAf+CgwuWZRKVQ5KWd+F+W+wYjiYjOKFL87fDK1oTIoKncgIASAwSUsiEgoBiNjY0rY2N7GhhMDJmTduG8WLEgoAIpApp99UrQ8uVGDEbwrFl3794lUCyVBBRvQZUPUWilP6lI6yAQRzkBvXv3rqmZ2YpdO5HXWyuyNItjZmFBeACv09Da2nrjxo1vvvkmKirKw8PDyMiIwWCMGzdu+fLle/fuvXnzZmtrqzr2m5+fb2Fhcfv27bq6OmxePNbWyezFpUyBp9FwhhilvzhecnxRodlC/xQob11PsXKUqYn4G+HhXfAIIbPpQkgNYQHF+P3334OmTzdiMmfErtx+7aqwWBBQgYSA5tZUh6ckW/Tp4z569PXr1wkXq10CKvN/v4ptrsSj/xqKEgLa1tY2wt09MDoaeaW1KFMWsT08PTs6OghfJNrIn3/+eeHChYyMjLlz5w4ePLhbt259+vSZMmVKfHz8Dz/88PvvvyvyhLiKFBUVmZiY3Lx5E/vj//73P19fX+y/ye7FJS9+GYOFkgshKTJ5SErw7pgrXI6CNanJU2LJfUUDAkoMspsuhLSoKKAYV65cGfHpp1a2totSU7H5SSCggg8FdHVBwYAhQ/rZ2//www8q9iNUFFA576iT9n97OZvj3pSjQpQQ0KTkZJeRI+GtYkplR9V1R1fX9PR0Va4T6nPv3r1jx44lJCRMmzatb9++Xbt2HThw4Jw5c7Zt21ZeXt7Q0KDh+pSWljKZzMrKStEPhf8MgF4ceUBAiQFNl7IhRUAFAgGfzy8uLrbp2/djN7e4wm9BQAV/C+im48dG+vgwmEwOh0PKTTNtEtAbNSJDBpIjBfI3l75WNMooKqC///47ncmU9qA0REY2FBcbMRgylsPVOtra2v7v//5v3759K1euZLFYJiYm+vr67u7uERERu3btun79+tu3bxFWr6KigslkcrlcaV+AXhx5QECJAU2XsiFLQDFaWlrS09PpDAaNRpsydSpZxWop6enpNBqtp4HBipUrGxsbySpW2wRUxhRSBTaX+rY8lFFUQKcGBPhHLEZeXQUTFUitoeZJ8+YFz5pF1mWjed68eVNZWZmTk7Nw4cJhw4b16NHD3Nzcx8fnyy+/PHTo0K+//kqdZwyqqqqMjY1LSkpkfAd6ceQBASUGNF3KhlwBxXjx4oV/QMDcuXPJLVbr2L59u4uLy++//05usdonoP88vi82CKrEACql1EghAa2qqjIxM+NcvqTSzo7F2iu/kktUILFBY+x8UGXmV/qF80ZM5i+//ELu9aM+nj59evr06eTk5ODgYEdHxy5dujg4OEyfPj0pKam0tPTRo0eoK4hPbW2tqalpYWGh7K9BL448IKDEgKZL2ahDQDHevXunjmK1CDUdAW0UUCnP/XfqEdCpAQFBMctV3dk/a9YoDRFn/2t3VHniYWrEYsoOgvL5/Nu3bxcVFa1Zs2bSpEkWFhZ6enpubm4LFizYvn375cuXeTwe6jrKp76+3srKKicnR+43oRdHHhBQYkDTpWzUJ6CAmtBKAf3boz6Uos77DOjdu3cNDA0zKi6ourNjsfZSVDIx1lXKgTs6w5X42gFRgcQGQcVmB5MzjJpaztU3MKDI2OG7d++qq6t3794dGRk5evRoQ0NDY2NjLy+vmJiYwsLCX375RfGXSVCEhw8f2tnZJSUlKfJl6MWRBwSUGNB0KRsQUK1DKwVU6CcfeJGczYXr7lHq/nueIgKauGnT2GkBJOxMfQKaHYh/WI/Fekh+fizWXrHlZj6AjAW0PvX1wRZC1zwvX7788ccf09LSQkNDXVxcunbtamtr6+/vv3HjxqNHjxJbxZc6NDQ0ODs7x8XFKfh96MWRBwSUGNB0KRsQUK2jEwoo6XeS1Rz5Auro5BSdu4OEnalPQInc3McbiBYutSWyx3+UVGUHjUhPHzRkiGYurbt37x49enTDhg3+/v42NjZdu3YdNGhQaGhoenr6jz/++PLlS81UQwM0NTW5ublFREQovgn04sgDAkoMaLqUDQio1qFrAkru65RJiRwBvXfvXk8DA9EXM6iQLA91Cqiidp8dSMN/Dvfv8ypRE7JeRci5fKlb9+5Pnjwh/UJqa2v75Zdfvv3225iYGC8vLyaTaWhoOHr06MjIyPz8/Orq6s76GHtzc7OHh0dISIhS0/ChF0ceEFBiQNOlbEBAtY5OKKBSN5exhijKyBHQwsLCoWPHkrQzaguojJfKyH/fjKJxHj780KFDql85PB7v8uXL2dnZCxYscHNz09PTs7S0nDRp0tq1aw8fPnz79m3qrIukPlpbW319ff39/dva2pTaEHpx5AEBJQY0XcoGBFTr0EoBJToJScYQG8LIEdCoqKjJbDZJO6O0gMqaI0aegHqHhsbGxhK4VB49elRaWvr1119Pnz69f//+Xbp0GTBgQHBwcEpKyunTp9Uxqkpx2tvbg4KCWCxWS0uLsttCL448IKDEgKZL2YCAah3aKKDCZwKVXoZJ6hqiKCNHQD3Hjw9PSSZpZ5LvnlYMDd2Cl3vaSFi/YO7GDd6TJsm9MDo6On799deDBw/GxcX5+PiYm5v36NFj+PDhCxcu3LFjR2Vl5evXr0m+FrUKPp8fFhbm7u5O7DhAL448IKDEgKZL2YCAah1aKKDCZz3FbEShzf+WV+0RUDt7+9V7C8jZmZonIalHQP+RZlKWb43ZmTfA2VnyOL99+/b69es7d+6MiIhwd3fX19c3MTFhsVixsbH79+//v//7P2XvMnduoqOjXV1dCb+TDXpx5AEBJQY0XcoGBFTr0D4BVeVVnNo4Aso0MUk8WkLOzo7F2kvROAoKqHDdLHJP2PqiQ2YWFgKB4MWLF+Xl5ampqXPmzHF2du7ataudnd20adMSExOPHz9+7949jV6IWkV8fLyjo+PTp08JlwC9OPKAgBIDmi5lAwKqdWibgMqYSKTEm5C06RlQvR49ksvKyNmZmgVUKeQJqOSiBuQ4aHhKcpeuXa2trbt16+bq6jp37tzMzMwLFy78+eefmr30tJW0tDQbGxsVBR16ceQBASUGNF3KBgRU69AiARVdoRzPXuQJqIgjadOrOA0MDZNKT5GzMzULqKKHVdlnQEk9c0uzOD319W/cuEFg6gyQn59vYWFx+/ZtFcuBXhx5QECJAU2XsgEB1TqoKKAEx84U3Zxqa9HLEdBeZmYbjhSTszPp5qf6m5DU/FgDaesXrD2w38raWrNXWSehqKjIxMTk5s2bqhcFvTjygIAqguQhgqZL2YCAah1aJaCyDUcBASXjbY6kR46Auri6Ls/LJWdn2YHyjhDBA5cY60rKFHV5u5DbCORnSWbGJ8OHa/Yq6wyUlpYymczKykpSSoNeHHlAQBVB+L9A0U+QnzsIbkBAtQ4qCaiORo6ATp46NTR+PSl7Sox1lSZwKo6ARgWq/7lakpYCDV69KmjGDM1eZVpPRUUFk8nkcrlkFQi9OPKAgCqC2L/EBdB0KRzVBXTPnj3379+X/R0ej+fr6/vq1Svcv+VyuXQ6XbQQHo9na2ubn58vrcDi4mJpO7K1tR04cKC0fWG0trayWCwfHx+5H0pWVdoXuFyu3P2SAggo8sgR0A0bN7JmzSRlTzI0UTUBlbq+vTKR9wwvSQLqERCQnJys7uuqM1FVVWVsbFxSUkJimdCLIw8moAABkJ87CG5UF1AOh6NgG5AmlFwu18bG5vDhw8JP5Hokl8vV09M7f/685OdiLotLa2urn5+f5OaYg8oQX+z34laMy+X279//xo0bsnetOiCgyCNHQEtLSx0GDSJjT7JUUiUBJekBUNlLZJG1Fn0fe/tz586p+7rqNNTW1pqamhYWFpJbLPTiyAMjoIoAAqpFIUVAxQYFJYcJ6+rqbGxspHmhpNLxeDwHBwdJQRSFzWaLbYXpY0xMjNgnkmOW0gRU7Du420qrm4zBUXIBAUUeOQL6+vXr7np6286Vq7onmRPVVRDQozNcSbr/LnWJV5l/pUySSk/p9ejx7t07DVxanYD6+norK6ucnBzSS4ZeHHlAQBVB1DuFnyA/dxDcUERAxb4v9xa8cC+YJgrbG51Oj42NFf4RGyW9ePGimC8KBZTL5aanp9va2kr+k0natkKKi4tFlRcEVHciR0AFAsEEb28SHgPNDpQxfCj97rw8ASV1/vs/i8+L7vGfuVOqDn8Gr17lN2WKBq6rTsDDhw/t7OySkpLUUTj04sgDAqoIouop/AT5uYPghpoCWldXx2AwZAuoJGw2W3T4UxIxWxV9NkB0XFNyJFUgEDx48EBsjPbMmTOiI6miv1qREVzCgIAij3wB3b9/v/Pw4SruJipQ1mOaRAVUsUWalKynFEiYZe8waNCRI0fUcSF1MhoaGpydnePi4tRUPvTiyAMCSgxoupQNFQRUUhwxAZVtk2IId4FtK3swEvcWvPBJgLq6uunTp4ttgg3KCou9du3a/fv3xQTU09NTKLi4j6iSAggo8sgX0ObmZoax8frDRcR3cyzWXqbARQVKMTzs3rfST46qFon3KpHy5oC4wm9Nzc1h/Xm5NDU1ubm5RUREqG8X0IsjDwgoMaDpUjYam4QkY26QpIBiE3rWrFkjY7+io6SiY5Z1dXWjRo2SOwtexjOgsbGxWFXFBmJFnwrNzMx89eoVVo6jo6OYdMoWbhUBAUUe+QIqEAjWrF07ZupUwvuICpTjcB8KqPCFp3+BP3QqT2qplhHe3ombNqnjKupMNDc3e3h4hISEdHR0qG8v0IsjDwgoMaDpUjakCKikPio+Aoo78ZzD4fTv3z80NFTSI7GRSBqNZmNjY2Njg90HZ7FYwglJQgEV+1xsp5iAYoop5srCp0KxbTHXFP2xdXV1a9asEQ52YpUX/dWKSDBhQECRRyEBbWhoMGIwNn5/hMg+jsXay13IMxZvIPOvkUhcy8zy0Cr7XPvdAaaxcVNTkzquok5Da2urr6+vv79/W1ubWncEvTjygIASA5ouZYNcQLHHJV1cXETHI9lsto+Pj+wVRnk8nouLi3CoMiEhQUwlsfHIuro60QWeMIQPg4rqqSIznzDy8vKET4viPgMKAtq5o5CACgSCxE2bho4dm1tTrewOErOzSL9LHhWoTfaZW1PtPHz4trQ0dVxCnYb29vagoCAWi6WBpxSgF0ceEFBiQNOlbFQXUNwb6IoLKLZ++4MHD4TyJ7yfzuVyZeigqICK7Uu2/HG5XNxnNHFXkhebe4RVb+nSpdiHIKC6GUUFtKWlpV///otSU5HXWOsStmmTo5PT+/fv1XEJdQ74fH5YWJi7u/vr1681sDvoxZEHBJQY0HQpG1IEVJVnQIUDqMK15evq6szNzbH/kJwMJERBARUbKGUwGHQ6vb6+3s/P7/jx47gLMIkhZqV1dXUbN27E/hsEVDejqIAKBIKLFy+amJltLecir7QWJan0FMPY+MqVK+q4fjoN0dHRrq6ujY2Nmtkd9OLIAwJKDGi6lI2KAor7BKfiI6CiAofdAY+JiRHORpc9VQgzy/r6etyVlWTrr2TJYsOf2DMA2H+LDYKy2WzRaUliAirUcfWtCQoCijxKCKhAIFgVFzdkzJgd1VXI660Vybl+7WM3t/gNG9R0/XQO4uPjHR0dnz59qrE9Qi+OPCCgxICmS9moKKC4C14qLqBi3+RwODk5OaJGK2N1d8K34AUSAir2R9wfJZz8JOqyYgKKKazwxfeyn2ElDAgo8ignoO/fvx8zbtxn4QuQ11srwpo1c4K3d3t7O+lXTqchLS3Nxsbm3r17mtwp9OLIAwJKDGi6lI2KAopre4oLaFRUlOwHMWVMDJJWJgEBxVaSEu5XxoL2YtXDFVDhl0FAO2uUE1CBQPDs2TNbO7svNmxAXnWKZ+bqVfYODi9fviT9suk05OfnW1hY3L59W8P7hV4ceUBAiQFNl7JRUUA5HI6kHeK+2UhSFrlcrpjn4Q49cjgcyedHsRfBi05dkr0vMXBv7osuySRt2FWGgEqCewyv18MAACAASURBVHBUBwQUeZQWUIFA8Ntvv5lZmC9OS0Nee8pm/tebLSwt7969S/o102koKioyMTG5efOm5ncNvTjygIASA5ouZaOKgIrOBxcF991IYhLJ4/HCw8PFSsOVOewxU+Hm2Jio2POaosooOW8dt+aS+xJdN1RsTFQIJr6iAir5CCxutUkEBBR5iAioQCD4+eefTc3NF2/bhvwHUDDzv95sZmFx69Ytcq+WzkRpaSmTyaysrESyd+jFkQcElBjQdCkbVQRU2jJJQgEVHVMUkznh24YwZL88XTh7HduktbX1zp07kjtVZBKSsEpiashms8UWZsI1SOEEKdGDIG2nanobJwgo8hAUUIFAcPPmTXNLyy/i1yP/DZTKrLg4y969a2trSb9aOg0VFRVMJpPL5aKqAPTiyAMCSgxoupQNYQGVHMKUhuRAqZhBSo6PqhtsJXlRP5Z2r1xMlKkACCjyEBdQgUBQX1/ft1+/yQsX5sK8+Bs1O6qu+3zxhb2Dwx9//EH2ldJ5qKqqMjY2LikpQVgH6MWRBwSUGNB0KRvV1wEFNAwIKPKoJKACgeDFixcenp5uXp4ZFReQ/xiE2fbjucGjR7O8vTW2mKU2Ultba2pqWlhYiLYa0IsjDwgoMaDpUjYgoFoHCCjyqCqgAoHg/fv3MStXWlhbx327F/nvQZKV+bvNrKy+XLNG3S8x12rq6+utrKxycnJQVwR6cfQBASUGNF3KBgRU6wABRR4SBBTj5MmTZhYWk8PDt1+9gvxXaSzZVyp9vvjCwsrqzJkzZFwRnZaHDx/a2dklJSWhrohAAL04BQICSgxoupQNCKjWAQKKPKQJqEAgeP78eUBgoE3//it270L+wzSQ6Nwd1v36TQ8OfvHihcrXQmemoaHB2dk5Li4OdUX+Anpx5AEBJQY0XcoGBFTrAAFFHjIFFOPEiRPWNjajPvNLOnUS+c9TUzYdPzbSx8fGzq6srIyUg9aJaWpqcnNzi4iIQF2Rf4BeHHlAQIkBTZeyAQHVOkBAkYd8ARUIBM3NzQmJiQxjY58vvkgt5yL/kSRmy9kz3iFzmCYmScnJb9++JeuIdVaam5s9PDxCQkI6OjpQ1+UfoBdHHhBQYkDTpWxAQLUOEFDkUYuAYjx+/HjpsmUMJtN33tyU02XIf6qKSSo95R0aQmcyl8fEPHv2jNxj1SlpbW319fX19/en2tws6MWRBwSUGNB0KRsQUK0DBBR51CigGA8ePIhevpxhbDw2wH/Nvn3If7Cyya2pXr23YNRnnzGYzNhVqx4/fqyOo9T5aG9vDwoKYrFYLS0tqOsiDvTiyAMCSgxoupQNCKjWAQKKPGoXUIzGxsYtW7f26du3v4vL7LVr0i6cR/7L5WbbufLgVavsnJzs7O23paU1NTWp7/h0Mvh8flhYmLu7++vXr1HXBQfoxZEHBJQY0HQpGxBQrQMEFHk0JKAY7e3tZWVlgdOnGxgZDZ/Amv/15oyLFcgPgVjSL5yfl5gwzMvLwNBwxsyZZ8+epdTzi1pBdHS0q6srZdfkh14ceUBAiQFNl7IBAdU6QECRR6MCKqSxsbGgoGCij09PfX3XUaNmxK7cUFycW1ON6ijkVletP1wUFBMz6NNPe+rr+/j5FRYWwpAnMeLj4x0dHZ8+fYq6IlKBXhx5QECJAU2XsgEB1TpAQJEHjYAKaWpqOnLkSOjcuRZWVkwTk099faevXLm6oCD7SqW6f3lW5U+xe74JWhEzYuJEhomJlbX1vPnzf/jhBx6Pp/nj0GlIS0uzsbG5d+8e6orIAnpx5AEBJQY0XcoGBFTrAAFFHsQCKoTP5//222+7d++eN3++o5NT165dbR0cRvlNmrokIjwlee13B9LO/0h4iDS3pnrbj+fWHti/IClpyuLFn/r62vTv36VrVydn5/kLFnzzzTf19fV8Ph/hz+8c5OfnW1hY3L59G3VF5AC9OPKAgBIDmi5lAwKqdYCAIg9VBFSM169fX7lyJS8vb9myZSxv7z59+3bp0kWvRw9rO7uPP/lkGGv82GkBE2bP9gtf4B8Z+fmyZUErYoJWxHy+bJl/ZOSkBQsmzJ7tERAwnDXe6ZOhvfv27a6n17VbN1s7u4m+vsuio3fu3Hnt2rU3b96g/pWdiqKiIhMTk5s3b6KuiHygF0ceEFBiQNOlbEBAtQ4QUOShqIBK0t7e/ujRo+vXr588ebKgoCAtLS0hIWHlypURS5aEs9lz582bN3/+QjY7YsmSVatWJSQkpKen792799SpU1VVVY8fP4aJRGqltLSUyWRWVlairohCQC+OPCCgxICmS9mAgGodIKDIozUCClCWiooKJpPJ5XJRV0RRoBdHHhBQYkDTpWxIF9DW1lYWi0Wn0+/fv6/4VnV1dQwGIyYmBvePMmCz2QMHDnz16tWDBw9evXol9rc8Hu/MmTMy6oltK1agj4+PtN0VFxfjfs7j8WxtbSVLUwcgoMgDAgqoRFVVlbGxcUlJCeqKKAH04sgDAkoMaLqUjZoEND8/X6mteDyei4uLUBbr6upsbGykuaMQLpdLo9HWrFlz48YN7L8l0dPTO3/+PO4eHRwcxP4K88hRo0ZJs2cul4tbIJfLVda5CQMCijwgoABxamtrTU1NCwsLUVdEOaAXRx4QUGJA06VsKCWgQoHDBBT7IyaFktonZpBcLldyAJLD4UgbzuRyuZIjrIp4pHDMVfgJ9pNFS8M+kTGSqgogoMgDAgoQpL6+3srKKicnB3VFlAZ6ceQBASUGNF3KRmMCmpmZKSptbDYbd8BSEswIW1tbU1JShJtLjl8qLqB5eXnnz5/fs2cPJpqiG7LZbNGa19XVTZ8+XWxzLpfr4+OD/UzRSsbGxooNu168eBF38FVFQECRBwQUIMLDhw/t7OySkpJQV4QI0IsjDwgoMaDpUjYqCqi0G9+4yBgR5PF44eHhwj/imp/ol4XDpcKxRmk1kdwph8Oh0Wjh4eG2traivogNu06aNEmsBLmjuWw2W5HHVckCBBR5QEABpWloaHB2do6Li0NdEYJAL448IKDEgKZL2aguoLj3o8WkDfeBSy6XK/waNqwo/Ku6urpRo0Y9ePBA1EqF5QcEBAjvknM4HD09vf3793///fcKjoByOBxRXxR+R2z4U9rmYgifFsAmTqnptrsoIKDIAwIKKEdTU5Obm1tERATqihAHenHkAQElBjRdygahgAr+nnKOzexJSEgQfkE4C17apB/Rr2H7UmoEVFJAccdccQVUdKeiT39i0gyz4HUhIKCAEjQ3N3t4eISEhGj1uqrQiyMPCCgxoOlSNmgFVCAQcDgcyZFL0UlI0m5wi039wZ1UhD3uKblHMQH19PRcunTp8+fP79y5I/ZNoYBic6FoNJqNjQ02Q19sISehgEpb4IksQECRBwQUUJTW1lZfX19/f/+2tjbUdVEJ6MWRBwSUGNB0KRuEAoopXUxMjOS9b1EBFUiZnM5ms2UMjop+TayGuAJ6584dyZrjjoCKPoFaV1eXkJDAYDBEx1yFT5QePnxYdt2IAQKKPCCggEK0t7cHBQWxWKyWlhbUdVEV6MWRBwSUGNB0KRtUAspms4VOiRWyadMmGbOXeDyer6+vcEccDicyMtLPzw8rU8ac+vz8fDEXxCYh4d6mr6urMzc3F9ZTroCKArfgdScgoIB8+Hx+WFiYu7v769evUdeFBKAXRx4QUGJA06VsNDYLXtpoJSasYn+LyVxmZibukpzYEGZra6tQQKXVDdNHsRvx0iYhCSRu66sioNK+pjogoMgDAgrIJzo62tXVtbGxEXVFyAF6ceQBASUGNF3KRnUBFRvslDYCmpGRIbm58Mtid+Exd8S9iy0sSiigiiwpKiq4MgRU8KGt4j5+ipllfX296Dqg0lDH65FAQJEHBBSQQ3x8vKOj49OnT1FXhDSgF0ceEFBFkDxE0HQpG4RvQhK9Ly+metgfxRYHldyR6Aio2D16gcTSTkJkC6goMgQUbsHrckBAAVmkpaXZ2Njcu3cPdUXIBHpx5AEBVQTh8I/oJ8jPHQQ3qASUw+GIjg6Kqp6omEZFRUm7yS55C15srpKaBFRsgpTo55oRUH0Dg5TTZchbji7HkE7/7bffsNMB/QHwAfn5+RYWFrdv30ZdEZKBXhx5QEAVQewupACaLoWDSkBra2tF/yiqeqJGKM32BHgCKrZrFQUU94dgc+ofPHhga2sre+a++rDt1y+hpAR5y9HZZF+9QqPRnjx5gp0O6A+AfygqKjIxMbl58ybqipAP9OLIgwkoQADk5w6CG4S34IWIDnlKahz2riPJcVDFJyGJIWMWvEDEjMVmxGOLRolO+ceePRVu++DBAw0MfwoEghGjRq3M34285ehskk6d/NdHH7W2tmKnAwQU+IvS0lImk1lZWYm6ImoBenHkgRFQRQAB1aKoSUAVeTc69kohUQWUXNQJA1M9MQ2VJqCSxYohewRUVE8lV5gSW6legKezoqhjElLA55+Hxq9H3nJ0NqsLCmzs+gpPB/QHgEAgEFRUVDCZTC6Xi7oi6gJ6ceQBAVUE0Q5Y+AnycwfBjToEVPRd7XLB3mCEjS/KeJG65Pii7HWOVHwis66ubuPGjcS2VTdpaWmeQYHIW47OJnB5dNCMGcLTAf0BIKiqqjI2Ni4pKUFdETUCvTjygIAqgqh6Cj9Bfu4guCFdQAF1c+vWLStb29yaauSNRzfjMmJEbm6u8HTAxaPr1NbWmpqaFhYWoq6IeoFeHHlAQIkBTZeyAQHVOvh8vlWfPusOfoe88ehgMi5WdOvW7dGjR8LTARePTlNfX29lZZWTk4O6ImoHenHkAQElBjRdygYEVBtZuWrVhFmzkDceHczsNWvGjR8vei7g4tFdHj58aGdnl5SUhLoimgB6ceQBASUGNF3KBgRUG3n06BHdmJl+4Tzy9qNT2X7tqpmV1fHjx0XPBVw8OkpDQ4Ozs3NcXBzqimgI6MWRBwSUGNB0KRsQUC2FvXix34L5yNuPTiU0Pn6Qq2tHR4foiYCLRxdpampyc3OLiIhAXRHNAb048oCAEgOaLmUDAqql3L1714jB2HziBPImpCPJvHzJ3Nr6zJkzYicCLh6do7m52cPDIyQkROzfIp0b6MWRBwSUGNB0KRsQUO0lPT198OjRMB1eMxn3+eeiqy8JgYtHt2htbfX19fX3929ra0NdF40CvTjygIASA5ouZQMCqr10dHSM8vAIXrUKeSvq9FmSkWFqbv706VPJswAXjw7R3t4eFBTEYrFaWlpQ10XTQC+OPCCgxICmS9mAgGo1d+/eZZqYrC4oQN6QOnGSTp00MTM7e/Ys7imAi0dX4PP5YWFh7u7ur1+/Rl0XBEAvjjwgoMSApkvZgIBqO+fOnTO1sNh84jjyttQps+1cuXW/ftu2bZN2/OHi0RWio6NdXV0bGxtRVwQN0IsjDwgoMaDpUjYgoJ2AosOHrWxtk8vKkDenTpbMy5f6DxoUuXQpn8+XdvDh4tEJ4uPjHR0dcR/C0BGgF0ceEFBiQNOlbEBAOwdZ2dm9+/ZNKj2FvEV1mmRUXBg4YsS8sDDZc53h4un8pKWl2djY3Lt3D3VFUAK9OPKAgBIDmi5lAwLaadi1e7dlnz4biouRN6pOkKRTJ20dHSOXLpW70g5FL54XL15cvXq1qKgoNTU1atmy6cHB48aPHzTE1c7e3tTcnM5g6BsY6PXoodejh76BAZ3BMLOwsLO3Hzx0qCeLNWPmzOjly7dt23b48OFr1669fPkS9a9BSX5+voWFxe3bt1FXBDHQiyMPCCgxoOlSNiCgnYnTp0+bWlgszeIgb1danbXfHehlbr75669l3HkXQomLp62t7d///veuXbsWL1kywt2dYWzctWvXPvb2Q8aMGRcYOHnRollrvly4JWV5bm5c4bcbjhRvPnE8uax0y5nTW86cTi4r3Xzi+Ibi4rjCb6Nzd4SnJM/6Mm4ymz3282muo0db29l16drV2MTk09Gjl0RG5ufn//zzz7qzAlFRUZGJicnNmzdRVwQ90IsjDwgoMaDpUjYgoJ2Mf//731Z9+kxZxN5RXYW8dWldcmuqQ9d/ZWza6/vvv1fwgCO7eFpaWioqKuLj493HjOmpr29pY/Opr0/A0sglmRmbjh/bUXWdrIOyo+p64tGSJRkZ/pFLRnp7m/fu3VNff8y4cQkJCZcuXWptbUV1BNRNaWkpk8msrKxEXRFKAL048oCAEgOaLmWjuoC2trayWCwfHx+5H0qDy+XSaLT8/HwCe6+rq2MwGDExMQKBoLa2FvuQw+HILhCrnvALe/bsuX//vuTXpH0uWZSent758+cJ1F8dvHjxYuq0aQNHjPj6JLwnSYlsO1c+jMVydnH59ddfFT/amu4Pnj17lp+f/9nUqfoGBnZOThND5kSkp6eWczV5pLZyzy7aljph9uy+AwYYGhlNDQjYs2dPQ0ODhg+FWqmoqGAymVwuF3VFqAL04sgDAkoMaLqUDSkC6ufnJ6lfYpInAy6XO3DgwFevXim+U+EmdXV1NjY29+/f5/F4tra2Pj4+2H4xJZVd58jISOyPmLDioqBDs9lssT3yeDzJ1zZqDD6fn//NN73MzEK+WpcLQ6EKZGkWx9TCYnlMzNu3b5U61BrqD5qamvLz88d6eekbGo709p6bsHEr9yzyo5Z3oybldFlofPxwFkvfwMBrwoSCggIej6eZY6I+qqqqjI2NS0pKUFeEQkAvjjwgoMSApkvZqE9Axb4jY0CUgIAKBAI2m+3j48Pj8VxcXO7fv8/hcDDZ5fF4Dg4OcusjWmcOhyNZN9zfhf0QabYqCbFhXbL47bffxnp6Dhg69KuDB5G3NMom8WiJm5eXw4ABFy9eJHCQ1dsf8Pn8y5cvB8+aZUinj5gwYVFqalblT8gPGW4yL18KT04e5uVlYGgYEhp69epVRR6hpSC1tbWmpqaFhYWoK0ItoBdHHhBQYkDTpWxIFFAul5uenm5rayvpYdgd6osXL+J6IZfLlT3QKDm+iG0VExODCejZs2c3btyoYGkClQVUVCtlD7gKnwpABZ/P//777/vY2o4L/HzL2TPI2xulknn50qSwMDqDsXnzZsKPMqqrP2htbd27d6/zoEHW/foFr4pNO/8j8uOlYFLLuUHLl1vZ2AwaMmTfvn3v379X0yFSB/X19VZWVjk5OagrQjmgF0ceEFBiQNOlbAgLqLSxwPz8fNExSEVuiMu4Ay4sMy8vD1dehSOgwlvwbDZbVBCxh0Qxv8S+I1Y4nU6PjY3F3a/kk52SAqrIgCtympub4zdsYJqYTAoL23auHHmrQ57MSxcDo6N7mZuHzp376NEjVY4t+f3B27dvMzIzLayshnqMid6Rk1tTjfx4EUhuddXS7KzB7u5W1tbZ2dla8fL0hw8f2tnZJSUloa4IFYFeHHlAQIkBTZeyUdMteA6HI3xGc/r06bJLwB2AlP19SVmk0+n379/H5jOJglXj2rVrotOJROvc2toaFRUlrACPx/P19X316lVra+vx48clf6yYgOIOuNbV1Zmbm1PNSp8+fRq7erWJmZnPF6E6u2R92vkfpy5aRGcyg4KDb926pfpRJbM/aGtr27lzp4WV1UjviV8d6iSPTazZv8/Ny8vK2vqbb75pb28n8XCRS0NDg7Ozc1xcHOqKUBToxZEHBJQY0HQpG3U/AxobG4uZHzYSiftMJPY0J4H9slis9PR0FxcXbAgzPz+fy+WGh4dnZGRg35GmtpK34IVjtNgoqbQhW2ynK1euZDAYQsedMWOGpPU+f/586dKlyj7YqgFevnwZv2GDiamp+6RJsXu+0dLxNQL56uBB1syZDGNm2IIFSs1zlw1p/UF5ebmjk9Ngd/d1B79DfrBIz5f7CgcOH+7s4nLhwgWyjhiJNDU1ubm5RUREoK4IdYFeHHlAQIkBTZeyIVFAMcUUUzHhU6HYSGRmZqakk+E+4ilavqTJCUciRSch+fj4xMbG3rp1Kzw8HPuaXAHF5j9t2rRJVECxAnF3LWaudXV1o0aNwoZLAwIC5K7ZRB1evXqVm5s7cPBgOyenGbErO/F9+czLl0K++sph0CBzS8uNCQmPHz8m90iS0B88efJkenCwla3t0ixOJ/4HQW5NdUR6mmWfPrPmzHn27Jnqx40smpubPTw8QkJC5L72SpeBXhx5QECJAU2XsiFrHVChYmIfYuOIiswBx9VWSUQNVfSxS1FfrKurO3z4sKg1SlNbYZ0xPWWz2TJ2Lfq7pA2dYgUSmMuPFj6fX11dHRYeTmcwhnl5zd+8KfPSReRtkpRwfrq8aFvq6MmTDel0vylTjh49qqbJMCpdPHw+/+DBg73MzCYvXJh9pRL5UdNAsip/8ps/39TcvLi4mKxzoAqtra2+vr7+/v6683onYkAvjjwgoMSApkvZqCig2DOXkpN1cFdWevDgAQE/E670if1R1DgFAgGbzRbuSFg+dt9f2kKkknWOiooS/rdY+WJIc1/RfckugZrweLxDhw4FBAbSmcxPxo2bvXZtclkZ8sZJIOkXzs/fvGnEhAk99PU/HT06Jyfn6dOnaj10xC8eHo8XPGuWnZNTp7znLjtr9u2z6d9/TmjomzdvSDwZytLe3h4UFMRisbRijhRaoBdHHhBQYkDTpWwICyg2ckmn0+vr6/38/I4fP467AJOM0UTFdyQqoKJg46wbN2589eoVtioT9jm2Jqjkhlid9fT0zpw5IxzIFPNFuQIq/FvZ46bYpCilfikVaG5uLikpmTl7Np3JtHV0mBgyJ5KTmX7hPPKGKiOZly8tzc7ynTfXYdCgnvr63pMm7dq1S8W57YpDsD+ora2162/Pmjkz++oV5EcQSbIqfxoX+LmDk9N///tfck+JgvD5/LCwMHd399evXyOpgHYBvTjygIASA5ouZaOOSUhiw5+ic4wUHwQVjkpKDqaKmp+Pj8+mTZuwm/hC58Om3uM+AIpNhxetM/Yc59WrV7HZ+kLFxB1AFT70KXkQFHztk7bQ3t5eU1OzdetWlre3gaGhnZOT1/TpofHx64sOkfiacWLJuX5t/eGieYmJE+fMHjBkSHc9vSFubrGrVpWXl797907DB4rIxXP8+HHjXr3Ck75Gfv0jz9yEjSampmVlZaSfGLlER0e7uro2NjZqftfaCPTiyAMCSgxoupQN6QIq9kdpy2TKHj7EwO6SKzKTXWzYUviIpzQjFN0We45T+CgqnU6/desWNpqrp6cnfF0nhrRV7nGXZ5K9+qkW8f79+59++ik9PX3GrFkOTgN69OzZf+BAD3//z6OjI9LTNhwpVusoHueny+sPF0WkpwWtWDEuKNBx8OBu3bv3MjX19fNLTEw8c+YM2udulb54cvPyTC0t1353APnFT5Gs3lvQy9xsz5496jg90oiPj3d0dFT38xmdCejFkQcElBjQdCkb0gUUW6RTOGYpe4a7IkgTUGxH2Kin5F6EC5HKrrPoFH6xoU1p65vm5+fLXTlfSKdxUFHevHlTWVm5ffv2iCVLWN7edv37d+vWzdjMdICr60hv7/HBwVOXRMxZt27hlpTlublr9u/b+P2RpNJT2348l3npYlblT9uvXsm+eiXjYsW2c+XJZWWbjh/bcKR43cHvluflhicnz4yLm8xmj58Z/Kmv78effGJsZkqj0Yx79Ro5atS8+fNTU1PPnDnz5MkT6rzlUbmLJyUlxdrObvOJE8ivfEoloaTEok+fjMxMNZ0kMdLS0mxsbO7du6eZ3XUOoBdHHhBQYkDTpWzUtA6o6Nx2Amt8ihYu+0VKoi83Eu6Iy+Xq6ek5OjpK27Wod2J33hUUUOGyprj17Ey34JWivb397t275eXle/fuTU1NjV21KnTuXO9Jk4YOH2ZrZ2dhZWXcq5eBoWHXbt3EBP1f//qXvr6+Sa9e1ra2LoMHj/XyCvj888WLFycmJu7atevUqVO1tbUUf0JPiYsnJSWlj709vBEVN0mnTlra2GRyOOo7VRj5+fkWFha3b99W9446GdCLIw8IKDGg6VI2ahJQ0WWJxMZElQJTSWmr3Isu9iS81y8c+8TqgDsZCKvzmTNnhIt3KiKgPB5PuMKoZIG6LKCK09HR8e7duzdv3rS0tLS3t1NnIJMwil48+fn5ljZ9wD5lJOnUSVNLywMHDqjvbBUVFZmYmNy8eVN9u+isQC+OPCCgxICmS9moIqCiz02KSh6bzRazRhkuKKNYGQOouAVKDpcKHwYVflP4rk46nb5nzx6hMuIuRyr2K6S9j14AAqrDKHTxlJeXG5uaJh4tQX7BUzzrDxcxTUwuXbqkjlNVWlrKZDIrKyvVUXinB3px5AEBJQY0XcpG9RFQTMtEBU6ah0m7f42LtDd8YqOeYmqI+6GQ2tpayU/EhjNxR0BFX4PE4/GEb/hUvLZAp0f+xXP37l1TM7MVu3Yiv9q1IkuzOGYWFg8fPiT3PFVUVDCZTC6XS26xugP04sgDAkoMaLqUjeoCCgC6jJyLp62tbYS7e2B0NPJLXYsyZRHbw9OTxBdjVlVVGRsbl5SUkFWgDgK9OPKAgBIDmi5lAwIKAKog5+JJSk52GTkyt7oK+aWuRdlRdd3R1TU9PZ2UM1RbW2tqalpYWEhKaToL9OLIAwJKDGi6lA0IKACogqyL5/fff6czmZuOH0N+nWtdNhQXGzEYqr9MrL6+3srKKicnR8VyAOjFkQcElBjQdCkbEFAAUAVZF8/UgAD/iMXIL3IFExVIs489irwawkyaNy941ixVzs3Dhw/t7OySkpJUKQTAUHDpY0DdoG4I2gfqMwbIAXUDAQBtRerFU1VVZWJmxrl8SSUPOxZr7xqbqLxK0miBUUrv7ugMVxqN5jrjGHr7zLtRk37hvBGT+csvvxA7MQ0NDc7OznFxcUTPLAAAAAAAAEWRKqBTAwKCYpar6mHHYu2JJvV3VwAADClJREFU/rOSyHDmX7sjIK9qydSIxcQGQZuamtzc3CIiIlQ4swAAAAAAABQFX0Dv3r1rYGiYUXGBFAHFVcnEWFca/uDo0RmuNFpgFrE9RgVSaBA0tZyrb2Dw6NEjpU5Jc3Ozh4dHSEgIifPoAQAAAAAAqAO+gCZu2jR2WgAJEqY+Ac0OxB8iPRbrIfn5sVh7RFb6qa9Pamqq4uejtbXV19fX39+/ra2NpFMMAAAAAABALfAF1NHJKTp3B6UFlMjNfQS35iPS0wcNGaLgyWhvbw8KCmKxWC0tLeSdYgAAAAAAAGqBI6D37t3raWCw/dpVMgwsy0OdAqroc6LZgTQazSNb0/aZd6OGc/lSt+7dnzx5IvdM8Pn8sLAwd3f3169fq+FEAwAAAAAAUAUcAS0sLBw6dixJBqbrApp3o8Z5+PBDhw7JPRPR0dGurq6NjY1qOMsAAAAAAAAUAkdAo6KiJrPZuiGgWR40mvCvogJF79eT9syod2hobGys7NMQHx/v6Oj49OlT9ZxlAAAAAAAACoEjoJ7jx4enJJMooETQsIDG4j9RSsrK9nM3bvCeNEnGOUhLS7Oxsbl3757azjIAAAAAAACFwBFQO3v71XsLyBFQNU9CIktAJYY8hZ+TMA4aszNvgLOztBOQn59vYWFx+/ZtdZ5lAAAAAAAACoEjoEwTk8SjJSQKKO7DlxQTUAnR/HuWveqDoOuLDplZWOAe/aKiIhMTk5s3b6r5LAMAAAAAAFAIHAHV69EjuaxMKwRUKWQJKM7uZPyVctl07KiBkZHkcS4tLWUymZWVleo/ywAAAIBWwmazY2JixD4sLi5GUhkAIBEcATUwNEwqPaUVAqroxHZ5I6B4w5zYm+VJENCNP3zPMDYWO8gVFRVMJpPL5WrkLAMAAADUgsPh0On0+/fvY39ks9nSRk/09PTOnz8vui2Xy6XRaPn5+TLKZ7PZPj4+avwBAKAaOALay8xsw5FicgRU+vpHqr8JiYwHNDUhoGsP7LeythY9wlVVVcbGxiUlJZo6ywAAAADlYLPZAwcOfPXqleiHHA4H+zAqKkrMO8W+hvlrXV0dg8HANdeNGzeKFQ4A1AFHQF1cXZfn5ZIooESQp32Jsa5kvNlIEwK6JDPjk+HDhYe3trbW1NS0sLBQg2cZAAAAoBxcLhd3kJLD4cgd4Kyrq7OxsREOoGKfjBo1CjPO1tZWFosluwQAQAuOgE6eOjU0fj0pApoY6yptnFLFEdCoQJqUzSknoMGrVwXNmIEd2/r6eisrq5ycHM2eZQAAAIC6YL4oY0xGcqBUEjEB9fPzkzGACgDIwRHQDRs3smbNJEVAZWiiagIqdX17CgqoR0BAcnKyQCB4+PChnZ1dUlKSxs8yAAAAQF3EfFFsZJTNZisylgkCCmgXOAJaWlrqMGgQGQIqSyVVElByHgDVkID2sbc/d+5cQ0ODs7NzXFyc5s8xAAAAQEHq6urMzc3Pnz9PQEB5PJ6tra3oBHmhgF68ePH8+fOyHyEFAOTgCOjr16+76+ltO1euqt7JnKiugoAeneFKyv13TQhoUukpvR49nj596ubmFhERofkTDAAAAFAKzB2xe+vYDHe5t+CFAiq6LZ1OP3PmDPbAqBh0On3SpEnwDChAZXAEVCAQTPD2JuEx0OxAGfOEpN+dlyegpA1/akJAg1ev8vHz8/DwCAkJ6ejo0PDZBQAAACiLcCIRsRFQFxcXaZOQpG0FANQBX0D379/vPHy4inoXFSjrMU2iAqrYIk2UEdD+Li5Dhw719/dva2vT8KkFAAAAqIxaBZTD4WA36FtbW48fP67eXwIAyoMvoM3NzQxj4/WHi4i717FYe5nLJEUF0vDHR7FXHCn95CgVBXT13gI9PT0vL6+WlhYNn1cAAACA4ogKqIK34IXIFVDhH+vq6g4fPqy5XwUAioEvoAKBYM3atWOmTiXsXlGBcl5T9KGACt/J/hf4Q6fypJZSya2pNu3du4+NzevXrzV5RgEAAACtQK0joMKlQPPy8mA2EkBBpApoQ0ODEYOx8fsjRPTrWKy93IU8Y/EGMv96wzuuZWZ5aI995t2oGe7r26VLlz/++EOTpxMAAADQFtQqoNgnDAZD8k2eAEAFpAqoQCBI3LRp6NixuTXVyrpXYnYWeXfJ/xbWQG2yz88WLuzeo8eGjRs1dR4BAAAALUO2gIq+Y1NSQCXfliQpoFhRIKAANZEloC0tLf3691+Umorc57QrQStiDBiMfvb279+/19iJBAAAALQI7EXwDx48cHFxqa+vlzZPiMvlYu98F/2ERqNhE4zYbDbuyzwBgPrIElCBQHDx4kUTM7Ot5VzkVqctCY1fb8hkGtHpV65c0cwpBAAAALQIbC1PoThif1RwnFJy/XnMR2VszuPxHBwcYBAUoBpyBFQgEKyKixsyZsyO6irkbkf9hKck69Ppds7O8Rs2aODkAQAAANrItWvXRAc1BQq8Dl5sHFQM0QXqldoQAFAhX0Dfv38/Zty4z8IXINc7imdpdlZPI6NhEydM8PZub2/XwMkDAAAAAADQRuQLqEAgePbsma2d3RcbNiCXPMpm5e7dPY2MPGfMsHdwePnypbpPGwAAAAAAgPaikIAKBILffvvNzMJ8cVoactWjYNbs26dPp7PmzLawtLx79646zxcAAAAAAIDWo6iACgSCn3/+2dTcfPG2bciFj1LZUFxsyGSODQoys7C4deuW+k4VAAAAAABA50AJARUIBDdv3jS3tPwifj1y7aNINh0/xjA1HTZxomXv3rW1tWo6SQAAAAAAAJ0J5QRUIBDU19f37ddv8sKFuTo/Lz7ldFkvKyvHTz6xd3CANx4BAAAAAAAoiNICKhAIXrx44eHp6eblmVFxAbkFosq2H8+Z29qaWVuzvL0bGxtJPzEAAAAAAACdFSICKhAI3r9/H7NypYW1ddy3e5G7oOaTcbHC3Na2p77+l2vWtLW1kXtKAAAAAAAAOjcEBRTj5MmTZhYWk8PDt1+9glwKNZa08z8yzc179Ox5+vRpsk4DAAAAAACA7qCSgAoEgufPnwcEBtr0779i9y7kaqiBROfuMDE3792799OnT0k5AQAAAAAAALqGqgKKceLECWsbm1Gf+SWdOoncEdWUTcePjfTxsbGzKysr6+joIOW4AQAAAAAA6CDkCKhAIGhubk5ITGQYG/t88UVqORe5L5KYLWfPeIfMYZqYJCUnv337lqwjBgAAAAAAoJuQJqAYjx8/XrpsGYPJ9J03N+V0GXJ3VDFJpae8Q0PoTObymJhnz56Re6wAAAAAAAB0E5IFFOPBgwfRy5czjI3HBviv2bcPuUcqm9ya6tV7C0Z99hmDyYxdterx48fqOEoAAAAAAAC6iVoEFKOxsXHL1q19+vbt7+Iye+2atAvnkZul3Gw7Vx68apWdk5Odvf22tLSmpib1HR8AAAAAAADdRI0CitHe3l5WVhY4fbqBkdHwCaz5X2/OuFiBXDTFkn7h/LzEhGFeXgaGhjNmzjx79ixMMwIAAAAAAFATahdQIY2NjQUFBRN9fHrq67uOGjUjduWG4uLcmmpU0plbXbX+cFFQTMygTz/tqa/v4+dXWFgIQ54AAAAAAADqRnMCKqSpqenIkSOhc+daWFkxTUw+9fWdvnLl6oKC7CuV6pbOrMqfYvd8E7QiZsTEiQwTEytr63nz5//www88Hk/zxwEAAAAAAEA3QSCgQvh8/m+//bZ79+558+c7Ojl17drV1sFhlN+kqUsiwlOS1353IO38j4SHSHNrqrf9eG7tgf0LkpKmLF78qa+vTf/+Xbp2dXJ2nr9gwTfffFNfX8/n8xH+fAAAAAAAAN0EpYCK8fr16ytXruTl5S1btozl7d2nb98uXbro9ehhbWf38SefDGONHzstYMLs2X7hC/wjIz9ftixoRUzQipjPly3zj4yctGDBhNmzPQIChrPGO30ytHffvt319Lp262ZrZzfR13dZdPTOnTuvXbv25s0b1L8SAAAAAABA16GQgErS3t7+6NGj69evnzx5sqCgIC0tLSEhYeXKlRFLloSz2XPnzZs3f/5CNjtiyZJVq1YlJCSkp6fv3bv31KlTVVVVjx8/holEAAAAAAAAFITSAgoAAAAAAAB0PkBAAQAAAAAAAI3y/8EIjHpNrQ8EAAAAAElFTkSuQmCC"></p><p> 数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中, 这些数据库连接的数量是由最小数据库连接数来设定的.无论这些数据库连接是否被使用,连接池都将一直保证至少拥有这么多的连接数量.连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数,当应用程序向连接池请求的连接数超过最大连接数量时,这些请求将被加入到等待队列中.</p><p>​       数据库连接池的最小连接数和最大连接数的设置要考虑到以下几个因素:</p><ol><li>最小连接数:是连接池一直保持的数据库连接,所以如果应用程序对数据库连接的使用量不大,将会有大量的数据库连接资源被浪费.</li><li>最大连接数:是连接池能申请的最大连接数,如果数据库连接请求超过次数,后面的数据库连接请求将被加入到等待队列中,这会影响以后的数据库操作</li><li>如果最小连接数与最大连接数相差很大:那么最先连接请求将会获利,之后超过最小连接数量的连接请求等价于建立一个新的数据库连接.不过,这些大于最小连接数的数据库连接在使用完不会马上被释放,他将被放到连接池中等待重复使用或是空间超时后被释放.</li></ol><h3 id="2-2、编写数据库连接池"><a href="#2-2、编写数据库连接池" class="headerlink" title="2.2、编写数据库连接池"></a>2.2、编写数据库连接池</h3><p>　　<strong>编写连接池需实现java.sql.DataSource接口。</strong>DataSource接口中定义了两个重载的getConnection方法：</p><ul><li>Connection getConnection()</li><li>Connection getConnection(String username, String password)</li></ul><p>　　实现DataSource接口，并实现连接池功能的步骤：</p><ol><li><p>在DataSource构造函数中批量创建与数据库的连接，并把创建的连接加入LinkedList对象中。</p></li><li><p>实现getConnection方法，让getConnection方法每次调用时，从LinkedList中取一个Connection返回给用户。</p></li><li><p>当用户使用完Connection，调用Connection.close()方法时，Collection对象应保证将自己返回到LinkedList中,而不要把conn还给数据库。<strong>Collection保证将自己返回到LinkedList中是此处编程的难点</strong>。</p><p>数据库连接池核心代码</p></li></ol><p>　　使用动态代理技术构建连接池中的connection</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">proxyConn = (Connection) Proxy.newProxyInstance(<span class="keyword">this</span>.getClass()</span><br><span class="line">            .getClassLoader(), conn.getClass().getInterfaces(),</span><br><span class="line">            <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">        <span class="comment">//此处为内部类，当close方法被调用时将conn还回池中,其它方法直接执行</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method,</span></span></span><br><span class="line"><span class="function"><span class="params">                      Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (method.getName().equals(<span class="string">&quot;close&quot;</span>)) &#123;</span><br><span class="line">                    pool.addLast(conn);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> method.invoke(conn, args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>数据库连接池编写范例：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">package</span> me.gacl.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: JdbcPool</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:编写数据库连接池</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-9-30 下午11:07:23</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcPool</span> <span class="keyword">implements</span> <span class="title">DataSource</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Field</span>: listConnections</span></span><br><span class="line"><span class="comment">    *         使用LinkedList集合来存放数据库链接，</span></span><br><span class="line"><span class="comment">    *        由于要频繁读写List集合，所以这里使用LinkedList存储数据库连接比较合适</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LinkedList&lt;Connection&gt; listConnections = <span class="keyword">new</span> LinkedList&lt;Connection&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="comment">//在静态代码块中加载db.properties数据库配置文件</span></span><br><span class="line">        InputStream in = JdbcPool.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            prop.load(in);</span><br><span class="line">            String driver = prop.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            String url = prop.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            String username = prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            String password = prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="comment">//数据库连接池的初始化连接数大小</span></span><br><span class="line">            <span class="keyword">int</span> jdbcPoolInitSize =Integer.parseInt(prop.getProperty(<span class="string">&quot;jdbcPoolInitSize&quot;</span>));</span><br><span class="line">            <span class="comment">//加载数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jdbcPoolInitSize; i++) &#123;</span><br><span class="line">                Connection conn = DriverManager.getConnection(url, username, password);</span><br><span class="line">                System.out.println(<span class="string">&quot;获取到了链接&quot;</span> + conn);</span><br><span class="line">                <span class="comment">//将获取到的数据库连接加入到listConnections集合中，listConnections集合此时就是一个存放了数据库连接的连接池</span></span><br><span class="line">                listConnections.add(conn);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PrintWriter <span class="title">getLogWriter</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLogWriter</span><span class="params">(PrintWriter out)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLoginTimeout</span><span class="params">(<span class="keyword">int</span> seconds)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLoginTimeout</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">unwrap</span><span class="params">(Class&lt;T&gt; iface)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isWrapperFor</span><span class="params">(Class&lt;?&gt; iface)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 获取数据库连接</span></span><br><span class="line"><span class="comment">     * @see javax.sql.DataSource#getConnection()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//如果数据库连接池中的连接对象的个数大于0</span></span><br><span class="line">        <span class="keyword">if</span> (listConnections.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//从listConnections集合中获取一个数据库连接</span></span><br><span class="line">            <span class="keyword">final</span> Connection conn = listConnections.removeFirst();</span><br><span class="line">            System.out.println(<span class="string">&quot;listConnections数据库连接池大小是&quot;</span> + listConnections.size());</span><br><span class="line">            <span class="comment">//返回Connection对象的代理对象</span></span><br><span class="line">            <span class="keyword">return</span> (Connection) Proxy.newProxyInstance(JdbcPool.class.getClassLoader(), conn.getClass().getInterfaces(), <span class="keyword">new</span> InvocationHandler()&#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span></span><br><span class="line"><span class="function">                        <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!method.getName().equals(<span class="string">&quot;close&quot;</span>))&#123;</span><br><span class="line">                        <span class="keyword">return</span> method.invoke(conn, args);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">//如果调用的是Connection对象的close方法，就把conn还给数据库连接池</span></span><br><span class="line">                        listConnections.add(conn);</span><br><span class="line">                        System.out.println(conn + <span class="string">&quot;被还给listConnections数据库连接池了！！&quot;</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;listConnections数据库连接池大小为&quot;</span> + listConnections.size());</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;对不起，数据库忙&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">(String username, String password)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p> db.properties配置文件如下：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcStudy</span></span><br><span class="line">username=root</span><br><span class="line">password=XDP</span><br><span class="line"></span><br><span class="line">jdbcPoolInitSize=<span class="number">10</span></span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>写一个JdbcUtil测试数据库连接池</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> me.gacl.demo.JdbcPool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Field</span>: pool</span></span><br><span class="line"><span class="comment">    *          数据库连接池</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JdbcPool pool = <span class="keyword">new</span> JdbcPool();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: getConnection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 从数据库连接池中获取数据库连接对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Connection数据库连接对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pool.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: release</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 释放资源，</span></span><br><span class="line"><span class="comment">    * 释放的资源包括Connection数据库连接对象，负责执行SQL命令的Statement对象，存储查询结果的ResultSet对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn,Statement st,ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭存储查询结果的ResultSet对象</span></span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭负责执行SQL命令的Statement对象</span></span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭Connection数据库连接对象</span></span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><h2 id="三、开源数据库连接池"><a href="#三、开源数据库连接池" class="headerlink" title="三、开源数据库连接池"></a>三、开源数据库连接池</h2><p>　　现在很多WEB服务器(Weblogic, WebSphere, Tomcat)都提供了DataSoruce的实现，即连接池的实现。<strong>通常我们把DataSource的实现，按其英文含义称之为数据源，数据源中都包含了数据库连接池的实现。</strong><br>　　也有一些开源组织提供了数据源的独立实现：</p><ul><li>Apache-DBCP 数据库连接池</li><li>C3P0 数据库连接池</li><li>Tomcat-dbcp连接池</li><li>druid连接池</li></ul><p>　　在使用了数据库连接池之后，在项目的实际开发中就不需要编写连接数据库的代码了，直接从数据源获得数据库的连接。</p><h3 id="3-1、DBCP数据源"><a href="#3-1、DBCP数据源" class="headerlink" title="3.1、DBCP数据源"></a>3.1、DBCP数据源</h3><p>　　DBCP 是 Apache 软件基金组织下的开源连接池实现，要使用DBCP数据源，需要应用程序应在系统中增加如下两个 jar 文件：</p><ul><li>Commons-dbcp.jar：连接池的实现</li><li>Commons-pool.jar：连接池实现的依赖库</li></ul><p>　　Tomcat 的连接池正是采用该连接池来实现的。该数据库连接池既可以与应用服务器整合使用，也可由应用程序独立使用。</p><h3 id="3-2、在应用程序中加入dbcp连接池"><a href="#3-2、在应用程序中加入dbcp连接池" class="headerlink" title="3.2、在应用程序中加入dbcp连接池"></a>3.2、在应用程序中加入dbcp连接池</h3><p>　　<strong>1.导入相关jar包</strong><br>   　　   commons-dbcp-1.2.2.jar、commons-pool.jar<br>　　<strong>2、在类目录下加入dbcp的配置文件：dbcpconfig.properties</strong></p><p>　　　　<strong>dbcpconfig.properties</strong>的配置信息如下：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#连接设置</span><br><span class="line">driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy</span></span><br><span class="line">username=root</span><br><span class="line">password=XDP</span><br><span class="line"></span><br><span class="line">#&lt;!-- 初始化连接 --&gt;</span><br><span class="line">initialSize=<span class="number">10</span></span><br><span class="line"></span><br><span class="line">#最大连接数量</span><br><span class="line">maxActive=<span class="number">50</span></span><br><span class="line"></span><br><span class="line">#&lt;!-- 最大空闲连接 --&gt;</span><br><span class="line">maxIdle=<span class="number">20</span></span><br><span class="line"></span><br><span class="line">#&lt;!-- 最小空闲连接 --&gt;</span><br><span class="line">minIdle=<span class="number">5</span></span><br><span class="line"></span><br><span class="line">#&lt;!-- 超时等待时间以毫秒为单位 6000毫秒/1000等于60秒 --&gt;</span><br><span class="line">maxWait=<span class="number">60000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#JDBC驱动建立连接时附带的连接属性属性的格式必须为这样：[属性名=property;]</span><br><span class="line">#注意：&quot;user&quot; 与 &quot;password&quot; 两个属性会被明确地传递，因此这里不需要包含他们。</span><br><span class="line">connectionProperties=useUnicode=<span class="keyword">true</span>;characterEncoding=UTF8</span><br><span class="line"></span><br><span class="line">#指定由连接池所创建的连接的自动提交（auto-commit）状态。</span><br><span class="line">defaultAutoCommit=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">#driver default 指定由连接池所创建的连接的只读（read-only）状态。</span><br><span class="line">#如果没有设置该值，则“setReadOnly”方法将不被调用。（某些驱动并不支持只读模式，如：Informix）</span><br><span class="line">defaultReadOnly=</span><br><span class="line"></span><br><span class="line">#driver default 指定由连接池所创建的连接的事务级别（TransactionIsolation）。</span><br><span class="line">#可用值为下列之一：（详情可见javadoc。）NONE,READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE</span><br><span class="line">defaultTransactionIsolation=READ_UNCOMMITTED</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　如下图所示：</p><p>　　<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARUAAAE9CAIAAACqc2HuAAAgAElEQVR4nO2db3QUVZ73641nXz554Tkzvtgzrn9YznCeQWJgH3tdmDc74Mw56z5zxhEYmeAzWqu7s6vwPLOCwiSByMTojDVIDI6SxBnFgIkbQdpEZZqgYBTEgBKz9AkJBsmf7g4hgaRCYO7zoqqr7v+qrv5TVZ3f59wD3bfuv+rcb99b1XW/V0EAAGSOruuDg4NKbgvt749VNDYua4xVNDb298dyWzgABIfc66e/P7YsFiuPxQ4dOtTU9NqyxhhICChWcqCfk60brYAQqojFyhtjjbHGWH9FLNZYXhErr2jMTWOLlaiqRLS4360APJCtfrpbNpJvNyxrjB06dCgWK69oXFbRuGxZxbJl5Y1MvrgWUTDUqOcW2ETVnBZXuHoz0g/2yWHVWW0gC4qq/FbFtQiVlJOSW6agIm6ZcwCP+qmreqau6pm6qpqrIw1XRxqm+l9Mnnx2sHPzf+9bV9HYWNEYq2isqChfVl5Rvqy8oqKigikgrkWwv5bozyxKzyGq2iXEtUjBFMSt17G1TBlu+11UtVLalcS1SLoAuzlGd1ZVTkviWiQSsbLwUwrLZCK5Zc4VZPqJxWI1NTXcQ8889dunf9+FLh1mQ39/bFljbFljzBh5lpVzbyEwPcyhyzn1yLgW8eVPx683f/rh1U3URlXNaYmRjamTTMktU1yRoMziR6ifgwcPLliwYN68eaKc69e9gBL7uaG/P1ZR0bisPFZZWSm4ecD+XbEYeopiT5DMvw9nDkN/H6bB8uLjBOe18Sqq2nMTO2+6W/BjBNMeRYlocX5dVMOM4rBvd+RGVFHV+njImRyWj/c9FdHinOKZGQFbpqgiYZnFD18/hnhWrlwp0c8v/uUl9M1r8vCLf3lJkFuin7impv8I5MzB7oacBFaHxEuNqgrZI9M1iPSjkP2buZjgTJ549VLfBWxdhOrsmrAayL7KwUpLfZRS/RAtkOiHW6agIkmZxQ9HP5Z4Vq1aJdHPT8sbUP+LqP/F8od3rX1o19qHGtY+ZLzYVf7QrrUP7yo3Xj+8a+1Du5jcXP3YHz4zwNDp+VfRVjz/78mbh9DjTzot2xfIAYO6gibqddQPVbj91nrlIB9af+70g7/J1fgjLbP4ofWDi0eunx+ufh2decYIP17zx7fPXReF//3An5jcjH6Ir1NsYsB2bn4CRJalqFGufpgLhoz04zyhYga4zPRjNlF+/URPGYnSJNc/1D1P6stHcvrpQ5xIeZnFD62fmpqaeRjbtm0T5Vz2k73o9GZ0evM//rR5T4++57S+p2dmT4/xrxX0f7yvmZebvf+GTVyIG0NM5+YmIG654d/ivCsK7EKDX0W6TdYXq2ZO7/EvfUm9lH7Yuqi7dlgr41okoqrCmyHkNRL7YYqGXAaH8YdfpqQiUVyR4/33n8X/1IpO/uque1sbjkw0HJnYdXSi4ehEw5GJhqMTu45MNBydaDg6cdc/twhyk99bzJ/cjMbuqZqx6etsYQL6G5B3/wBLjJXAvSVIZuTNGrn1Yq3l1kXeidCIfsdeeNnQc0jii0TcLs6oQH8LsSk5ZQoiOWXOFbzr53v3tC384dvbDyS3H0hujya2H0hsjya3H0hsjyaMmIU/bMt5c+cCc7AXhpesnj+Y/4P9kpDbhs4VJPe459aVRTjIy/PXgDcMuYBIQgToBwC8A/oBAO+AfgDAO6AfAPAO6AcAvAP6AQDvgH4AwDuB04+6tNTvJgCAW3zTz4fPLrECQmjL8pvYUPhWAUBG+KOf1l/ehr8d/Lxjy/Kbrk69N3x0x3NrfmC8AP0AwScv+pEYJyCEPnx6iT68Ux/eOd6rDXfXDBzacLH/6JblNw0f3XHqzUp1aanxAvQDBJ/c68fROOGDp0v18S48bLz3+1uW3/Tcmh+oS0uN8NyaH2xZfhP3WkiwNFXuWwAAeSHH+nFjnPBBRak+3IaHa1P91vxNXVoqm7/x/WQUrpsAAOSbXOrHpXHCOxWl+kCTFVrXL5QEJrcxttDWA7J11wCQN3KmH/fGCa3rF+i9mhFa1y/UB3Zyw3B3DU8/BsaYw/OfAf0ABSRn+nFvnPD6L2/Te2v03prW9QuNF2wQiieuabQZh6NvAQDkCx/uXzeU/7XevaF1/UK9u5IbpCMP6zbtwrcAAPKDD/p5/sc3ta5fqHdv4Aa5eAAgUPjz+2mD+reSUODGAIBnAvf8GwCECNAPAHgH9AMA3gH9AIB3QD8A4B3QDwB4B/QDAN4B/QCAd0Kvn3V3f8vvJrjBcTtGIJSETz+xLYs6n/yfVnjhvu/gb2NbFvndQC6gn+IkEPo5cuTI5cuXXSbufGJBPNbwzSevfvPJqyfefLbh8ZX4284nFuS1qV5h9SPfo5GLhyxAfgmEfnbv3t3c3JxMJt0kjv3qu9988urMpfdTJ3d/1V7f8PhK/G3sV9/Nd2s9AfopToKin9HR0Zdffvn8+fOOid9f991vPnk1dXJ36uTurzp2Gvqx3r6/TqSfqKpEtKi5tMHcDZf2SJAbJ1hHyR0X+VuBU0VR+sE2xhJ7NpAFs1kA/wmKfhBCyWRS07QzZ87IE7/77/NPvPnsV+31X3Xs/Lhpy8Z7v4+/ffff5wvyYQYj+D5V9nd6lNIE+U0v2vE3rqnpTHYS1oNBPv7wqhY4PcD4EygCpB+E0NDQUFVV1djYmCjluru/9cJ932l4fKURNt77fSNYMS/c9x3BHTm8j/Je03slkgIQ7ziP2BGIs4Zcqh9+1U5OD0AACJB+UqmUm/HnrV/cjt8w2Hjv9/G3b/3idkE+F/qRzItE+iGHoohn/QirFjs9AAEgKPpJJBIur3/2rL1Vcv9gz9pbBfmc9EPM0FBUtbwV2KOYaOht4O35G+nBkNaPXSA1f+NU7eT0APhPUPTj/v7b6w/cIrl/8PoDtwjyOeqHdyfA7u74Ufz+ARarqhFSYlhJrH7SSbBxjLoJwTg9kFmAABAI/WT0+88fV92C3zBoeHwl/vaPq0T6ySngkgUghAKin4w4srW0adXfWOGF+76Dvz2yNU/bn8S1CFicAjTh0w9F4Z5/w6ZYIB7AIPT6AQAfAf0AgHdAPwDgHdAPAHgH9AMA3gH9AIB3QD8A4J3Q66do/Q+IR+/gqbeAEj79zBX/A9BPGAifforF/4AL9wlr0E9wCZZ+YrFYTU2NQ5oi8T/gAvoJGQHSj7EDsWTjYYOi8D8glWK+Jh0OiIXloJ+AEhT9WNt3O+qnSPwPOPohY0E/YSAQ+rHEI9/4HhWT/wHopyjwXz+4eBz1g4rG/wD0UxT4r5+ampp5GNu2bZOnLxL/A3ohN+gnlPivn0wpNv8DMqPtcAD6CQPh0w/4HwDBIXz6Af8DIDiETz8U4H8A+Ejo9QMAPgL6AQDvgH4AwDvFrJ9r1/9y8FRqx7vnqlv6IAQq7Hj33MFTqWvX/+J3H8mWYtbPO8dHD5xInh+bndARhECF82OzB04k3zk+6ncfyZZi1k9t29nUleupKZS8AiFYITWFUleu17ad9buPZEsx66e6pe+SjhKXzbCv9g5usBJAKGS4pKPqlj6/+0i2FLl+xqfRyKQZ/qtm0czVa1T4ct+j+2rvsNJkHN5SlSVa1yQamYxvXaKsectrOWw4qZUpka0n0chkdI2ivpGrYnPcNu9hfBr0E2yqW/ouTqPhCTO0/KaU1c+Zg5tO73t0X+0dVjJ+aFGVJVqXLD6+ZYmypkVaiBmia5TIls+xmM+1Mrbwz7UyM1l0jaLudi7WbAMGkWv3g9gRurroGuvQg1G2KPq87LZ5DxdBP74j3ziouqVvbApdmDBD87Y7p2euGeHjc6n5/+fFf9M+GOh6/szBTV/ue2TP03daKTmhRVWWaEdk8fGqJcoDLeIS7BB9QIlUfY7FfK6VyQqJPqCorzkXy2RvURXFfvvag0pZTdx6rTwY5Sa70KKW1cQvTMSrlqQb+blWRjU4F2FsCvTjN/KN66pb+lJX0PlxM7y2tezK9OyV6dkpfdbSzxV9dkqfvaLPvl5dZqXkhDdVZYn2kSw+XrlE+dmb4hLsEP2ZEqk8gcWc0O6UFRL9maL+yblYXvYT2p3pvH9aq9z5m7gR/9FvIsraaLpwbrPjlUvsRuJ5cxVSV0A/frN79+7R0VHRxqnVLX2Jy+jcRTM0blk8OTU7OTU7MWXrZ/LK7OSV2cmp2aYti62UnLBXVRZrnebb6Gp8lmTGxysWK6v32odW77Wy25F3boufuxhdrUQqTmCFn9DuXKx14sUu1jpPaHcqapOZ3XiBOrfZCyyaOO002sCPaVpr1E4mI86Lymg3EsubbrDVgBPancQpxysW24k7t0XM8ulkKHEZ9OM3xsbdyWSSu3F3dUvfyCTqHzPDKxWLxydnxyevjl+29TN++er45OzFy7OvVCyxUnLCXlVZrB0aQ/1j0VWKsmqvGd9YrqTj479erCiK2milN19HVylK6bY4Vlp0lRL59WdY4Z9ppVghZuGfaaV2CWojESMKWHYmprGc0Pwh+rzYotKN/EwrZRtstiT+63KsKCPSLtOqnZNsZBL04zeGfhBCQ0NDVVVVY2Nj+NHqlr7hSdSXNEP95r9LTlxNXbqanJix9JO8dDU1MZOauPripr+zUnJCs6os1v6Mv6Dik/HNi5VVzVaW9FsqfRL1JaOrlMjmT7GYT7VStpBPtVJF3WWmt14oCpWXCFQbjBgz/a6fK6XVcbvZRpmc5tlFWY+b0zXabUN9SfTnantUTLczsvlTh2TDoB/fMfSTSqVE48+FS+hMwgzbn/pfIxdnRi7OjIzb+hkZnxkdnxkZn3nhqbuslGx4vzqi/Dx6JoHONKvKYu1965D9Nv7UYuX+ZitL+i2VnpNSUMgn2iJFfSWBziSi95sv7OyKEnnqE7adkpLRKz9XFlXH04ei95slWC/YorjxZNs+0RYp6WLtBpt1vV8dwQ7RyS5cAv34ze7duxOJhOT65/w46h0xw++euOvCmP7xudS/Nh3516Yjhn4upGYujOlDKf23T9xlpWRC/MkyZdHWeO8I6h2J3q8o979hxytlWof1ek3UyNKxNaIo6h/o9NEnt8bJo2aCdOHxJ8vSibu0RXYJ6h9GUG+X9iRWb7pMup12/BuqokSe7DLf/mGNVYtxyGxAx9YInqz3DXXR1njvSPzJMixyxGpS5MkurG1vqOnTJ0+qS1tUpt5vlcBLdn4c9OM3jvffBsdRz4gZav7z7wcT+sfnUkvXv2GI53xCH0zog0l9MDHzzH/+vZUSDy8Zv4ysidqRb9jWiBu3qkqZ1j6CekbiG8uUn66xDqkvWem7tEVM5Ev2Dy7Koq1xq/D2rRFFUZQyrb1LW2Smj/40ndHOhbfHDvGNZdhFjtkwTo1E84gzskqObyyLbOwiy+/SFimRjV3GC6MEu8ZFa9RFdrHxjWV4IznJBkE/vuP4+8/XY+jLITM8/X/vPjeinxvV3z11/t1T58+N6udG9YFR/dyIfm50uvr/3W2lhOAQjmp3KGp9doV8PQb6CTbVLX0DY+jUBTNUrbu7f3j67LDePzzdb/473T88fXZ4+uzw9JZ1d1spQxKiP1EIfvJagap+pyqilGnvZFfIAOgn4FS39PWPoZMXzFDx+D889djSTY8v3fT40qewfzc9tnTTY0srHv8HKyUEYXjNmOmpdVkX1Q/6CTi/2z/QO3ztiwuo+xsIwQpfXEC9w9d+t3/A7z6SLcWsn3dPJNqOpeKj12U/jELwI8RHr7cdSx34DNbPBZiZ2ev7j43Wtp31fbkyBCrUtp3df2x0Zva6330kW4pZPwCQbwKpH0WBUMyhiAiqfoBipbj+uKAfoLAU1x83ZPpRFOWGv/oreVDc/IWiKrPrlY+Y1tqqhm2XEgrimTcY9JN3pPr5H482y0Po9ENuPwf6CROgH//1E7bNhLL7xEA/eUeqHzc4VwH68Q7oxyZ8+nGRW5SG3GKb0I99COsZdqS1Zam7lFRd+MZbEU1T8ZRYOjVK9EzrCL5dpIWoMVi8mYXbkozOBS8zYi0iJTeZ5Gbk7IgJ+sk/TvqxBhnuyCPQD7U9sEJuQ2rt9qtiO5ZSndZ9SjKGTMle6vDGQsF2xc6NIeOFLZGcC9H5rU1bGe1RL3kZuQMV6Cfv5GP8EW1AT/+R0285kyrXKekY7sb2cS0i1o+wtU6NoeKFLRGfCwk28PKqxhvMyWjEkk0H/eSdfIw/PuuH2e3eN/0Y792ftaQucYOZ7LaKQD95Jy/XP6IZUVyLUAfYGVRUS38Nu0vJzJoYpTjoR9Rae9YnagzV10UtcXMuKKpyyxTN35iMcU2LMllAP3knL9c/5PWtRvZZlXchbV/8Yt3IVUpETmjI+weu9IOXibWW1A+vMew1h/j+gcO5UPckEJ2Eun/AyYjVbUWBfvJOvu6/ZYl/d7qd52+Z4t+5gH7yjuvnd9jxxxqF8kAh+1xciwjuoeWmMaCf3BAy/fhKYfscNh3iXZmDfgIB6AcoLMX1xwX9AIWluP64uq4fO3YsYKfk+wJJCHkNRYSu6y0tLUV1SgBQMHRdr6+vB/0AgBdAPwDgHdAPAHgnWPoZ720faCoZ7233uyH+QT2h47MxA+BAsPQz0FQy3jV/oKnEIR31HKTC/tBIxvP7IXf1WIFhROKHfvr2Lq/bvLxu71GEEEJHOzYvr9u8vG7z8o7TWRd9urZuR/MYQggNHt9hFlu3eXnd5lrcOr5vL1bXaHOz3RimNEmrTtdyC0cIYSf16HGJZzCnfCujWab5WZknlVP9yHfjcUN3ZclAU4nzECRYfYA9A+zY+agHnN131Nx2a0lpBdVPutMc7bA70ODxHWxHzBBSP3bXJHuqoAE4g8d3LK/bUduxQ6AfuyJ+3ubOwXS93JPilm9/An17MUljdeVSP/Ld4CyUh9uXbHprYeX++Vs7vv3skZLnP72h7gvl4XZkzd8OzR/YKR2CRKt3oqpb/dhPP2dKUetntLlZ2As9IdKPURf2pd5xGhniMTs6H6YQO148sGAViUtwOorrM3/6GR0dFe1GavGt5Zu4wTjaXVkyfujmXs2DfnAzpYzGHza7XQX5VD62FoBxF8CcDyJa1MyGL+p09RibHeHa4UC44sBIo6q888Jx+PrH+5/9+mjH5kePd5pTJmGnl+gHi+nbu7zjNDZKCBH079Hm5h3Nx/cu5zfmdC0+G+zbK6lFqB8iV/70gxBKJpPc3bBxvle3VhSMKVyvJp3C8a9/8H5BXv/ILn/IxWaYCAQr+PEorlsA1rONKriL0DilUREuHQ7imppugsTegDovEuLyw7yKwCY5Qv2kpzSjzc2i6wrX+sEvKsQI+jc+G2QaM9b5qHf9GBdj1HdKXvWDEBoaGqqqqhobE34aN1Su2NC+iQ03VK4Y723vrikZbr+5t0Y8BDmt2HQ/+TF1Zia1yrW6GbuCHytZuOg/gvVo7mteaXSEuxXa+FkIxcqeFwGhH4SQ0ecIeQjGH7ObiqdPDvoxcxkN6NvrKCGxfrCMtEJyNP4UYv6GEEqlUo7jzw2VK0QBIdRdWTLcfnN3pVA/3AXE7Jpn1xcPxPc27cqULk1hb4vxF/0XVj/0UnT+YCc4LxNWPwghey6XhX6w736ma2K9MN2AweM7BHfekFWRcP4m04991Ov1D36++dNPIpFwvP7pXL9MHowpXPcG0RROeJ2DHXBx/4DrshHXIhFVjdhvmRX8IsVabgG51I+zwwHZduFkkTovEuL+gd190z0GmxGNdT5al4F+8Esa9v6bnYW6ABNLiCzEbhhWkRVJHjVzyW7T8cpPt2Ss89FCjD9u7r8dfKTszKvrROHgI2Xjve1dG0qG277dtYEegphrFs6XtHXhwv1hiEzKuT6iVnvyr99l1+4Z64doJjWGODscYD4Jqioaf9jzwsHHH3PmRk76rcjmvbUuxx/yNyVE//5DdmJyADzawbkWon4+sgZGq17mZyv8aPoyRnDzWlA+8WlgGfOkH5e//0RX3vZl7Y+M8AX54ovaH0VX3oYQEumnAMicmMKM5LwE8zdAQJ7045K2e240wtv33Ni2Ih3uubFthRmDEOraUGKEQjYMoeJ9aEZ6XsxYUfTYg1WmT1rk8fmDsIPfbS4mivW8ggDoBwC8A/oBAO+AfgDAO6AfAPAO6AcAvAP6AQDvgH4AwDvB0k/x+x/kY3k2uXAJKCTB0k/m/ge5guuX4MZEQW6jUBB7A9CPf4Td/yBXcHuziy7u0JJALM8G8kfY/Q9yhTf9OLoogH6KnLD7H7ArCIjZDDldkszDPOknrkUimpaevvlkb0Ati2P9GJxOHciC8PsfsKv/Oau7uSYBOFy/BCcThahKps18eVxO7A2INeyMHwOMc/kk7P4HCHG+X3HvHGqls+sLfWGksBm8SWVB7A1I5xKctB+DYHQEsibk/gf81f9mV7avTgTJuEU6RZLH860fN/YGuH6EMsEtHICcEXL/A/7qf2a5vygZWaan+wd45/bJ3oCYvzF+DBwLByBnFIP/gTlXsVf/I0YmomSITYBdezubKDiZaBfE3gB/x5ukBsHnu1gB/wMA8A74HwCAd4L1/A4AhAvQDwB4B/QDAN4B/QCAd0A/AOAd0A8AeAf0AwDeAf0AgHeCpZ98+h8E5ukvWMJdRARLP47+B9TiHarbSHuR+84qeMTUI2CBUMwESz/O/gfEI/r0M/nSZd2uO2tci0QiuRurYAl3MZMX/cRisZqaGtHRrPwPiC/aqKqoqoo/eyz5DnbbWY1S+BvtegH0U8zkXj8HDx5csGDBvHnzRAmy8z8gV8mpUcGiMtYGQOQ3wJbP7KLtxqtAuoQBLBCKlRzrxxDPypUrJfpB2fkf4KstzfX99N7sPBsAod8AiZ2V9Shx8ioQOyuABUKxkkv9WOJZtWqVXD9Z+R+YgrF0Y74gej4JxwxB0KcE+/269Cpwt4gVLBCKiJzpBxePG/1k4X+Qnrdhq7Pp94L9tp36OtP7Muvo+dEPWCAEmJzpp6amZh7Gtm3bRCmz9j8w7xsQ993o94wNgNBvgCyXiLTey7wKHMoEC4Sixof719n4H5jgxmu898ILbo7fAFkqGZ2OkXoVSMsEC4Tixgf9hND/QPS1DV/ncx3wP3AD6AfgE6znD4IK6AfgA/oBAO+AfgDAO6AfAPAO6AcAvFNA/SgKBAjFFwqon1xwov2x9+rndbx4e3vd7e9uv/3A72/d//yt+357y9vP3XKi/bGcVAEAbgmdft6rn/eX6xf/cvXC9en/vj7x6bVUx/XhPdfOvzQ78Nx79bKH7gAg94ROP8T488JtB35/6zvP37Lvt7e8/dzfzInxh7M7ZeAp4uXlodPP2fOpjXXtZ4cmL12ZuXRl5urVq5eu6GeHJjfWtZ89n8pJFYEm3/phniW0ka/CkxzNi34Sh+srMVp76AQ9rZX1hxNMPkF0JmBFBEE/LjcOQgh91N3/3OsffZ2YSl6anpzSJ6f06ZmZyamZxKXprxNTz73+0Ufd/TlrcDDJo36MlRL8DcYQiqrsokS3R/NB4nA9JpqeVlZDicP1HKXkQD9YyUHQj8uN6xBCr+4/1vxBz2ByamxSn9ZnpvWZ69euTuszYxP6+eRU8wc9r+4/ltNGB4+8z9/cFOtoNVGA2RqpH14EX0C50I9dckD0Mzo66rhxKkKo+pX3/3xi8OvEVOKSfnlKv2yPP/q5xNQ3icvVr7wvzs0aA+AL5vCH/SNa1JyNqFE7FbFAT5ZAWrJGJ3ZhTkAu7CP0w12aQJ2pS+8HuzlO+pHbqzBHHZZXMH4PruDKpbK1x/jf6N1sGlI/2BywtQfhORFdDDVNTJccEP0ghJLJpOPG3f9R25a4pB9470TJHat3NBwYuzhZcsfq6ZlrVswR4fwtqtJ/HTLGXv2D/SGNLkevuHGVQFiynZi3rlzQcmIlD76rOMc+gT1Td94PWGLHBkn6OecovuTJ0cvBLW70g1BPKy0gWz+Jw61prfS0mtLAj9anRcUms0oOjn4QQkNDQ1VVVWNjY6KUD1buSU3OlNyx+mLiYskdqyenr1n/GjGHjvfxc7J/VTqGuwaa+9opgauScd8T6ovXGih4pQnnb+m30v7LtIcZOJ30I1efGw8VBy8Hgp5W83ufnXK5n66Rqcj5GzO0pA+TxXNGINTTWtmKFKW5uTkQ+kmlUo7jT571404eXvTDZqQuEsTmBHnUDxfZUS/iwYt04+XgFkY/7u632dkSh+srmcEmnd7WoiCZkRIpyscff+y/fhKJhJvrn/+obRu+OLWj4YAxW7t4ZbbkjtXjV2atGPn8zZrBaGlXGp55adb6cVVyWj/O5gR4y+kOyLNPYM/UjU+DBTtY2CZ0PGG6OMobgIVeDm5h77+lZUJcxVDDEnYME1bicD1xaVPf2lqPzQC5yRBCicNIUQYHB/3Xj8v7b9WvvH/weG9yYiY1OZOavJoOM6nJmeTEzDeJi7L7B/a8geMLQF/lZ6UfNyXb44/zdT1+O0Ajxx+u+wJ9pm58GohsdjpLA7Q3kSUMF0cpyxQjhcjLwS3k7z/0EEO9rz+cSM8FeZOy+tZWTIyUTETJEEKJQOjH/e8/r+4/1t7Z+fXQ2a/ODZ0aSJ4aSJ7sHzvZn+w5NzQ41N/e2Vn896+94PeTCn7Xz7sNlyOCoB/3fNTdv3NPx7WJz6cunhpP9owne8YSveOpnqnxU9cmPt+5p6P4fz/1gs/9NwCP77C34XJEuPSDEPqou/+J7fsq6/dX7dxXtXNf1c63q3buq6zf/8T2fSAeAf7px5zXheMxPS+ETj8AECBAPwDgHdAPAHgH9AMA3gH9AIB3Qqcf8D8AAkTo9AP+B0CACJ1+5rr/gXe4y3KK1JagEJjPX4dMP3Pd/8A7hdFPMGwJiMZwFzXwoolcklOwCgmGfsD/oCDIF43mimDYEmCNqa+nqzP1IdWPi6d9AqMf8M/aGoIAAAq5SURBVD8oCH7ohxdRCFsCvO7DVAMSh+vrDx+WVBdC/YD/gfg5MVc+B+zOrbza54wtAVk1oU3jjRlFLnXAInn6sRbDGlmCpB8E/gdC3PkcuIoX6afobAmoqu0EWIxRIKatdFby+sdelkqNWAHTDwL/A7tl+BDlcp22U7x8/CkuWwJ8JRwxgnFkg0eRGhM3z6ooQPoB/wPBPMm9fhxrF+in6GwJ8AXXeP7DrGrS+saShlA/4H8g7q8ynwNBLaJ4Sy1FbktQzxGWMWZi7/ArKrxk/vUPMUc8HLTrH/A/EC8zk7gXeLp/MAdsCdICIpRAvCHHE/Lihvr9h5ApOaUMhn7A/0BK3laPFq8tQaYle795HgT9uGdO+h/kq5sH4PGdvNkSZFRyNjoOl37QXPQ/yIN+it6WwDXkVVHmhE4/ABAgQD8A4B3QDwB4B/QDAN4pqH4gQCi6UCj95AjwPwCCg67rIdMP+B8AwSF8+gmk/0FhlqYVlgD8vJo5gt/KXJ5L5qccPv0E0v8A9OMWYqMgTvHU2g22SdJHBeemfsLvfxBA/fj9cJsAdh0JBtZ/8cfl7azpKGFHL/RZB0I/4fc/AP24RaYfosls+0WPuguLKABB0U/+/Q/kpgXkF1r6r8ObL5A7FVJLa/j1UjMS99YIfL8EXplUpGZXwSySUOg+KnA4kLkjEB8XuQmqfH6Ft4NJQn6KrETSFUmmWQKvCGJpPfcjdTxl/scVFP2ggvgfyEwLsD+X+XfkfJcRswpsnZpIPxmaLlDWCMJIouumW09VhLdeVKnU4UDujmC3AlvFyjFREMKKgPq8eUOM1anlW7gyXhGUdwX9kbo7Zd7HFSD9oLz6H2SwKs4SA+NMQP1J2aWd1OWvR9MF6Xpvcvwza+L0Naw3CitleyzWeAd3BHyMlifjf9dzPh2H8YdaJYt/FyoOXhHU+MNfQu/FECJA+smv/4GLRaPGx8l8SJgzgbN+xHXyY+TWCAL9uOiKTvrh9jYSB3cEs1S7DwqSiZEJhFMEmVxwAZQj/bg2hAiKfgrif+C06DquRSKqGrHfMs4E+LwE/4xl87fMTRccRYXPIe2vebIi6fzNTTd3cEdgPi5RMuoDYdtEXj/RmidWmxPL4zPwipDrJwtDiKDoJ//+By70w1xGMNehzFW64/0DL6YLcv0ILtOZiswI5/sHgg+M/N41z9l2R0CMTETJSNgJHS4M9uPCjmLnLb1oY70iMtUP/1yCqp/g+B9If53IMnXYCOgN8HyS+SkHQj/uya//QaYfX1HrR3KTuFjxcMoh0w/Km/8Bfk87gzxF2cOic88dwesph08/ABAcQD8A4B3QDwB4B/QDAN4B/QCAd0A/AOAd0A8AeCdY+hnvbR9oKhnvbc9XBXPwR0EgnwRLPwNNJeNd8weaShzS8R+7RAhxnqklcK8f/OlQABCQS/24f4xNRHdlyUBTifMQ5Fk/RDrJr81xLRKJwFAFOJFL/bh8jFp5uH3JprcWVu6fv7Xj288eKXn+0xvqvlAebkfW/O3Q/IGd0iEoz/oxyijWp3OAHJJj/bixMfjW8k3cYBztriwZP3Rzr5a9fngr3U3VYA/zsxKRLlQDAJwc6we5szH4Xt1aUTCmcL2adArnVj/MSnfpWkJExoN+AEdyrx/kwsbghsoVG9o3seGGyhXjve3dNSXD7Tf31oiHIPfjD2ellEw/1KJN0A8gJ/f6cWNjcEPlClFACHVXlgy339xdKdQP1sslq+Q96Adf4Oiw0BEAUM7148bGoHP9MnkwpnDdG0RTOOImNLmGGF9/7WX8wYHxB3DEh/tvBx8pO/PqOlE4+EjZeG9714aS4bZvd22ghyDuMid8ab/AoYXVD2UPwAH0Azjiw+8/0ZW3fVn7IyN8Qb74ovZH0ZW3IYRE+gGAQOHD8wdt99xohLfvubFtRTrcc2PbCjMGIdS1ocQIhWwYAGRKsJ7fAYBwAfoBAO+AfgDAO6AfAPAO6AcAvAP6AQDvgH4AwDugHwDwTrD0kwf/A/MxnUA8BeryiSDufjhZAsYP+SFY+nHhf0A+Iu3UJYK1BwdfP9wN70A/4SBY+nHhf0B0KcdtaoP1DKhL/bg6BAQCH/STnf8B2aXE+75Zx0E/QP7wQT/Z+R/gXYqalOBbK8aJ9/Re0MR2gWo0am9tz0nD81EQpuQuo5BPOLnzN3yREruLJNNszo6OZBpm2Kaaw90SEnDEn/lbFv4H+PUP3hmp1T6shwE3gVGaaBNSe89g2keB3ihVlpe7uI86I4l+sH2BVYUbj+Kayu6rS6YRbgBKbU8NZIY/+snC/4DoCPw9eckhiLN/rp2AmQ1y0rjbRJ6bV7jfPf+MmAjqECF7qr8zAwiZhvw24J0jf3AE5PimH6/+B5TDB7PdOYnEaIQpTZTGtX7YvIXRD26VKsqL60coE0ODoKIM8EE/2fkfEN0CuwCiRiNWVtwEVAflphHtLG/LWEt/hfPyElMoL/M3Ij+v2VgDhWmEw7apR42Z5wFu8EE/2fgfcL+SiQk/eQlMfNsKL7Kp4qk0XP3gKYkOTl+D49fqmnD8IaZT1BiiMrcPuB+CkVtVHcYf8QfFNB1wxgf9gP8BUDSA/wEAeCdYzx8AQLgA/QCAd0A/AOAd0A8AeAf0AwDeAf0AgHdAPwDgHdAPAHgnWPrJg/9B5sDyacA1wdJPxv4HRPcmt9JiE/M7MNgPAN4Jln4y9T+gj0QiEUZRTmYJsHwa8E7I/Q/IAxEtThoiuDFLAP0A3gm1/wEVz65sk5gliAsE+wHANaH2P+Au9KHX98uvfsB+AMiGEPsf4OC9klqOyVl1KS8Q7AcA14Ta/8CC6ZWcTixSENgPAN4Jt/+BCS0N673ILEFaINgPAK4Jpf8BNf1hR5Z0jNgsQVQg2A8AmQD+BwDgHfA/AADvBOv5AwAIF6AfAPAO6AcAvAP6AQDvgH4AwDugHwDwDugHALwD+gEA78wd/cCjZUDu8U0/Hz67xAruc1GPulGPhEpdBiQL7+jlBADgklzq58iRI5cvX3aTsvWXt0neyuBsiGW/l+5WL9OPk0eCG2B8m4vkUj+7d+9ubm5OJpPyZB8+vUQf3qkP7xzv1Ya7awYObehte/zDp5fgQZiZGGKiqqKqKv5gs2T4cKUfgUeCG0A/c5Ec62d0dPTll18+f/68JNkHT5fq412S8MHTpeLcWDeNqooaFaxYYz0G5GYG9mtMgviyPHp9ERmPxcAMcC6RY/0ghJLJpKZpZ86cESX7oKJUH26ThIbymyW14Es5zTU+1pa+trAYjwEHMwO270dVamqISYUXD+PPXCT3+kEIDQ0NVVVVjY2NcZO9U1GqDzRZoXX9Qkng5DcFY+nGfEE4iHA8BpwXY1NLQ8mRJJ1MFA/6mZPkXj+pVEo+/rSuX6D3akZoXb9QH9jJDcPdNXz9WPM2bGd6+r3zOm1uv8cUxNEJ64+FxYN+5iQ51k8ikXC8/nn9l7fpvTV6b03r+oXGCzaIxYNQ+r4BMYmi3zMeA+7MDLALIGae5hAP+pmL+HD/raH8r/XuDa3rF+rdldwgFw9C5gwN66z0e6GhoUszA3sMcnn/AKsT7h/MJXz4/ef5H9/Uun6h3r2BG5zFAwCBwZ/nDxrUv5WEAjcGADwzd55/A4DcA/oBAO8Y+vn/tAH8bS1DRt8AAAAASUVORK5CYII=" alt="img"></p><p>　　<strong>3、在获取数据库连接的工具类(如jdbcUtils)的静态代码块中创建池</strong></p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: JdbcUtils_DBCP</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 数据库连接工具类</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-4 下午6:04:36</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils_DBCP</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在java中，编写数据库连接池需实现java.sql.DataSource接口，每一种数据库连接池都是DataSource接口的实现</span></span><br><span class="line"><span class="comment">     * DBCP连接池就是java.sql.DataSource接口的一个具体实现</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//在静态代码块中创建数据库连接池</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//加载dbcpconfig.properties配置文件</span></span><br><span class="line">            InputStream in = JdbcUtils_DBCP.class.getClassLoader().getResourceAsStream(<span class="string">&quot;dbcpconfig.properties&quot;</span>);</span><br><span class="line">            Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">            prop.load(in);</span><br><span class="line">            <span class="comment">//创建数据源</span></span><br><span class="line">            ds = BasicDataSourceFactory.createDataSource(prop);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: getConnection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 从数据源中获取数据库连接</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Connection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="comment">//从数据源中获取数据库连接</span></span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: release</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 释放资源，</span></span><br><span class="line"><span class="comment">    * 释放的资源包括Connection数据库连接对象，负责执行SQL命令的Statement对象，存储查询结果的ResultSet对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn,Statement st,ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭存储查询结果的ResultSet对象</span></span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭负责执行SQL命令的Statement对象</span></span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//将Connection连接对象还给数据库连接池</span></span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　测试DBCP数据源</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.JdbcUtils_DBCP;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dbcpDataSourceTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = JdbcUtils_DBCP.getConnection();</span><br><span class="line">            String sql = <span class="string">&quot;insert into test1(name) values(?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>, <span class="string">&quot;gacl&quot;</span>);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line">            <span class="comment">//获取数据库自动生成的主键</span></span><br><span class="line">            rs = st.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getInt(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//释放资源</span></span><br><span class="line">            JdbcUtils_DBCP.release(conn, st, rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><h3 id="3-3、C3P0数据源"><a href="#3-3、C3P0数据源" class="headerlink" title="3.3、C3P0数据源"></a>3.3、C3P0数据源</h3><p>　　C3P0是一个开源的JDBC连接池，它实现了数据源和JNDI绑定，支持JDBC3规范和JDBC2的标准扩展。目前使用它的开源项目有**<em>Hibernate，Spring**</em>等。C3P0数据源在项目开发中使用得比较多。</p><p>　　c3p0与dbcp区别</p><ol><li>dbcp没有自动回收空闲连接的功能</li><li>c3p0有自动回收空闲连接功能</li></ol><h3 id="3-4、在应用程序中加入C3P0连接池"><a href="#3-4、在应用程序中加入C3P0连接池" class="headerlink" title="3.4、在应用程序中加入C3P0连接池"></a>3.4、在应用程序中加入C3P0连接池</h3><p>　　<strong>1.导入相关jar包</strong><br>    　　　c3p0-0.9.2-pre1.jar、mchange-commons-0.2.jar，如果操作的是Oracle数据库，那么还需要导入c3p0-oracle-thin-extras-0.9.2-pre1.jar<br>　　<strong>2、在类目录下加入C3P0的配置文件：c3p0-config.xml</strong></p><p>　　　　<strong>c3p0-config.xml</strong>的配置信息如下：</p><p><strong>c3p0-config.xml只能放到src目录下面</strong></p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    C3P0的缺省(默认)配置，</span><br><span class="line">    如果在代码中“ComboPooledDataSource ds = <span class="keyword">new</span> ComboPooledDataSource();”这样写就表示使用的是C3P0的缺省(默认)配置信息来创建数据源</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;<span class="keyword">default</span>-config&gt;</span><br><span class="line">        &lt;property name=&quot;driverClass&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;jdbcUrl&quot;</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/lemon?serverTimezone=UTC&lt;/property&gt;</span></span><br><span class="line">        &lt;property name=&quot;user&quot;&gt;root&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;password&quot;&gt;107462&lt;/property&gt;</span><br><span class="line">        s</span><br><span class="line">        &lt;property name=&quot;acquireIncrement&quot;&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;initialPoolSize&quot;&gt;10&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;minPoolSize&quot;&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;maxPoolSize&quot;&gt;20&lt;/property&gt;</span><br><span class="line">    &lt;/default-config&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">    C3P0的命名配置，</span><br><span class="line">    如果在代码中“ComboPooledDataSource ds = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;MySQL&quot;</span>);”这样写就表示使用的是name是MySQL的配置信息来创建数据源</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;named-config name=<span class="string">&quot;MySQL&quot;</span>&gt;</span><br><span class="line">        &lt;property name=&quot;driverClass&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;jdbcUrl&quot;</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/lemon?serverTimezone=UTC&lt;/property&gt;</span></span><br><span class="line">        &lt;property name=&quot;user&quot;&gt;root&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;password&quot;&gt;107462&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property name=&quot;acquireIncrement&quot;&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;initialPoolSize&quot;&gt;10&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;minPoolSize&quot;&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;maxPoolSize&quot;&gt;20&lt;/property&gt;</span><br><span class="line">    &lt;/named-config&gt;</span><br><span class="line"></span><br><span class="line">&lt;/c3p0-config&gt;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　如下图所示：</p><p>　　<strong><img src="data:image/png;base64,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" alt="img"></strong></p><p>　　<strong>3、在获取数据库连接的工具类(如jdbcUtils)的静态代码块中创建池</strong></p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: JdbcUtils_C3P0</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 数据库连接工具类</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-4 下午6:04:36</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils_C3P0</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ComboPooledDataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//在静态代码块中创建数据库连接池</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//通过代码创建C3P0数据库连接池</span></span><br><span class="line">            <span class="comment">/*ds = new ComboPooledDataSource();</span></span><br><span class="line"><span class="comment">            ds.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line"><span class="comment">            ds.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/jdbcstudy&quot;);</span></span><br><span class="line"><span class="comment">            ds.setUser(&quot;root&quot;);</span></span><br><span class="line"><span class="comment">            ds.setPassword(&quot;XDP&quot;);</span></span><br><span class="line"><span class="comment">            ds.setInitialPoolSize(10);</span></span><br><span class="line"><span class="comment">            ds.setMinPoolSize(5);</span></span><br><span class="line"><span class="comment">            ds.setMaxPoolSize(20);*/</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//通过读取C3P0的xml配置文件创建数据源，C3P0的xml配置文件c3p0-config.xml必须放在src目录下</span></span><br><span class="line">            <span class="comment">//ds = new ComboPooledDataSource();//使用C3P0的默认配置来创建数据源</span></span><br><span class="line">            ds = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;MySQL&quot;</span>);<span class="comment">//使用C3P0的命名配置来创建数据源</span></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: getConnection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 从数据源中获取数据库连接</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Connection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="comment">//从数据源中获取数据库连接</span></span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: release</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 释放资源，</span></span><br><span class="line"><span class="comment">    * 释放的资源包括Connection数据库连接对象，负责执行SQL命令的Statement对象，存储查询结果的ResultSet对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn,Statement st,ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭存储查询结果的ResultSet对象</span></span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭负责执行SQL命令的Statement对象</span></span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//将Connection连接对象还给数据库连接池</span></span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　测试C3P0数据源</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.JdbcUtils_C3P0;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.JdbcUtils_DBCP;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">c3p0DataSourceTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = JdbcUtils_C3P0.getConnection();</span><br><span class="line">            String sql = <span class="string">&quot;insert into test1(name) values(?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>, <span class="string">&quot;gacl&quot;</span>);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line">            <span class="comment">//获取数据库自动生成的主键</span></span><br><span class="line">            rs = st.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getInt(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//释放资源</span></span><br><span class="line">            JdbcUtils_C3P0.release(conn, st, rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5、Tomcat-dbcp"><a href="#3-5、Tomcat-dbcp" class="headerlink" title="3.5、Tomcat-dbcp"></a>3.5、Tomcat-dbcp</h3><p><strong>1.类似JNDI，首先在content.xml中配置数据源</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Resource name=<span class="string">&quot;tomcatdbcp&quot;</span> auth=<span class="string">&quot;Container&quot;</span> type=<span class="string">&quot;javax.sql.DataSource&quot;</span><span class="comment">//数据源名字 验证数据源的容器 类型</span></span><br><span class="line">  maxActive=<span class="string">&quot;100&quot;</span> maxIdle=<span class="string">&quot;30&quot;</span> maxWait=<span class="string">&quot;10000&quot;</span> username=<span class="string">&quot;root&quot;</span><span class="comment">//最大连接数据库连接对象的数量100 最大空闲数是30（例如50个空闲等待N时间后变成maxWait状态）</span></span><br><span class="line">  <span class="comment">/*数据库用户名*/</span>password=<span class="string">&quot;107462&quot;</span> driverClassName=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span> <span class="comment">//数据库密码 驱动程序名称（mysql提供）</span></span><br><span class="line">  url=<span class="string">&quot;jdbc:mysql://localhost:3306/lemon?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span><span class="comment">//创建连接的路径/&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2.指定数据源</strong></p><p>web项目上web.xml进行注册：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resource-ref</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">res-ref-name</span>&gt;</span> jdbc/news <span class="tag">&lt;/<span class="name">res-ref-name</span>&gt;</span>//名字与数据源名字一致</span><br><span class="line">   <span class="tag">&lt;<span class="name">res-type</span>&gt;</span> javax.sql.DataSource <span class="tag">&lt;/<span class="name">res-type</span>&gt;</span>//类型:DateSource</span><br><span class="line">   <span class="tag">&lt;<span class="name">res-auth</span>&gt;</span> Container <span class="tag">&lt;/<span class="name">res-auth</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">resource-ref</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3.使用</strong><br>java应用程序处引用数据源</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Context context = <span class="keyword">new</span> InitialContext();</span><br><span class="line">         DataSource ds = (DataSource) context.lookup(<span class="string">&quot;java:comp/env/tomcatdbcp&quot;</span>);</span><br><span class="line">         Connection connection = ds.getConnection();</span><br></pre></td></tr></table></figure><p><strong>注意点：</strong></p><p>在用JNDI连接数据库时用main函数测试时总报错，</p><p>InitialContext 是要在应用服务器的上下文里才有的。</p><p>所以测试JNDI需要到tomcat服务器中测试。</p><h3 id="3-6、Druid"><a href="#3-6、Druid" class="headerlink" title="3.6、Druid"></a>3.6、Druid</h3><p><strong>1.导入依赖</strong></p><p><strong>2.准备配置文件db.properties</strong></p><p><strong>3.获取数据源</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">InputStream is = DB.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line"><span class="comment">//Properties 类表示了一个持久的属性集。Properties 可保存在流中或从流中加载。属性列表中每个键</span></span><br><span class="line">及其对应值都是一个字符串。</span><br><span class="line">Properties pp = <span class="keyword">new</span> Properties();</span><br><span class="line">pp.load(is);</span><br><span class="line"><span class="comment">//ds是一个`protected`的`DataSource类型`的成员变量</span></span><br><span class="line"><span class="comment">//数据源工厂.创建数据源</span></span><br><span class="line">ds = DruidDataSourceFactory.createDataSource(pp);</span><br></pre></td></tr></table></figure><h2 id="四、配置Tomcat数据源"><a href="#四、配置Tomcat数据源" class="headerlink" title="四、配置Tomcat数据源"></a>四、配置Tomcat数据源</h2><p>　　在实际开发中，我们有时候还会使用服务器提供给我们的数据库连接池，比如我们希望Tomcat服务器在启动的时候可以帮我们创建一个数据库连接池，那么我们在应用程序中就不需要手动去创建数据库连接池，直接使用Tomcat服务器创建好的数据库连接池即可。要想让Tomcat服务器在启动的时候帮我们创建一个数据库连接池，那么需要简单配置一下Tomcat服务器。</p><h3 id="4-1、JNDI技术简介"><a href="#4-1、JNDI技术简介" class="headerlink" title="4.1、JNDI技术简介"></a>4.1、JNDI技术简介</h3><p>　　<strong>JNDI(Java Naming and Directory Interface)，Java命名和目录接口</strong>，它对应于J2SE中的javax.naming包，<br>　　<strong>这 套API的主要作用在于：它可以把Java对象放在一个容器中（JNDI容器），并为容器中的java对象取一个名称，以后程序想获得Java对象，只需 通过名称检索即可。其核心API为Context，它代表JNDI容器，其lookup方法为检索容器中对应名称的对象。</strong></p><p>　　Tomcat服务器创建的数据源是以JNDI资源的形式发布的，所以说在Tomat服务器中配置一个数据源实际上就是在配置一个JNDI资源，通过查看Tomcat文档，我们知道使用如下的方式配置tomcat服务器的数据源：</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context&gt;</span><br><span class="line">  &lt;Resource name=<span class="string">&quot;jdbc/datasource&quot;</span> auth=<span class="string">&quot;Container&quot;</span></span><br><span class="line">            type=<span class="string">&quot;javax.sql.DataSource&quot;</span> username=<span class="string">&quot;root&quot;</span> password=<span class="string">&quot;XDP&quot;</span></span><br><span class="line">            driverClassName=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span><br><span class="line">            url=<span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy&quot;</span></span><br><span class="line">            maxActive=<span class="string">&quot;8&quot;</span> maxIdle=<span class="string">&quot;4&quot;</span>/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　服务器创建好数据源之后，我们的应用程序又该怎么样得到这个数据源呢，Tomcat服务器创建好数据源之后是以JNDI的形式绑定到一个JNDI容器中的，我们可以把JNDI想象成一个大大的容器，我们可以往这个容器中存放一些对象，一些资源，JNDI容器中存放的对象和资源都会有一个独一无二的名称，应用程序想从JNDI容器中获取资源时，只需要告诉JNDI容器要获取的资源的名称，JNDI根据名称去找到对应的资源后返回给应用程序。我们平时做javaEE开发时，服务器会为我们的应用程序创建很多资源，比如request对象，response对象，服务器创建的这些资源有两种方式提供给我们的应用程序使用：第一种是通过方法参数的形式传递进来，比如我们在Servlet中写的doPost和doGet方法中使用到的request对象和response对象就是服务器以参数的形式传递给我们的。第二种就是JNDI的方式，服务器把创建好的资源绑定到JNDI容器中去，应用程序想要使用资源时，就直接从JNDI容器中获取相应的资源即可。</p><p>　　对于上面的name=”jdbc/datasource”数据源资源，在应用程序中可以用如下的代码去获取</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Context initCtx = <span class="keyword">new</span> InitialContext();</span><br><span class="line">Context envCtx = (Context) initCtx.lookup(<span class="string">&quot;java:comp/env&quot;</span>);</span><br><span class="line">dataSource = (DataSource)envCtx.lookup(<span class="string">&quot;jdbc/datasource&quot;</span>);</span><br></pre></td></tr></table></figure><p>　　<strong>此种配置下，数据库的驱动jar文件需放置在tomcat的lib下</strong></p><p>　　<strong><img src="data:image/png;base64,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" alt="img"></strong></p><h3 id="4-2、配置Tomcat数据源"><a href="#4-2、配置Tomcat数据源" class="headerlink" title="4.2、配置Tomcat数据源"></a>4.2、配置Tomcat数据源</h3><p>　　<strong>1、在Web项目的WebRoot目录下的META-INF目录创建一个context.xml文件</strong></p><p>　　如下图所示：</p><p>　　<img src="data:image/png;base64,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" alt="img"></p><p>　　<strong>2、在context.xml文件配置tomcat服务器的数据源</strong></p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context&gt;</span><br><span class="line">   &lt;Resource</span><br><span class="line">       name=<span class="string">&quot;jdbc/datasource&quot;</span></span><br><span class="line">       auth=<span class="string">&quot;Container&quot;</span></span><br><span class="line">       type=<span class="string">&quot;javax.sql.DataSource&quot;</span></span><br><span class="line">       username=<span class="string">&quot;root&quot;</span></span><br><span class="line">       password=<span class="string">&quot;XDP&quot;</span></span><br><span class="line">       driverClassName=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span><br><span class="line">       url=<span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy&quot;</span></span><br><span class="line">       maxActive=<span class="string">&quot;8&quot;</span></span><br><span class="line">       maxIdle=<span class="string">&quot;4&quot;</span>/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　<strong>3、将数据库的驱动jar文件需放置在tomcat的lib下</strong></p><p>　　<strong><img src="data:image/png;base64,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" alt="img"></strong></p><p>　　<strong>4、在获取数据库连接的工具类(如jdbcUtils)的静态代码块中获取JNDI容器中的数据源</strong></p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> javax.naming.Context;</span><br><span class="line"><span class="keyword">import</span> javax.naming.InitialContext;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: JdbcUtils_DBCP</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 数据库连接工具类</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-4 下午6:04:36</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils_JNDI</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//在静态代码块中创建数据库连接池</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">             <span class="comment">//初始化JNDI</span></span><br><span class="line">            Context initCtx = <span class="keyword">new</span> InitialContext();</span><br><span class="line">             <span class="comment">//得到JNDI容器</span></span><br><span class="line">            Context envCtx = (Context) initCtx.lookup(<span class="string">&quot;java:comp/env&quot;</span>);</span><br><span class="line">             <span class="comment">//从JNDI容器中检索name为jdbc/datasource的数据源</span></span><br><span class="line">            ds = (DataSource)envCtx.lookup(<span class="string">&quot;jdbc/datasource&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: getConnection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 从数据源中获取数据库连接</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Connection</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="comment">//从数据源中获取数据库连接</span></span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: release</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 释放资源，</span></span><br><span class="line"><span class="comment">    * 释放的资源包括Connection数据库连接对象，负责执行SQL命令的Statement对象，存储查询结果的ResultSet对象</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn,Statement st,ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭存储查询结果的ResultSet对象</span></span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//关闭负责执行SQL命令的Statement对象</span></span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//将Connection连接对象还给数据库连接池</span></span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><p>　　写一个Servlet测试JNDI数据源</p><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.JdbcUtils_JNDI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JNDITest</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = JdbcUtils_JNDI.getConnection();</span><br><span class="line">            String sql = <span class="string">&quot;insert into test1(name) values(?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>, <span class="string">&quot;gacl&quot;</span>);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line">            <span class="comment">//获取数据库自动生成的主键</span></span><br><span class="line">            rs = st.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getInt(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//释放资源</span></span><br><span class="line">            JdbcUtils_JNDI.release(conn, st, rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>]]></content>
      
      
      <categories>
          
          <category> jsp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle安装教程</title>
      <link href="2020/11/04/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle11g%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>2020/11/04/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle11g%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>参考链接：<a href="https://blog.csdn.net/Feng_xiaoqi/article/details/88780749">https://blog.csdn.net/Feng_xiaoqi/article/details/88780749</a></p><p>因为自己一直没有总结，导致因为某些原因再次安装是，会出现很多的问题，也很头疼，网上博客也五花八门，所以记录自己的整个安装过程，以便于自己下次需要的时候，可以查看，同时，也希望能够帮助到被Oracle安装困扰的同学。</p><p>如果是卸载重装Oracle，可以看我另一篇博客；</p><p>博客地址：<a href="https://blog.csdn.net/qq_40089907/article/details/105662993">https://blog.csdn.net/qq_40089907/article/details/105662993</a></p><p>均是自己一步一步来的，自己都成功了的！</p><h3 id="一、Oracle下载"><a href="#一、Oracle下载" class="headerlink" title="一、Oracle下载"></a>一、Oracle下载</h3><p>官网下载</p><p><a href="https://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html">https://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html</a></p><p>百度网盘链接：<a href="https://pan.baidu.com/s/1fCyi-si9KywZIwFw9jCxvg">https://pan.baidu.com/s/1fCyi-si9KywZIwFw9jCxvg</a></p><p>提取码：aocb</p><h3 id="二、Oracle安装"><a href="#二、Oracle安装" class="headerlink" title="二、Oracle安装"></a>二、Oracle安装</h3><p>1.解压缩文件，将两个压缩包一起选择， 鼠标右击 -&gt;  解压文件 如图</p><p><img src="https://i.loli.net/2020/11/04/yTdELjP2IvGcOtJ.png" alt="image-20201104184040073"></p><p>2.双击database中的setup.exe,开始安装</p><p><img src="https://i.loli.net/2020/11/04/UcNZlC4koxhVITt.png" alt="image-20201104184104708"></p><p>3.配置安全更新，电子邮件不用输入，取消我希望前面的勾，点击下一步</p><p>弹出尚未提供电子邮件地址的窗口，点击是。</p><p><img src="https://i.loli.net/2020/11/04/21avAShBtjXTwHK.png" alt="image-20201104184116939"></p><p>4.选择安装选项，默认创建和配置数据库，点击下一步</p><p><img src="https://i.loli.net/2020/11/04/GUxWJ2ADPT39Ewq.png" alt="image-20201104184137432"></p><p>5.系统类，选择桌面类，点击下一步。</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\1587458837037.png" alt="1587458837037"></p><p>6.典型安装配置，目录中不要出现中文，可以选择默认，管理口令Oracle官方默认是大写字母+小写字母+数字，长度大于8位，你也可以自己选择，密码随意。我的是Oracle123。</p><p>==管理口令要记住。==</p><p><img src="https://i.loli.net/2020/11/04/wB1iGTAKcvDPUF6.png" alt="image-20201104184153671"></p><p>7.先决条件检查窗口，点击下一步。</p><p><img src="https://i.loli.net/2020/11/04/NfPsb2o9lqjh1yc.png" alt="image-20201104184202974"></p><p>8.点击完成，开始安装。</p><p><img src="https://i.loli.net/2020/11/04/hxNRTlezFtBc4bu.png" alt="image-20201104184213132"></p><p>9.安装界面：</p><p><img src="https://i.loli.net/2020/11/04/vAMQFhVZeYgz3qo.png" alt="image-20201104184233784"></p><p>10.当进度条达到100%时，会创建数据库实例：</p><p><img src="https://i.loli.net/2020/11/04/zBxUiybJMLAwOqW.png" alt="image-20201104184246500"></p><p>11.创建实例完成，除了sys和SYStem账户以外，其他账户处于锁定，我们点击口令管理，将SCOTT账户的勾取消，输入管理口令。口令如上一样。</p><p><img src="https://i.loli.net/2020/11/04/TrnQIymzaUfo9Jk.png" alt="image-20201104184255754"></p><p>12.回到主界面，点击关闭。安装到此完成。</p><p>接下来开始测试是否安装好！</p><h3 id="三、Oracle安装完成测试"><a href="#三、Oracle安装完成测试" class="headerlink" title="三、Oracle安装完成测试"></a>三、Oracle安装完成测试</h3><h5 id="1-最快测试我们安装是否完成的方法"><a href="#1-最快测试我们安装是否完成的方法" class="headerlink" title="1.最快测试我们安装是否完成的方法"></a>1.最快测试我们安装是否完成的方法</h5><p>1.进入开始菜单栏，找到Oracle，点击Database Comtrol - orcl,会跳转到<a href="https://localhost:1158/em/console/logon/logon">https://localhost:1158/em/console/logon/logon</a>。</p><p><img src="https://i.loli.net/2020/11/04/zpIxn5ldhRPGEH2.png" alt="image-20201104184305896"></p><p>2.登录。</p><p><img src="https://i.loli.net/2020/11/04/RePTjz16IwMg3WS.png" alt="image-20201104184317222"></p><p>用户名：sys  </p><p>口令：安装时的管理口令，我的时Oracle123，连接选择SYSDBA。</p><p>3.查看用户，点击服务器，用户，就可以看到我们自己的用户情况。</p><p><img src="https://i.loli.net/2020/11/04/AaP6TJiDWE4F2Hn.png" alt="image-20201104184337858"></p><p>4.可以看到我们的用户</p><p><img src="https://i.loli.net/2020/11/04/8IiBHfaY2JOTAFG.png" alt="image-20201104184403893"></p><p>可以看出我们的安装已经没有问题！</p><p>接下来第二种测试，也就是SQL Plus连接测试。</p><h5 id="2-SQL-plus连接测试"><a href="#2-SQL-plus连接测试" class="headerlink" title="2.SQL plus连接测试"></a>2.SQL plus连接测试</h5><p>1.在开始菜单栏找到SQL Plus，点击运行</p><p><img src="https://i.loli.net/2020/11/04/tOxIdumDCspVq2M.png" alt="image-20201104184433033"></p><p>2.输入用户名和口令，登录</p><p>如果是普通用户如scott，直接输入用户名scott和密码(就是管理口令)就行。</p><p>如果是sys,用户名需要+as SYSDBA,以管理员用户登录，否则报error</p><p><img src="https://i.loli.net/2020/11/04/k8r3tQSaAboHGgI.png" alt="image-20201104184455608"></p><p>连接成功，说明安装完成！</p><h3 id="四、用PLSQL连接Oracle"><a href="#四、用PLSQL连接Oracle" class="headerlink" title="四、用PLSQL连接Oracle"></a>四、用PLSQL连接Oracle</h3><p>1.运行PLSQL</p><p><img src="https://i.loli.net/2020/11/04/ayOD4lVUdu2QxKJ.png" alt="image-20201104184506271"></p><p>2.输入用户名、管理口令、数据库和登录方式</p><p>我解锁的用户有：sys、system、scott</p><p>管理口令都为Oracle123</p><p>数据库：localhost:1521/ORCL或者127.0.0.1:1521/ORCL</p><p>连接为：如果是sys用户，必须是SYSDBA或者SYSOPER，如果普通用户，只能用Normal。</p><p>3.登录成功：</p><p><img src="https://i.loli.net/2020/11/04/GXNijOSCVZquHob.png" alt="image-20201104184534219"></p><h3 id="五、Oracle学习"><a href="#五、Oracle学习" class="headerlink" title="五、Oracle学习"></a>五、Oracle学习</h3><h5 id="1-使用PLSQL连接Oracle创建用户和授予权限"><a href="#1-使用PLSQL连接Oracle创建用户和授予权限" class="headerlink" title="1.使用PLSQL连接Oracle创建用户和授予权限"></a>1.使用PLSQL连接Oracle创建用户和授予权限</h5><ol><li><p>首先用sys登录PLSQL</p></li><li><p>找到users，右键新建</p><p><img src="https://i.loli.net/2020/11/04/pKbk9WHTGZORA2i.png" alt="image-20201104184549183"></p></li><li><p>填写内容，一定要给权限，不然会导致后续出错。</p><p><img src="https://i.loli.net/2020/11/04/Nsjmhd4PkLJWaBK.png" alt="image-20201104184601861"></p><p>权限说明：</p><p>connect : 基本操作表的权限，比如增删改查、视图创建等<br>resource： 创建一些函数，比如簇、索引，创建表、列等<br>dba : 相当于管理员权限，拥有系统所有权限 </p></li><li><p>点击应用。创建完成。</p><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20201104184624920.png" alt="image-20201104184624920"></p><p>然后进行登录，用户名emptest,密码自己设置的，我的是Oracle123.端口还是1521，选择normal登录。</p></li></ol><p>后续补充！</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle彻底卸载干净教程</title>
      <link href="2020/11/04/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BD%E5%B9%B2%E5%87%80%E6%95%99%E7%A8%8B/"/>
      <url>2020/11/04/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BD%E5%B9%B2%E5%87%80%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><strong>参考博客：</strong><a href="https://blog.csdn.net/a772304419/article/details/79365744">https://blog.csdn.net/a772304419/article/details/79365744</a></p><h4 id="关闭所有服务"><a href="#关闭所有服务" class="headerlink" title="关闭所有服务"></a>关闭所有服务</h4><p>​    打开cmd，运行services.msc,关闭oracle所有的服务。</p><p>​    <img src="https://i.loli.net/2020/11/05/mO6C3KRt5MNgswz.png" alt="image-20201105093854031"></p><h4 id="打开注册表：打开cmd-运行regedit。"><a href="#打开注册表：打开cmd-运行regedit。" class="headerlink" title="打开注册表：打开cmd,运行regedit。"></a>打开注册表：打开cmd,运行regedit。</h4><ol><li><p>删除 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ 该路径下所有以oracle开始的服务名称，这个键是标识Oracle在windows下注册的各种服务。</p><p><img src="https://i.loli.net/2020/11/05/aEPK5wUOqsluykZ.png" alt="image-20201105093926170"></p></li><li><p>删除：</p><p> HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE</p><p> 删除该oracle目录，该目录下注册着Oracle数据库的软件安装信息。</p></li></ol><ol start="3"><li><p>删除注册的oracle事件日志：</p><p>路径：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application</p><p>删除注册表的以oracle开头的所有项目。</p><p><img src="https://i.loli.net/2020/11/05/R6pkeDXjgGNoY28.png" alt="image-20201105093954561"></p></li></ol><h4 id="删除环境变量"><a href="#删除环境变量" class="headerlink" title="删除环境变量"></a>删除环境变量</h4><p> 鼠标右键右单击”我的电脑–&gt;属性–&gt;高级–&gt;环境变量–&gt;PATH 变量。</p><p>  删除Oracle在该值中的内容。注意:path中记录着一堆操作系统的目录，在windows中各个目录之间使用分号（;）隔开的，删除时注意。</p><h4 id="重启操作系统"><a href="#重启操作系统" class="headerlink" title="重启操作系统"></a>重启操作系统</h4><h4 id="删除Oracle-Home下的所有数据。"><a href="#删除Oracle-Home下的所有数据。" class="headerlink" title="删除Oracle_Home下的所有数据。"></a>删除Oracle_Home下的所有数据。</h4><p>   （Oracle_Home指Oracle程序的安装目录）</p><h4 id="删除C-Program-Files下oracle目录。"><a href="#删除C-Program-Files下oracle目录。" class="headerlink" title="删除C:\Program Files下oracle目录。"></a>删除C:\Program Files下oracle目录。</h4><p>（该目录视Oracle安装所在路径而定）</p><h4 id="删除开始菜单下oracle项"><a href="#删除开始菜单下oracle项" class="headerlink" title="删除开始菜单下oracle项"></a>删除开始菜单下oracle项</h4><p>如：C:\Documents and Settings\All Users\「开始」菜单\程序\Oracle - Ora10g</p><p>   不同的安装这个目录稍有不同。</p><p>   如果不删除开始菜单下的Oracle相关菜单目录，没关系，这个不影响再次安装Oracle.当再次安装Oracle时，该菜单会被替换。</p><p>至此，Windows平台下Oracle就彻底卸载了。  </p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle出现的问题总结</title>
      <link href="2020/11/04/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
      <url>2020/11/04/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<p>1.本来好好的突然出现无监听程序：</p><p>原因：PROCESS、SESSION数量设置的不够，导致ORACLE在高峰期的时候，没有足够的PROCESS对连接上来的客户服务进行分配。（连接太多崩溃了）</p><p>解决办法：</p><p>​    1.方法一：增大Process 和 session ,重启数据库服务</p><p>​    2.方法二：重启</p><p>2.本地可以连接用PL SQL连接无监听程序：</p><p>解决办法：</p><p>​    １.查看监听服务和程序是否开启。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.查看服务---启动或者重启服务</span><br><span class="line"><span class="comment">###</span></span><br><span class="line">2.查看程序：lsnrctl status</span><br></pre></td></tr></table></figure><p>​    2.Net Manager修改地址2，改为ip</p><p>​    3.Net Configration Assistant重新配置监听程序</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA快捷命令</title>
      <link href="2020/11/04/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/IDEA%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/"/>
      <url>2020/11/04/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/IDEA%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<p>查看源码：Ctrl+鼠标左键</p><p>返回上一级源码位置：Ctrl + Alt + 方向键</p><p>查看类的全部方法：Alt+7</p><p>查找某个方法：Ctrl+O</p><p>自动生成返回值对象：Ctrl+Alt+V</p><p>复制当前行下一行：Ctrl +D</p><p>移动一行代码：Ctrl + shift +上下方向键</p><p>快速生成get/set方法：Alt+Insert</p><p>删除当前行：Ctrl+X </p><p>格式化代码：Ctrl+Alt+1</p><p>查看方法参数：Ctrl+P</p><p>IDEA刷新项目/清除项目缓存：点击File -&gt; Invalidate caches ，点击之后在弹出框中点击确认，之后软件就自动重启了。</p><p>根据文件名查文件路径：</p><p>​    1.鼠标放到文件窗口停留一会，文件路劲自动出现。</p><p>​    2.点击project右边的圆圈。</p><p>全局搜索文件：Shift+Shift</p><p>全局搜索项目文件内的东西：Ctrl+Shift+F</p><p>清除谷歌浏览器缓存快捷键：CTRL+Shift+Delete</p><p>查看类的继承关系和接口实现关系：点击要查看的类–右键–选择diagrams–可以看到继承关系–继续点击要看的类或接口–右键–show implements</p>]]></content>
      
      
      <categories>
          
          <category> 开发工具 </category>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+github搭建个人博客教程</title>
      <link href="2020/11/04/%E5%B7%A5%E5%85%B7/hexo+github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/"/>
      <url>2020/11/04/%E5%B7%A5%E5%85%B7/hexo+github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="1、github创建个人仓库"><a href="#1、github创建个人仓库" class="headerlink" title="1、github创建个人仓库"></a>1、github创建个人仓库</h2><p>创建仓库</p><p><img src="https://img-blog.csdnimg.cn/20190512104941199.png" alt="img"></p><p><img src="https://img-blog.csdnimg.cn/20190512105152927.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpbnRvbjE=,size_16,color_FFFFFF,t_70" alt="img"></p><p>访问<a href="https://lemon-pp.github.io/%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E4%B8%AA%E4%BA%BAGitHub%E5%AD%A6%E4%B9%A0%E5%8D%9A%E5%AE%A2%E4%BA%86%E3%80%82">https://lemon-pp.github.io/，就可以看到自己的个人GitHub学习博客了。</a></p><h2 id="2、配置SSH-key"><a href="#2、配置SSH-key" class="headerlink" title="2、配置SSH key"></a>2、配置SSH key</h2><p>参考博客：<a href="https://zhuanlan.zhihu.com/p/26625249">https://zhuanlan.zhihu.com/p/26625249</a></p><h2 id="3、准备环境"><a href="#3、准备环境" class="headerlink" title="3、准备环境"></a>3、准备环境</h2><p>需要环境：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node.js</span><br><span class="line">npm</span><br><span class="line">git</span><br></pre></td></tr></table></figure><h2 id="4、安装hexo"><a href="#4、安装hexo" class="headerlink" title="4、安装hexo"></a>4、安装hexo</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 下载安装hexo</span></span></span><br><span class="line">npm install -g hexo-cli </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 初始化我们的博客</span></span></span><br><span class="line">hexo init blog</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 生成页面</span></span></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 启动本地服务器,访问http://localhost:4000查看</span></span></span><br><span class="line">hexo s</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5、部署到GitHub"><a href="#5、部署到GitHub" class="headerlink" title="5、部署到GitHub"></a>5、部署到GitHub</h2><p>找到_config.yml</p><p>修改deploy</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://github.com/Lemon-pp/Lemon-pp.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>访问<a href="https://lemon-pp.github.io/%E5%8D%B3%E5%8F%AF">https://lemon-pp.github.io/即可</a></p><p>建议上传到github，用git管理。</p><h2 id="6、博客个性化"><a href="#6、博客个性化" class="headerlink" title="6、博客个性化"></a>6、博客个性化</h2><p><strong>具体参考butterfly官方文档：</strong><a href="https://butterfly.js.org/posts/dc584b87/#Front-matter">https://butterfly.js.org/posts/dc584b87/#Front-matter</a></p><h3 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载主题</span></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置主题</span></span><br><span class="line">修改站点配置文件_config.yml中的theme，把主题改为butterfly</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Themes: https://hexo.io/themes/</span></span></span><br><span class="line">theme: butterfly</span><br></pre></td></tr></table></figure><h3 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h3><p>Front-matter是档案最上方以—分隔的区域，用于指定个别档案的变数。</p><p>使用方法：在markdown的最上方输入—即可</p><p>参考文档即可</p><p>官方文档：</p><p><a href="https://butterfly.js.org/posts/ceeb73f/#%E7%B6%B2%E7%AB%99%E8%83%8C%E6%99%AF">https://butterfly.js.org/posts/ceeb73f/#%E7%B6%B2%E7%AB%99%E8%83%8C%E6%99%AF</a></p><p>优秀作者：</p><p><a href="https://www.antmoe.com/posts/75a6347a/#%E7%BD%91%E7%AB%99%E8%83%8C%E6%99%AF">https://www.antmoe.com/posts/75a6347a/#%E7%BD%91%E7%AB%99%E8%83%8C%E6%99%AF</a></p><h4 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常用</span></span><br><span class="line">title：【必需】页面标题</span><br><span class="line">date：【必需】页面创建日期</span><br><span class="line"><span class="built_in">type</span>：【必需】标签、分类和友情链接三个页面需要配置</span><br><span class="line">updated：【可选】页面更新日期</span><br></pre></td></tr></table></figure><p>####　Post Front-matter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常用</span></span><br><span class="line">title: 【必需】文章标题</span><br><span class="line">date: 【必需】文章创建日期</span><br><span class="line">updated: 【可选】文章更新日期</span><br><span class="line">tags: 【可选】文章标签</span><br><span class="line">categories: 【可选】文章分类</span><br><span class="line">top_img: 【可选】文章顶部图片</span><br></pre></td></tr></table></figure><h3 id="标签页"><a href="#标签页" class="headerlink" title="标签页"></a>标签页</h3><p>前往你的Hexo 博客的根目录</p><p>输入hexo new page tags</p><p>你会找到source/tags/index.md这个文件</p><p>修改这个文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--- </span><br><span class="line">title:标签</span><br><span class="line">date: 2018-01-05 00:00:00 </span><br><span class="line"><span class="built_in">type</span>: <span class="string">&quot;tags&quot;</span> </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="分类页"><a href="#分类页" class="headerlink" title="分类页"></a>分类页</h3><p>前往你的Hexo 博客的根目录</p><p>输入hexo new page categories</p><p>你会找到source/categories/index.md这个文件</p><p>修改这个文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--- </span><br><span class="line">title:分类</span><br><span class="line">date: 2018-01-05 00:00:00 </span><br><span class="line">type: &quot;categories&quot; </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h3><p>创建友情链接页面<br>前往你的Hexo 博客的根目录<br>输入 hexo new page link<br>你会找到source/link/index.md这个文件<br>修改这个文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--- </span><br><span class="line">title:友情链接</span><br><span class="line">date: 2018-06-07 22:17:49 </span><br><span class="line">type: &quot;link&quot; </span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>友情链接添加:</p><p>在Hexo博客目录中的source/_data，创建一个文件link.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">class:</span></span><br><span class="line">  <span class="attr">class_name:</span> <span class="string">友情链接</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="attr">1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">小康博客</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.antmoe.com</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://img.antmoe.com/avatar.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">每天进步一点点</span></span><br><span class="line">    <span class="attr">2:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">test</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.xxxxxxcn/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://xxxxx/avatar.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">test</span></span><br></pre></td></tr></table></figure><h3 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h3><p>参考:<a href="https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md">https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md</a></p><h3 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h3><p>参考:<a href="https://github.com/mythsman/hexo-douban">https://github.com/mythsman/hexo-douban</a></p><h3 id="图库"><a href="#图库" class="headerlink" title="图库"></a>图库</h3><p>图库页面只是普通的页面，你只需要hexo n page xxxxx创建你的页面就行</p><p>然后使用标签外挂galleryGroup，具体用法请查看对应的内容。</p><p><a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB">https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB</a></p><h4 id="子页面"><a href="#子页面" class="headerlink" title="子页面"></a>子页面</h4><p>参考:<a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A">https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A</a></p><h3 id="404页面"><a href="#404页面" class="headerlink" title="404页面"></a>404页面</h3><p>修改主题配置文件:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error_404:</span> </span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span> </span><br><span class="line">    <span class="attr">subtitle:</span> <span class="string">&quot;页面没有找到&quot;</span> </span><br><span class="line">    <span class="attr">background:</span></span><br></pre></td></tr></table></figure><h3 id="导航菜单"><a href="#导航菜单" class="headerlink" title="导航菜单"></a>导航菜单</h3><p>修改主题配置文件:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">时间轴:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">清单||</span> <span class="attr">fa fa-heartbeat:</span> </span><br><span class="line">    <span class="string">-音乐||</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span> </span><br><span class="line">    <span class="string">-照片||</span> <span class="string">/Gallery/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-images</span> </span><br><span class="line">    <span class="string">-电影||</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="顶部图"><a href="#顶部图" class="headerlink" title="顶部图"></a>顶部图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">配置解释</span><br><span class="line">index_img 主页的top_img</span><br><span class="line">default_top_img  默认的top_img，当页面的top_img 没有配置时，会显示default_top_img</span><br><span class="line">archive_img  归档页面的top_img</span><br><span class="line">tag_imgtag   子页面的默认top_img</span><br><span class="line">tag_per_imgtag   子页面的top_img，可配置每个tag 的top_img</span><br><span class="line">category_img  category 子页面的默认top_img</span><br><span class="line">category_per_imgcategory 子页面的top_img，可配置每个category 的top_img</span><br></pre></td></tr></table></figure><h3 id="文章置顶"><a href="#文章置顶" class="headerlink" title="文章置顶"></a>文章置顶</h3><p>你可以直接在文章的front-matter区域里添加sticky: 1属性来把这篇文章置顶。数值越大，置顶的优先级越大。</p><h3 id="文章封面"><a href="#文章封面" class="headerlink" title="文章封面"></a>文章封面</h3><p>文章的markdown文档上,在Front-matter添加cover,并填上要显示的图片地址。<br>如果不配置cover,可以设置显示默认的cover.</p><p>如果不想在首页显示cover,可以设置为false</p><p><strong>修改主题配置文件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cover: #是否显示文章封面index_enable: true aside_enable: true archives_enable: true #封面显示的位置#三个值可配置left , right , both position: both #当没有设置cover时，默认的封面显示default_cover:</span><br><span class="line">  </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>当配置多张图片时,会随机选择一张作为cover.此时写法应为</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_cover:</span> <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png</span> <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png</span> <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png</span></span><br><span class="line">   </span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/04/8JigH9MTyA6N43B.png" alt="image-20201104160915517"></p><h3 id="文章页相关配置"><a href="#文章页相关配置" class="headerlink" title="文章页相关配置"></a>文章页相关配置</h3><h4 id="文章meta显示"><a href="#文章meta显示" class="headerlink" title="文章meta显示"></a>文章meta显示</h4><p>修改主题配置文件</p><p>post_meta</p><h4 id="文章版权"><a href="#文章版权" class="headerlink" title="文章版权"></a>文章版权</h4><p>post_copyright</p><h4 id="文章打赏"><a href="#文章打赏" class="headerlink" title="文章打赏"></a>文章打赏</h4><p>reward</p><h4 id="TOC"><a href="#TOC" class="headerlink" title="TOC"></a>TOC</h4><p>在文章页，会有一个目录，用于显示TOC。</p><p>toc</p><h4 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h4><p>相关文章推荐的原理是根据文章tags的比重来推荐</p><p>修改 主题配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post: enable: true limit:</span> <span class="number">6</span> <span class="comment">#显示推荐文章数目date_type: created # or created or updated文章日期显示创建日或者更新日</span></span><br></pre></td></tr></table></figure><h4 id="头像"><a href="#头像" class="headerlink" title="头像"></a>头像</h4><p>修改 主题配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar: img: /img/avatar.png effect:</span> <span class="literal">true</span> <span class="comment">#头像会一直转圈</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/04/CeAuHr8aWlZLjTI.png" alt="image-20201104162336189"></p><h4 id="侧边栏设置"><a href="#侧边栏设置" class="headerlink" title="侧边栏设置"></a>侧边栏设置</h4><p>可自行决定哪个项目需要显示，可决定位置，也可以设置不显示侧边栏。</p><p>修改 ==主题配置文件==</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aside</span><br></pre></td></tr></table></figure><h4 id="最新评论"><a href="#最新评论" class="headerlink" title="最新评论"></a>最新评论</h4><p>在侧边栏显示最新评论板块</p><p>修改 主题配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newest_comments</span><br></pre></td></tr></table></figure><h3 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h3><p>参考:</p><p><a href="https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96">https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96</a></p><h3 id="搜索系统"><a href="#搜索系统" class="headerlink" title="搜索系统"></a>搜索系统</h3><p>你需要安装hexo-generator-search .根据它的文档去做相应配置。注意格式只支持xml。</p><p>修改 主题配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local_search: enable: false</span><br></pre></td></tr></table></figure><h3 id="网站背景"><a href="#网站背景" class="headerlink" title="网站背景"></a>网站背景</h3><p>默认显示白色，可设置图片或者颜色</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#图片格式url(http:&#x2F;&#x2F;xxxxxx.com&#x2F;xxx.jpg) </span><br><span class="line">#颜色（HEX值&#x2F;RGB值&#x2F;颜色单词&#x2F;渐变色) </span><br><span class="line">#留空不显示背景</span><br><span class="line">background:</span><br></pre></td></tr></table></figure><h3 id="footer-背景"><a href="#footer-背景" class="headerlink" title="footer 背景"></a>footer 背景</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># footer是否显示图片背景(与top_img一致) </span><br><span class="line">footer_bg:  true</span><br><span class="line"></span><br><span class="line">留空&#x2F;false显示默认的颜色</span><br><span class="line">img链接图片的链接，显示所配置的图片</span><br><span class="line">颜色(</span><br><span class="line">HEX值- #0000FF</span><br><span class="line">RGB值- rgb(0,0,255)</span><br><span class="line">颜色单词- orange</span><br><span class="line">渐变色- linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)</span><br><span class="line">）对应的颜色</span><br><span class="line">true显示跟top_img 一样</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="背景特效"><a href="#背景特效" class="headerlink" title="背景特效"></a>背景特效</h3><p>canvas_fluttering_ribbon</p><h3 id="页面美化"><a href="#页面美化" class="headerlink" title="页面美化"></a>页面美化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#美化页面显示</span><br><span class="line">beautify: enable: true field: site # site&#x2F;post title-prefix-icon: &#39;\f0c1&#39; title-prefix-icon-color: &quot;#F47466&quot;</span><br><span class="line"> </span><br><span class="line">field配置生效的区域</span><br><span class="line">post 只在文章页生效</span><br><span class="line">site 在全站生效</span><br></pre></td></tr></table></figure><h3 id="网站副标题"><a href="#网站副标题" class="headerlink" title="网站副标题"></a>网站副标题</h3><p>可设置主页中显示的网站副标题或者喜欢的座右铭。</p><p>修改 主题配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#主页subtitle </span><br><span class="line">subtitle: enable: true #打字效果effect: true #循环或者只打字一次loop: false # source调用第三方服务# source: false关闭调用# source: 1调用搏天api的随机语录（简体） https :&#x2F;&#x2F;api.btstu.cn&#x2F; # source: 2调用一言网的一句话（简体） https:&#x2F;&#x2F;hitokoto.cn&#x2F; # source: 3调用一句网（简体） http:&#x2F;&#x2F;yijuzhan.com&#x2F; # source: 4调用今日诗词（简体） https:&#x2F;&#x2F;www.jinrishici.com&#x2F; # subtitle会先显示source ,再显示sub的内容source: false #如果有英文逗号&#39; , &#39;,请使用转义字元&amp; #44; #如果有英文双引号&#39; &quot; &#39;,请使用转义字元&quot; #开头不允许转义字元，如需要，请把整个句子用双引号包住#例如”&quot;Never put off till tomorrow what you can do today&quot;&quot;#如果关闭打字效果，subtitle只会显示sub的第一行文字sub:</span><br><span class="line">   </span><br><span class="line">  </span><br><span class="line">    - 今日事,今日毕- Never put off till tomorrow what you can do today</span><br><span class="line">              </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h3><p>打开hexo 工作目录</p><p>npm install hexo-wordcount –save or yarn add hexo-wordcount</p><p>修改主题配置文件:wordcount</p><h3 id="图片大图查看模式"><a href="#图片大图查看模式" class="headerlink" title="图片大图查看模式"></a>图片大图查看模式</h3><p>fancybox</p><h2 id="7、写博客"><a href="#7、写博客" class="headerlink" title="7、写博客"></a>7、写博客</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 生成文章 或者将文章直接放到<span class="built_in">source</span>/_posts下，可以自建文件夹分类</span></span><br><span class="line">hexo new &#x27;my-first-blog&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成页面</span></span><br><span class="line">hexo new page &#x27;名字&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清理</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成页面</span></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 部署到GitHub</span></span><br><span class="line">hexo d </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动本地预览</span></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git命令</title>
      <link href="2020/11/04/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git%E5%AD%A6%E4%B9%A0/"/>
      <url>2020/11/04/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h5 id="1-git添加文件步骤："><a href="#1-git添加文件步骤：" class="headerlink" title="1. git添加文件步骤："></a>1. git添加文件步骤：</h5><ol><li>克隆仓库：git clone 仓库地址</li><li>仓库初始化：git init</li><li>添加文件到缓存区：git add 文件名  或者上传全部文件 git add .</li><li>将文件提交到归档区：git commit -m ‘注释’</li><li>添加仓库：git remote add origin 仓库地址，用origin来代替仓库地址。</li><li>通过push提交到远程仓库：git push -u origin master</li></ol><h5 id="2-本地文件修改后："><a href="#2-本地文件修改后：" class="headerlink" title="2. 本地文件修改后："></a>2. 本地文件修改后：</h5><pre><code> 1. 使用git status 查看状态 2. 通过添加文件步骤，进行提交。</code></pre><h5 id="3-文件提交回滚："><a href="#3-文件提交回滚：" class="headerlink" title="3.文件提交回滚："></a>3.文件提交回滚：</h5><ol><li>通过git log查看版本号。</li><li>git reset [opt] 版本号   进行回滚。默认opt参数是–mixed。<ol><li>–mixed  回滚缓冲区、归档区。</li><li>–hard  回滚工作区、缓冲区、归档区。</li><li>–soft  只回滚归档区</li></ol></li><li>再进行add、commit等操作。</li></ol><h5 id="4-回滚错误还原："><a href="#4-回滚错误还原：" class="headerlink" title="4.回滚错误还原："></a>4.回滚错误还原：</h5><ol><li>通过git reflog 查看版本号</li><li>再通过git reset 版本号执行操作。</li></ol><h5 id="5-创建分支"><a href="#5-创建分支" class="headerlink" title="5.创建分支"></a>5.创建分支</h5><p>查看当前分支：git branch -v</p><p>创建分支并切换：git checkout -b 分支名</p><p>添加文件：步骤如上：</p><p>​                1.git add 文件名</p><p>​                2.git commit -m ‘注释’</p><p>​                3.git push origin 分支名</p><h5 id="6-合并分支："><a href="#6-合并分支：" class="headerlink" title="6.合并分支："></a>6.合并分支：</h5><p>1.先切换到master分支：git checkout master</p><p>2.查看当前分支：git branch -v</p><p>3.将b1分支合并到自己：git merge b1</p><p>4.同步到远程仓库：git push origin master</p><h5 id="7-合并分支产生冲突："><a href="#7-合并分支产生冲突：" class="headerlink" title="7.合并分支产生冲突："></a>7.合并分支产生冲突：</h5><p>假设分支b1和b2都对4.txt进行了修改，然后add、commit了之后,都切到master分支，进行merge操作，bimerge完了，b2再去merge就产生了冲突。</p><p>解决办法：</p><p>1.新版本中，必须解决冲突了才能切换分支。</p><p>2.先git reset –hard 版本号回滚。</p><p>3.然后切换到b2分支，然后merge主干master分支。然后协商确当要改动的内容。然后删掉不要的，再次进行提交。</p><p>4.然后切回master分支，使用git merge b2将b2合并到master。</p><h5 id="8-本地仓库落后远程仓库不一致时："><a href="#8-本地仓库落后远程仓库不一致时：" class="headerlink" title="8.本地仓库落后远程仓库不一致时："></a>8.本地仓库落后远程仓库不一致时：</h5><p>更新本地仓库：git pull 。默认拉取origin。</p><p>git pull 是git fetch 和 git  merge操作的合并。</p>]]></content>
      
      
      <categories>
          
          <category> 版本管理工具 </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟机问题</title>
      <link href="2020/11/04/Linux/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>2020/11/04/Linux/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="1-虚拟机无法访问外部网络"><a href="#1-虚拟机无法访问外部网络" class="headerlink" title="1.虚拟机无法访问外部网络"></a>1.虚拟机无法访问外部网络</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 解决办法</span></span><br><span class="line">1.查看ip</span><br><span class="line">2.如果可以看到IP，将网络设置为nat模式，然后重启网络</span><br><span class="line">systemctl restart network</span><br><span class="line">3.ping www.baidu.com</span><br></pre></td></tr></table></figure><h2 id="2-虚拟机查看不到自己IP"><a href="#2-虚拟机查看不到自己IP" class="headerlink" title="2.虚拟机查看不到自己IP"></a>2.虚拟机查看不到自己IP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chkconfig network off</span><br><span class="line">chkconfig network on</span><br><span class="line">systemctl stop NetworkManager</span><br><span class="line">systemctl start NetworkManager</span><br><span class="line">//上面两句可以合并成 systemctl restart NetworkManager</span><br></pre></td></tr></table></figure><h2 id="3、主机和虚拟机互相ping不通"><a href="#3、主机和虚拟机互相ping不通" class="headerlink" title="3、主机和虚拟机互相ping不通"></a>3、主机和虚拟机互相ping不通</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.选择nat模式连接</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.修改网络配置文件</span></span></span><br><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line">vi ifcfg-ens33 </span><br><span class="line"></span><br><span class="line">TYPE=&quot;Ethernet&quot;</span><br><span class="line">BOOTPROTO=&quot;static&quot;</span><br><span class="line">DEFROUTE=&quot;yes&quot;</span><br><span class="line">PEERDNS=&quot;yes&quot;</span><br><span class="line">PEERROUTES=&quot;yes&quot;</span><br><span class="line">IPV4_FAILURE_FATAL=&quot;no&quot;</span><br><span class="line">IPV6INIT=&quot;yes&quot;</span><br><span class="line">IPV6_AUTOCONF=&quot;yes&quot;</span><br><span class="line">IPV6_DEFROUTE=&quot;yes&quot;</span><br><span class="line">IPV6_PEERDNS=&quot;yes&quot;</span><br><span class="line">IPV6_PEERROUTES=&quot;yes&quot;</span><br><span class="line">IPV6_FAILURE_FATAL=&quot;no&quot;</span><br><span class="line">IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;</span><br><span class="line">NAME=&quot;ens33&quot;</span><br><span class="line">UUID=&quot;682470a3-b0c4-47ba-9661-766056de0c0f&quot;</span><br><span class="line">DEVICE=&quot;ens33&quot;</span><br><span class="line">ONBOOT=&quot;yes&quot;</span><br><span class="line"></span><br><span class="line">IPADDR=&quot;192.169.1.156&quot;</span><br><span class="line">NETMASK=&quot;255.255.255.0&quot;</span><br><span class="line"></span><br><span class="line">GATEWAY=&quot;192.169.1.2&quot;</span><br><span class="line">DNS1=&quot;114.114.114.114&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 3.重启网络</span></span></span><br><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><h2 id="4-Xshell中文乱码"><a href="#4-Xshell中文乱码" class="headerlink" title="4.Xshell中文乱码"></a>4.Xshell中文乱码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.使用命令查看系统是否支持中文</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span></span><br><span class="line"></span><br><span class="line">2.如果系统支持，修改Xshell属性</span><br><span class="line"><span class="comment"># 点击文件--属性--终端--编码--UTF-8</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux下设置静态IP</title>
      <link href="2020/11/04/Linux/Linux%E4%B8%8B%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81IP/"/>
      <url>2020/11/04/Linux/Linux%E4%B8%8B%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81IP/</url>
      
        <content type="html"><![CDATA[<p>参考地址：<a href="https://blog.csdn.net/u014466635/article/details/80284792">https://blog.csdn.net/u014466635/article/details/80284792</a></p><h3 id="一、设置虚拟网络编辑器"><a href="#一、设置虚拟网络编辑器" class="headerlink" title="一、设置虚拟网络编辑器"></a>一、设置虚拟网络编辑器</h3><p>在菜单栏选择编辑→ 虚拟网络编辑器，打开虚拟网络编辑器对话框，选择Net网络连接方式，随意设置子网IP，点击NAT设置页面，查看子网掩码和网关，后面修改静态IP会用到。</p><p><img src="https://i.loli.net/2020/11/05/lm91DbQCMtNiwBv.png" alt="image-20201105112723980"></p><p>注：上面的“使用本地DHCP服务……”这一项是没有钩选的</p><p><img src="https://i.loli.net/2020/11/05/zNdRYlj2pS64XDe.png" alt="image-20201105112750360"></p><h3 id="二、检查物理主机-网卡设置"><a href="#二、检查物理主机-网卡设置" class="headerlink" title="二、检查物理主机 网卡设置"></a>二、检查物理主机 网卡设置</h3><p>打开网络和共享中心→ 更改适配器设置→，在VMware Network Adapter VMnet8上单击右键，选择属性按钮打开属性对话框。  </p><p><img src="https://i.loli.net/2020/11/05/jbDqYkrOG4s6m95.png" alt="image-20201105112808407"></p><p>修改IP地址注意填写和第一步设置的一样</p><p><img src="https://i.loli.net/2020/11/05/dT7QABSr3OvzRZV.png" alt="image-20201105112817927"></p><h3 id="三、进入虚拟机，设置固定IP地址。"><a href="#三、进入虚拟机，设置固定IP地址。" class="headerlink" title="三、进入虚拟机，设置固定IP地址。"></a>三、进入虚拟机，设置固定IP地址。</h3><p>输入如下命令：vi /etc/sysconfig/network-scripts/ifcfg-eth33</p><p>注：修改网络设置必须是root用户或是sudo </p><p><img src="https://i.loli.net/2020/11/05/MATIq4wuPiGWpHY.png" alt="image-20201105112838321"></p><p>DEVICE=”eth0”<br>BOOTPROTO=”static”<br>HWADDR=”00:0C:29:F4:7E:C9”<br>IPV6INIT=”yes”<br>NM_CONTROLLED=”yes”<br>ONBOOT=”yes”<br>TYPE=”Ethernet”<br>UUID=”2a76c2f8-cd47-44af-936d-11559b3a498d”<br>IPADDR=”192.168.73.100”<br>NETMASK=”255.255.255.0”</p><p>GATEWAY=”192.168.73.1”</p><p>下一步，保存退出</p><p>为了使地址生效，需要重新启动网络配置，如下图输入：service network restart</p><p><img src="https://i.loli.net/2020/11/05/wikJEfyL8apqBSY.png" alt="image-20201105112850297"></p><h3 id="四、测试网络是否通畅"><a href="#四、测试网络是否通畅" class="headerlink" title="四、测试网络是否通畅"></a>四、测试网络是否通畅</h3><p>在Linux下和Windows下互相ping一下。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用命令</title>
      <link href="2020/11/04/Linux/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>2020/11/04/Linux/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="Oracle命令"><a href="#Oracle命令" class="headerlink" title="Oracle命令"></a>Oracle命令</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop user emp cascade;</span><br></pre></td></tr></table></figure><h2 id="docker-安装nacos"><a href="#docker-安装nacos" class="headerlink" title="docker 安装nacos"></a>docker 安装nacos</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装nacos使用docker 安装最新版</span></span></span><br><span class="line">docker pull nacos/nacos-server</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 创建文件/opt/nacos/init.d/custom.properties并复制如下内容</span></span></span><br><span class="line">management.endpoints.web.exposure.include=*</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 启动</span></span></span><br><span class="line">docker run -d -p 8848:8848 -e MODE=standalone -v /opt/nacos/init.d/custom.properties:/home/nacos/init.d/custom.properties -v /opt/nacos/logs:/home/nacos/logs --restart always --name nacos nacos/nacos-server</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#创建数据库 nacos再添加sql</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="redis中的常用命令"><a href="#redis中的常用命令" class="headerlink" title="redis中的常用命令"></a>redis中的常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###################String（kv键值对）########################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置kv键值对 </span></span><br><span class="line">set hello word</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获得kv键值对</span></span><br><span class="line">get hello</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除kv键值对</span></span><br><span class="line">del hello</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################list(链表)#######################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给定值推入列表右端</span></span><br><span class="line">rpush list-key item</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取列表上的所有值</span></span><br><span class="line">lrange list-key 0 -1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取列表上给定位置的单个元素</span></span><br><span class="line">lindex list-key 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从列表左端弹出一个值，并返回被弹出的值</span></span><br><span class="line">lpop list-key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################set(无序表)#######################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将给定元素添加到集合</span></span><br><span class="line">sadd set-key item</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 返回集合包含的所有元素</span></span><br><span class="line">smembers set-key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果给定的元素存在于集合中，那么移除这个元素</span></span><br><span class="line">srem set-key item1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################(散列表)#######################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在散列里面关联起给定的键值对</span></span><br><span class="line">hset hash-key sub-key1 value1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取散列键的值</span></span><br><span class="line">hget hash-key sub-key1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取所有的散列键值对</span></span><br><span class="line">hgetall hash-key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果给定的键在散列表里，删除给定的键值对</span></span><br><span class="line">hdel hash-key sub-key1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################(有序集合)#######################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将一个带有给定分值的成员添加到有序集合里面</span></span><br><span class="line">zadd zset-key 728 member</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 根据元素在有序列表中所处的位置，从有序集合里获取多个元素</span></span><br><span class="line">zrange zset-key 0 -1 withscores</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取给定分值范围内的所有元素</span></span><br><span class="line">zrangebyscore zset-key 0 800 withscores</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果给定成员存在于有序集合，那么移除这个成员</span></span><br><span class="line">zrem zset-key member1</span><br></pre></td></tr></table></figure><h2 id="nginx常用命令"><a href="#nginx常用命令" class="headerlink" title="nginx常用命令"></a>nginx常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用nginx操作命令的前提，进入nginx的目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/nginx/sbin</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看版本号</span></span><br><span class="line">./nginx -v</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动nginx</span></span><br><span class="line">./nginx</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭nginx</span></span><br><span class="line">./nginx -s stop</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新加载nginx</span></span><br><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure><h2 id="nginx的配置文件"><a href="#nginx的配置文件" class="headerlink" title="nginx的配置文件"></a>nginx的配置文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########## 每个指令必须有分号结束。#################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">user administrator administrators;  <span class="comment">#配置用户或者组，默认为nobody nobody。</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">worker_processes 2;  <span class="comment">#允许生成的进程数，默认为1</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">pid /nginx/pid/nginx.pid;   <span class="comment">#指定nginx进程运行文件存放地址</span></span></span><br><span class="line">error_log log/error.log debug;  #制定日志路径，级别。</span><br><span class="line"><span class="meta">#</span><span class="bash">这个设置可以放入全局块，http块，server块，级别以此为：debug|info|notice|warn|error|crit|alert|emerg</span></span><br><span class="line">events &#123;</span><br><span class="line">    accept_mutex on;   #设置网路连接序列化，防止惊群现象发生，默认为on</span><br><span class="line">    multi_accept on;  #设置一个进程是否同时接受多个网络连接，默认为off</span><br><span class="line">    #use epoll;      #事件驱动模型，select|poll|kqueue|epoll|resig|/dev/poll|eventport</span><br><span class="line">    worker_connections  1024;    #最大连接数，默认为512</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;   #文件扩展名与文件类型映射表</span><br><span class="line">    default_type  application/octet-stream; #默认文件类型，默认为text/plain</span><br><span class="line">    #access_log off; #取消服务日志    </span><br><span class="line">    log_format myFormat &#x27;$remote_addr–$remote_user [$time_local] $request $status $body_bytes_sent $http_referer $http_user_agent $http_x_forwarded_for&#x27;; #日志自定义格式</span><br><span class="line">    access_log log/access.log myFormat;  #combined为日志格式的默认值</span><br><span class="line">    sendfile on;   #允许sendfile方式传输文件，默认为off，可以在http块，server块，location块。</span><br><span class="line">    sendfile_max_chunk 100k;  #每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限。</span><br><span class="line">    keepalive_timeout 65;  #连接超时时间，默认为75s，可以在http，server，location块。</span><br><span class="line"></span><br><span class="line">    upstream mysvr &#123;   </span><br><span class="line">      server 127.0.0.1:7878;</span><br><span class="line">      server 192.168.10.121:3333 backup;  #热备</span><br><span class="line">    &#125;</span><br><span class="line">    error_page 404 https://www.baidu.com; #错误页面</span><br><span class="line">    server &#123;</span><br><span class="line">        keepalive_requests 120; #单连接请求上限次数。</span><br><span class="line">        listen       4545;   #监听端口</span><br><span class="line">        server_name  127.0.0.1;   #监听地址       </span><br><span class="line">        location  ~*^.+$ &#123;       #请求的url过滤，正则匹配，~为区分大小写，~*为不区分大小写。</span><br><span class="line">           #root path;  #根目录</span><br><span class="line">           #index vv.txt;  #设置默认页</span><br><span class="line">           proxy_pass  http://mysvr;  #请求转向mysvr 定义的服务器列表</span><br><span class="line">           deny 127.0.0.1;  #拒绝的ip</span><br><span class="line">           allow 172.18.5.54; #允许的ip           </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="docker常用命令"><a href="#docker常用命令" class="headerlink" title="docker常用命令"></a>docker常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动docker</span></span><br><span class="line">sudo systemctl start docker</span><br><span class="line"><span class="meta">#</span><span class="bash"> 开机自启</span></span><br><span class="line">sudo systemctl enable docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查当前所有的镜像</span></span><br><span class="line">sudo docker images</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看正在运行中的容器</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置阿里云镜像加速器</span></span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://r8aan01b.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 镜像下载mysql5.7</span></span><br><span class="line">docker pull mysql:5.7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker 启动mysql</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v 目录挂载</span></span><br><span class="line">docker run -p 3306:3306 --name mysql \</span><br><span class="line">-v /mydata/mysql/log:/var/log/mysql \</span><br><span class="line">-v /mydata/mysql/data:/var/lib/mysql \</span><br><span class="line">-v /mydata/mysql/conf:/etc/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=root \</span><br><span class="line">-d mysql:5.7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> mysql重启</span></span><br><span class="line">systemctl restart mysqld.service </span><br><span class="line"><span class="meta">#</span><span class="bash"> mysql启动</span></span><br><span class="line">systemctl start mysqld.service </span><br><span class="line"><span class="meta">#</span><span class="bash"> mysql停止</span></span><br><span class="line">systemctl stop mysqld.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装redis</span></span><br><span class="line">docker pull redis</span><br><span class="line">mkdir -p /mydata/redis/conf</span><br><span class="line">touch /mydata/redis/conf/redis.conf</span><br><span class="line"></span><br><span class="line">docker run -p 6379:6379 --name redis \</span><br><span class="line">-v /mydata/redis/data:/data \</span><br><span class="line">-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">-d redis redis-server /etc/redis/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> redis进入控制台</span></span><br><span class="line">docker exec -it redis redis-cli</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="git命令"><a href="#git命令" class="headerlink" title="git命令"></a>git命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;amongdec&quot;</span><br><span class="line">git config --global user.mail &quot;xidongdongvv@sina.com&quot;</span><br><span class="line">ssh-keygen -t rsa -C &quot;xidongdongvv@sina.com&quot;</span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><h2 id="服务远程调用open-feign"><a href="#服务远程调用open-feign" class="headerlink" title="服务远程调用open-feign"></a>服务远程调用open-feign</h2><h3 id="1、引入openfeign"><a href="#1、引入openfeign" class="headerlink" title="1、引入openfeign"></a>1、引入openfeign</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="2、编写一个接口来调用远程服务"><a href="#2、编写一个接口来调用远程服务" class="headerlink" title="2、编写一个接口来调用远程服务"></a>2、编写一个接口来调用远程服务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 远程调用优惠券服务的接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;valkyrie-coupon&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CouponFeignService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/valkyriecoupon/coupon/feign&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">memberCoupon</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、开启feign的远程调用功能"><a href="#3、开启feign的远程调用功能" class="headerlink" title="3、开启feign的远程调用功能"></a>3、开启feign的远程调用功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.xiao.valkyriemember.feign&quot;)</span></span><br></pre></td></tr></table></figure><h2 id="Nacos作为配置中心"><a href="#Nacos作为配置中心" class="headerlink" title="Nacos作为配置中心"></a>Nacos作为配置中心</h2><h3 id="1、引入依赖"><a href="#1、引入依赖" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="2、编写bootstrap-properties"><a href="#2、编写bootstrap-properties" class="headerlink" title="2、编写bootstrap.properties"></a>2、编写bootstrap.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 应用名称</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">valktrie-coupon</span></span><br><span class="line"><span class="comment">## 连接的nacos服务器的地址</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure><h3 id="3、在配置中心添加一个配置，名为当前应用名-properties"><a href="#3、在配置中心添加一个配置，名为当前应用名-properties" class="headerlink" title="3、在配置中心添加一个配置，名为当前应用名+.properties"></a>3、在配置中心添加一个配置，名为当前应用名+.properties</h3><h3 id="4、动态获取配置"><a href="#4、动态获取配置" class="headerlink" title="4、动态获取配置"></a>4、动态获取配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RefreshScope</span><span class="comment">//动态获取并刷新配置</span></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;配置名&#125;&quot;)</span></span><br></pre></td></tr></table></figure><blockquote><p>注意（配置中心和当前配置文件都配置相同的项，那么优先使用配置中心的配置）</p></blockquote><h2 id="常用网站"><a href="#常用网站" class="headerlink" title="常用网站"></a>常用网站</h2><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a> 跨域问题详解网站</p></blockquote><h2 id="轮子代码，netty搭建服务器，自定义高性能"><a href="#轮子代码，netty搭建服务器，自定义高性能" class="headerlink" title="轮子代码，netty搭建服务器，自定义高性能"></a>轮子代码，netty搭建服务器，自定义高性能</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.montnets.mwgate.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.montnets.mwgate.common.GlobalParams;</span><br><span class="line"><span class="keyword">import</span> com.montnets.mwgate.smsutil.ConfigManager;</span><br><span class="line"><span class="keyword">import</span> com.montnets.mwgate.smsutil.SmsSendConn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> SmsSendConn smsSendConn = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        HttpServer server = <span class="keyword">new</span> HttpServer(<span class="number">8888</span>);<span class="comment">// 8088为启动端口</span></span><br><span class="line">        <span class="comment">//启动服务器之前，配置全局参数</span></span><br><span class="line">        setGlobal();</span><br><span class="line"></span><br><span class="line">        server.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置全局参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setGlobal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建全局参数</span></span><br><span class="line">        GlobalParams globalParams = <span class="keyword">new</span> GlobalParams();</span><br><span class="line">        <span class="comment">// 设置请求路径</span></span><br><span class="line">        globalParams.setRequestPath(<span class="string">&quot;/sms/v2/std/&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置是否需要日志 1:需要日志;0:不需要日志</span></span><br><span class="line">        globalParams.setNeedLog(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 设置响应超时时间(30即为30秒)</span></span><br><span class="line">        globalParams.setResponseTimeout(<span class="number">30</span>);</span><br><span class="line">        <span class="comment">// 设置http连接池数</span></span><br><span class="line">        globalParams.setPoolNumber(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// 设置全局参数</span></span><br><span class="line">        ConfigManager.setGlobalParams(globalParams);</span><br><span class="line">        <span class="comment">// 是否保持长连接</span></span><br><span class="line">        <span class="keyword">boolean</span> isKeepAlive = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">// 实例化短信处理对象</span></span><br><span class="line">        smsSendConn = <span class="keyword">new</span> SmsSendConn(isKeepAlive);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.montnets.mwgate.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelInitializer;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelPipeline;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.SocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.http.HttpObjectAggregator;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.http.HttpServerCodec;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServerInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel channel)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ChannelPipeline pipeline = channel.pipeline();</span><br><span class="line">        pipeline.addLast(<span class="keyword">new</span> HttpServerCodec());<span class="comment">// http 编解码</span></span><br><span class="line">        pipeline.addLast(<span class="string">&quot;httpAggregator&quot;</span>, <span class="keyword">new</span> HttpObjectAggregator(<span class="number">512</span> * <span class="number">1024</span>)); <span class="comment">// http 消息聚合器                                                                     512*1024为接收的最大contentlength</span></span><br><span class="line">        pipeline.addLast(<span class="keyword">new</span> HttpRequestHandler());<span class="comment">// 请求处理器</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> port;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpServer</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ServerBootstrap bootstrap = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">        EventLoopGroup boss = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        EventLoopGroup work = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        bootstrap.group(boss, work)</span><br><span class="line">                .handler(<span class="keyword">new</span> LoggingHandler(LogLevel.DEBUG))</span><br><span class="line">                .channel(NioServerSocketChannel.class)</span><br><span class="line">                .childHandler(<span class="keyword">new</span> HttpServerInitializer());</span><br><span class="line"></span><br><span class="line">        ChannelFuture f = bootstrap.bind(<span class="keyword">new</span> InetSocketAddress(port)).sync();</span><br><span class="line">        System.out.println(<span class="string">&quot; server start up on port : &quot;</span> + port);</span><br><span class="line">        f.channel().closeFuture().sync();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.montnets.mwgate.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.ByteBuf;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelFutureListener;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.Unpooled;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerContext;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.SimpleChannelInboundHandler;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.http.*;</span><br><span class="line"><span class="keyword">import</span> io.netty.util.CharsetUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.netty.handler.codec.http.HttpUtil.is100ContinueExpected;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于处理netty服务器的http请求</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpRequestHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">FullHttpRequest</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelReadComplete</span><span class="params">(ChannelHandlerContext ctx)</span> </span>&#123;</span><br><span class="line">        ctx.flush();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">channelRead0</span><span class="params">(ChannelHandlerContext ctx, FullHttpRequest req)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//100 Continue</span></span><br><span class="line">        <span class="keyword">if</span> (is100ContinueExpected(req)) &#123;</span><br><span class="line">            ctx.write(<span class="keyword">new</span> DefaultFullHttpResponse(</span><br><span class="line">                    HttpVersion.HTTP_1_1,</span><br><span class="line">                    HttpResponseStatus.CONTINUE));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取请求的uri</span></span><br><span class="line">        String reqUri = req.uri();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取请求的方式</span></span><br><span class="line">        HttpMethod reqMethod = req.method();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取请求的参数</span></span><br><span class="line">        String reqMsg = getRequestParam(req);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置返回的参数</span></span><br><span class="line">        String reponseMsg = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//========================主要逻辑处理部分==================================</span></span><br><span class="line">        <span class="keyword">if</span>( HttpMethod.POST == reqMethod)&#123;</span><br><span class="line">            <span class="comment">//是Post方式</span></span><br><span class="line">            <span class="keyword">if</span>(reqUri == <span class="keyword">null</span> || reqUri.length() == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//请求uri为空 ，返回信息</span></span><br><span class="line">                reponseMsg = Result.wrap(Result.STATE_ERROR , <span class="string">&quot;请求的uri为空，请重试&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//根据uri,执行指定方法</span></span><br><span class="line">                reponseMsg = distributeByUri(reqUri , reqMsg);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//不是Post方式</span></span><br><span class="line">            reponseMsg = Result.wrap(Result.STATE_ERROR , <span class="string">&quot;请求方式错误，请用POST请求&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//========================================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建http响应</span></span><br><span class="line">        FullHttpResponse response = <span class="keyword">new</span> DefaultFullHttpResponse(</span><br><span class="line">                HttpVersion.HTTP_1_1,</span><br><span class="line">                HttpResponseStatus.OK,</span><br><span class="line">                Unpooled.copiedBuffer(reponseMsg, CharsetUtil.UTF_8));</span><br><span class="line">        <span class="comment">// 设置头信息</span></span><br><span class="line">        response.headers().set(HttpHeaderNames.CONTENT_TYPE, <span class="string">&quot;text/html; charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">//response.headers().set(HttpHeaderNames.CONTENT_TYPE, &quot;text/plain; charset=UTF-8&quot;);</span></span><br><span class="line">        <span class="comment">// 将html write到客户端</span></span><br><span class="line">        ctx.writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得Http请求传递过来的参数 json格式的</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req 一个完整的Http请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回转换出来的json字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getRequestParam</span><span class="params">(FullHttpRequest req)</span></span>&#123;</span><br><span class="line">        ByteBuf byteBuf = req.content();</span><br><span class="line">        <span class="keyword">int</span> length = byteBuf.readableBytes();</span><br><span class="line">        <span class="keyword">byte</span>[] array = <span class="keyword">new</span> <span class="keyword">byte</span>[length];</span><br><span class="line">        byteBuf.getBytes(byteBuf.readerIndex(), array);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据uri 和请求的参数，确定执行的业务方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回执行结果，用字符串表示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">distributeByUri</span><span class="params">(String uri , String reqmsg)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        String reponseMsg = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/setAccountInfo&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//请求的是设置用户账号信息功能</span></span><br><span class="line">            reponseMsg = SmsBiz.setAccountInfo(reqmsg);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/removeAccount&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//请求移除账号功能</span></span><br><span class="line">            reponseMsg = SmsBiz.removeAccount(reqmsg);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/singleSend&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//请求单发接口</span></span><br><span class="line">            reponseMsg = SmsBiz.singleSend(ServerApplication.smsSendConn , reqmsg);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/batchSend&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//请求群发接口</span></span><br><span class="line">            reponseMsg = SmsBiz.batchSend(ServerApplication.smsSendConn , reqmsg);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/multiSend&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//请求自定义发送接口</span></span><br><span class="line">            reponseMsg = SmsBiz.multiSend(ServerApplication.smsSendConn , reqmsg);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/getRemains&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//请求查询剩余金额或条数接口</span></span><br><span class="line">            reponseMsg = SmsBiz.getRemains(ServerApplication.smsSendConn , reqmsg);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/getBalance&quot;</span>.equals(uri))&#123;</span><br><span class="line">            <span class="comment">//没有该请求</span></span><br><span class="line">            reponseMsg = SmsBiz.getBalance(ServerApplication.smsSendConn , reqmsg);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> reponseMsg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Controller异常的统一处理"><a href="#Controller异常的统一处理" class="headerlink" title="Controller异常的统一处理"></a>Controller异常的统一处理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="comment">//异常最终会从Controller抛出，我们就拦截Controller抛出的异常进行统一处理</span></span><br><span class="line"><span class="meta">@RestControllerAdvice(basePackages = &quot;com.xiao.valkyrieproduct.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AllExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//异常类型拦截</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">handlerException</span><span class="params">(MethodArgumentNotValidException e)</span></span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;数据校验出现问题&#123;&#125;,异常类型&#123;&#125;&quot;</span>,e.getMessage(),e.getClass());</span><br><span class="line">        <span class="keyword">final</span> BindingResult bindingResult = e.getBindingResult();</span><br><span class="line"></span><br><span class="line">        Map&lt;String , String&gt; error = <span class="keyword">new</span> HashMap&lt;String , String&gt;();</span><br><span class="line">        bindingResult.getFieldErrors().forEach((fieldError)-&gt;&#123;</span><br><span class="line">            error.put(fieldError.getField() , fieldError.getDefaultMessage());</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">400</span>,<span class="string">&quot;数据校验出现问题&quot;</span>).put(<span class="string">&quot;errordata&quot;</span> , error);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//其他异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = Exception.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">handler</span><span class="params">(Exception e)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SpringCloud-gateway-断言配置文件"><a href="#SpringCloud-gateway-断言配置文件" class="headerlink" title="SpringCloud gateway 断言配置文件"></a>SpringCloud gateway 断言配置文件</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">third_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://valkyrie-third-party</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">Path=/api/third/**</span></span><br><span class="line">        <span class="attr">filters:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">RewritePath=/api/third/(?&lt;segment&gt;.*),/$\&#123;segment&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">product_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://valkyrie-product</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">Path=/api/valkyrieproduct/**</span></span><br><span class="line">        <span class="attr">filters:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/$\&#123;segment&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">member_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://valkyrie-member</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">Path=/api/member/**</span></span><br><span class="line">        <span class="attr">filters:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/$\&#123;segment&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://renren-fast</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">        <span class="attr">filters:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\&#123;segment&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置文件大全"><a href="#配置文件大全" class="headerlink" title="配置文件大全"></a>配置文件大全</h2><p>父模块</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xiao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>valkyrie<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>valkyrie<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>瓦尔基里聚合<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>valkyire-order<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>valkyrie-coupon<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>valkyrie-member<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>valkyrie-ware<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>valkyrie-product<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>renren-fast<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>renren-generator<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>valkyrie-common<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>common模块</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>valkyrie<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xiao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>valkyrie-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis-plus --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpcore<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- nacos作为注册中心的依赖 --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- nacos作为配置中心的依赖 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- jsr303校验框架 --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.7.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>实际应用模块</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xiao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>valkyrie-product<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>valkyrie-product<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>瓦尔基里商品模块<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.SR5<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>valkyrie-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xiao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux下部署nginx</title>
      <link href="2020/11/04/Linux/linux%E4%B8%8B%E9%83%A8%E7%BD%B2nginx/"/>
      <url>2020/11/04/Linux/linux%E4%B8%8B%E9%83%A8%E7%BD%B2nginx/</url>
      
        <content type="html"><![CDATA[<h3 id="1、安装make"><a href="#1、安装make" class="headerlink" title="1、安装make"></a>1、安装make</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc automake autoconf libtool make</span><br></pre></td></tr></table></figure><h3 id="2、安装g"><a href="#2、安装g" class="headerlink" title="2、安装g++"></a>2、安装g++</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc gcc-c++</span><br></pre></td></tr></table></figure><h3 id="3、安装库"><a href="#3、安装库" class="headerlink" title="3、安装库"></a>3、安装库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装PCRE库</span></span></span><br><span class="line">tar -zxvf pcre-8.43.tar.gz</span><br><span class="line">cd pcre-8.43</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装zlib库</span></span></span><br><span class="line">wget http://zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line">tar -zxvf zlib-1.2.11.tar.gz</span><br><span class="line">cd zlib-1.2.11</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装ssl</span></span></span><br><span class="line">cd /usr/local/src</span><br><span class="line">wget https://www.openssl.org/source/openssl-1.0.2s.tar.gz</span><br><span class="line">tar -zxvf openssl-1.0.2s.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装nginx</span></span></span><br><span class="line">cd /usr/local/src</span><br><span class="line">wget http://nginx.org/download/nginx-1.14.2.tar.gz</span><br><span class="line">tar -zxvf nginx-1.14.2.tar.gz</span><br><span class="line">cd nginx-1.14.2</span><br><span class="line"></span><br><span class="line">./configure --prefix=/usr/local/nginx --conf-path=/usr/local/nginx/nginx.conf --pid-path=/usr/local/nginx/nginx.pid --with-http_stub_status_module --with-http_ssl_module --with-openssl=/usr/local/src/openssl-1.0.2t --with-pcre=/usr/local/src/pcre-8.43 --with-zlib=/usr/local/src/zlib-1.2.11 --with-http_realip_module</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4、启动"><a href="#4、启动" class="headerlink" title="4、启动"></a>4、启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 启动nginx</span></span><br><span class="line"><span class="built_in">cd</span> nginx/sbin</span><br><span class="line">./nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## 停止nginx</span></span><br><span class="line">nginx -s stop</span><br><span class="line"></span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><h3 id="5、配置nginx-conf"><a href="#5、配置nginx-conf" class="headerlink" title="5、配置nginx.conf"></a>5、配置nginx.conf</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 配置监听地址和端口</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 配置代理地址和端口</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC入门及搭建</title>
      <link href="2020/11/04/SSM/SpringMVC%E5%85%A5%E9%97%A8%E5%8F%8A%E6%90%AD%E5%BB%BA/"/>
      <url>2020/11/04/SSM/SpringMVC%E5%85%A5%E9%97%A8%E5%8F%8A%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="1、新建项目"><a href="#1、新建项目" class="headerlink" title="1、新建项目"></a>1、新建项目</h2><p>选择maven，勾选，以及选择后缀为webapp</p><p><img src="https://i.loli.net/2020/11/05/9hxZ2grXiQFHoOE.png" alt="image-20201105112921571"></p><p>创建项目骨架</p><p>在main目录下新建Java、resources文件夹，并修改为source root和Resources root。</p><p><img src="https://i.loli.net/2020/11/05/orHpNvUkRXOGVyT.png" alt="image-20201105112933401"></p><h2 id="2、开始项目搭建"><a href="#2、开始项目搭建" class="headerlink" title="2、开始项目搭建"></a>2、开始项目搭建</h2><h3 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置前端控制器DispatcherServlet"><a href="#配置前端控制器DispatcherServlet" class="headerlink" title="配置前端控制器DispatcherServlet"></a>配置前端控制器DispatcherServlet</h3><p>配置前端控制器DispatcherServlet，能拦截所有请求，并智能派发，由于DispatcherServlet是一个Servlet,所以需要在web.xml中配置。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Servlet启动加载，启动级别，值越小，级别越高--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--拦截所有请求，不能使用/*，/*会把页面也拦截，比如jsp--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>指定springmvc的配置文件位置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br></pre></td></tr></table></figure><p>新建SpringMVC的配置文件–SpringMVC.xml</p><p>配置包扫描</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启注解扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lemon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p>创建视图解析器对象</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--表示文件所在位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--表示文件后缀名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>开启springmvc框架的注解支持</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注意别导错了xml的头部</p><h2 id="3、开始编码"><a href="#3、开始编码" class="headerlink" title="3、开始编码"></a>3、开始编码</h2><p>index.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;入门&lt;/h1&gt;</span><br><span class="line">    &lt;a href=&quot;/hello&quot;&gt;点击跳转&lt;/a&gt;</span><br><span class="line">    &lt;!--/hello对应controller中<span class="meta">@RequestMapping(&quot;/hello&quot;)</span>的路径映射--&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>success.jsp(放到视图解析器配置的目录)</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;入门案例&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>编写controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello springmvc!!!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4、请求流程"><a href="#4、请求流程" class="headerlink" title="4、请求流程"></a>4、请求流程</h2><p><img src="https://i.loli.net/2020/11/05/CZgMBWUQJpHcIbR.png" alt="image-20201105112945592"></p>]]></content>
      
      
      <categories>
          
          <category> SSM </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora通过PicGo实现图片上传</title>
      <link href="2020/11/04/%E5%B7%A5%E5%85%B7/Typora%E9%80%9A%E8%BF%87PicGo%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/"/>
      <url>2020/11/04/%E5%B7%A5%E5%85%B7/Typora%E9%80%9A%E8%BF%87PicGo%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Typora通过PicGo实现图片上传"><a href="#Typora通过PicGo实现图片上传" class="headerlink" title="Typora通过PicGo实现图片上传"></a>Typora通过PicGo实现图片上传</h1><h2 id="前提工具"><a href="#前提工具" class="headerlink" title="前提工具"></a>前提工具</h2><p>1.<strong>Typora：</strong>百度或者谷歌下载，建议最新版。因为功能是最新版才有。</p><p>2.<strong>PicGo：</strong>开源的图片管理工具，可以自己上传图片到各种图床。</p><p>3.<strong><code>SM.MS</code></strong>: <strong>免费</strong>图床。我选择这个图床的原因主要是免费、功能够用。</p><p>功能：</p><p>实现自动上传图片到图床、保存 Markdown 格式的链接，直接粘贴插入，非常轻松，减少了复杂的工作。</p><h2 id="搭建步骤"><a href="#搭建步骤" class="headerlink" title="搭建步骤"></a>搭建步骤</h2><p><strong>1.下载新版Typora</strong></p><p><strong>2.下载PicGo.</strong></p><p>​    下载地址：<a href="https://picgo.github.io/PicGo-Doc/zh/guide/#%E7%89%B9%E8%89%B2%E5%8A%9F%E8%83%BD">https://picgo.github.io/PicGo-Doc/zh/guide/#%E7%89%B9%E8%89%B2%E5%8A%9F%E8%83%BD</a></p><p>windows版本：</p><p><img src="https://i.loli.net/2020/07/15/NHOJdkQe5WKh2tV.png" alt="image-20200715085021500"></p><p><strong>3.注册SM.MS</strong></p><p>先注册，然后在API Token中获取token</p><p><img src="https://i.loli.net/2020/07/15/AIMNFi76SzcVGP2.png" alt="image-20200715085316716"></p><p><strong>4.配置PicGo</strong></p><p>1.插件设置</p><p>​    下载smms-user插件，在设置中配置sm的token。</p><p>2.上传区选择图片上传-SM.MS图床。</p><p><strong>5.Typroa设置</strong></p><p><img src="https://i.loli.net/2020/07/15/SgsVLF4e26Y39Ir.png" alt="image-20200715085716749"></p><p>根据1-2-3-4，完成设置。</p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>1.点击验证图片上传选项，查看是否成功。</p><p>2.截图复制到typroa中，查看是否自动上传，由本地路劲变为HTTP路径。</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
          <category> PicGo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PicGo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
